
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>SpringCloud · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-accordion/accordion.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-base16-ateliersulphurpool.light.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-theme-comscore/test.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="blog.html" />
    
    
    <link rel="prev" href="SpringBoot.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">CC++</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../CC++/C++.html">
            
                <a href="../../CC++/C++.html">
            
                    
                    C++
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" >
            
                <span>
            
                    
                    CSP
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../CC++/CSP/201703-1分蛋糕.html">
            
                <a href="../../CC++/CSP/201703-1分蛋糕.html">
            
                    
                    1分蛋糕
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../CC++/CSP/201709-2公共钥匙盒.html">
            
                <a href="../../CC++/CSP/201709-2公共钥匙盒.html">
            
                    
                    2公共钥匙盒
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../CC++/CSP/201812-1小明上学.html">
            
                <a href="../../CC++/CSP/201812-1小明上学.html">
            
                    
                    1小明上学
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../../CC++/CSP/201812-2小明放学.html">
            
                <a href="../../CC++/CSP/201812-2小明放学.html">
            
                    
                    2小明放学
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../../CC++/CSP/201903-1小中大.html">
            
                <a href="../../CC++/CSP/201903-1小中大.html">
            
                    
                    1小中大
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../../CC++/CSP/201903-2二十四点.html">
            
                <a href="../../CC++/CSP/201903-2二十四点.html">
            
                    
                    2二十四点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../../CC++/CSP/201909-1小明种苹果.html">
            
                <a href="../../CC++/CSP/201909-1小明种苹果.html">
            
                    
                    1小明种苹果
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../../CC++/CSP/201909-2小明种苹果（续）.html">
            
                <a href="../../CC++/CSP/201909-2小明种苹果（续）.html">
            
                    
                    2小明种苹果（续）
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../../CC++/CSP/201912-1报数.html">
            
                <a href="../../CC++/CSP/201912-1报数.html">
            
                    
                    1报数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="../../CC++/CSP/201912-2回收站选址.html">
            
                <a href="../../CC++/CSP/201912-2回收站选址.html">
            
                    
                    2回收站选址
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="../../CC++/CSP/202006-1线性分类器.html">
            
                <a href="../../CC++/CSP/202006-1线性分类器.html">
            
                    
                    1线性分类器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="../../CC++/CSP/202006-2稀疏向量.html">
            
                <a href="../../CC++/CSP/202006-2稀疏向量.html">
            
                    
                    2稀疏向量
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="../../CC++/CSP/202006-3Markdown渲染器.html">
            
                <a href="../../CC++/CSP/202006-3Markdown渲染器.html">
            
                    
                    3Markdown渲染器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="../../CC++/CSP/202006-41246.html">
            
                <a href="../../CC++/CSP/202006-41246.html">
            
                    
                    41246
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" >
            
                <span>
            
                    
                    HDU
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../../CC++/HDU/1013.Digital Roots .html">
            
                <a href="../../CC++/HDU/1013.Digital Roots .html">
            
                    
                    1013.Digital Roots 
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" >
            
                <span>
            
                    
                    HOJ
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../CC++/HOJ/1004.html">
            
                <a href="../../CC++/HOJ/1004.html">
            
                    
                    1004
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../../CC++/HOJ/1006.Weird Clock.html">
            
                <a href="../../CC++/HOJ/1006.Weird Clock.html">
            
                    
                    1006.Weird Clock
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../../CC++/HOJ/Array.html">
            
                <a href="../../CC++/HOJ/Array.html">
            
                    
                    Array
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../../CC++/HOJ/Untitled.html">
            
                <a href="../../CC++/HOJ/Untitled.html">
            
                    
                    Untitled
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Zoj
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../CC++/zoj/1020.Puzzle Out.html">
            
                <a href="../../CC++/zoj/1020.Puzzle Out.html">
            
                    
                    1020.Puzzle Out
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../../CC++/zoj/1037.Gridland.html">
            
                <a href="../../CC++/zoj/1037.Gridland.html">
            
                    
                    1037.Gridland
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../../CC++/zoj/Untitled.html">
            
                <a href="../../CC++/zoj/Untitled.html">
            
                    
                    Untitled
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" >
            
                <span>
            
                    
                    作业
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../CC++/作业/Untitled.html">
            
                <a href="../../CC++/作业/Untitled.html">
            
                    
                    Untitled
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" >
            
                <span>
            
                    
                    算法分析
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.2.1" data-path="../../CC++/作业/算法分析/实验一.html">
            
                <a href="../../CC++/作业/算法分析/实验一.html">
            
                    
                    实验一
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7.3" >
            
                <span>
            
                    
                    编译原理
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.3.1" data-path="../../CC++/作业/编译原理/实验一.html">
            
                <a href="../../CC++/作业/编译原理/实验一.html">
            
                    
                    实验一
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Common</li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <span>
            
                    
                    Leetcode
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../../Common/Leetcode/011.成最多水的容器.html">
            
                <a href="../../Common/Leetcode/011.成最多水的容器.html">
            
                    
                    011.成最多水的容器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../../Common/Leetcode/015. 三数之和.html">
            
                <a href="../../Common/Leetcode/015. 三数之和.html">
            
                    
                    015. 三数之和
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../../Common/Leetcode/025. K 个一组翻转链表.html">
            
                <a href="../../Common/Leetcode/025. K 个一组翻转链表.html">
            
                    
                    025. K 个一组翻转链表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../../Common/Leetcode/239.html">
            
                <a href="../../Common/Leetcode/239.html">
            
                    
                    239
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="../../Common/Leetcode/239.滑动窗口最大值.html">
            
                <a href="../../Common/Leetcode/239.滑动窗口最大值.html">
            
                    
                    239.滑动窗口最大值
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="../../Common/Leetcode/283移动零.html">
            
                <a href="../../Common/Leetcode/283移动零.html">
            
                    
                    283移动零
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.7" data-path="../../Common/Leetcode/84.柱状图中最大矩形.html">
            
                <a href="../../Common/Leetcode/84.柱状图中最大矩形.html">
            
                    
                    84.柱状图中最大矩形
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8" >
            
                <span>
            
                    
                    Array
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.8.1" data-path="../../Common/Leetcode/Array/11.盛最多水的容器.html">
            
                <a href="../../Common/Leetcode/Array/11.盛最多水的容器.html">
            
                    
                    11.盛最多水的容器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.2" data-path="../../Common/Leetcode/Array/121.买卖股票的最佳时机.html">
            
                <a href="../../Common/Leetcode/Array/121.买卖股票的最佳时机.html">
            
                    
                    121.买卖股票的最佳时机
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.3" data-path="../../Common/Leetcode/Array/122.买卖股票的最佳时机.html">
            
                <a href="../../Common/Leetcode/Array/122.买卖股票的最佳时机.html">
            
                    
                    122.买卖股票的最佳时机
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.4" data-path="../../Common/Leetcode/Array/123.买股票的最佳时机.html">
            
                <a href="../../Common/Leetcode/Array/123.买股票的最佳时机.html">
            
                    
                    123.买股票的最佳时机
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.5" data-path="../../Common/Leetcode/Array/128.最长连续排序.html">
            
                <a href="../../Common/Leetcode/Array/128.最长连续排序.html">
            
                    
                    128.最长连续排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.6" data-path="../../Common/Leetcode/Array/134.加油站.html">
            
                <a href="../../Common/Leetcode/Array/134.加油站.html">
            
                    
                    134.加油站
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.7" data-path="../../Common/Leetcode/Array/164.最大间距.html">
            
                <a href="../../Common/Leetcode/Array/164.最大间距.html">
            
                    
                    164.最大间距
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.8" data-path="../../Common/Leetcode/Array/189旋转数组.html">
            
                <a href="../../Common/Leetcode/Array/189旋转数组.html">
            
                    
                    189旋转数组
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.9" data-path="../../Common/Leetcode/Array/217.存在重复元素.html">
            
                <a href="../../Common/Leetcode/Array/217.存在重复元素.html">
            
                    
                    217.存在重复元素
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.10" data-path="../../Common/Leetcode/Array/26.删除排序数组中的重复项.html">
            
                <a href="../../Common/Leetcode/Array/26.删除排序数组中的重复项.html">
            
                    
                    26.删除排序数组中的重复项
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.11" data-path="../../Common/Leetcode/Array/27.移除元素.html">
            
                <a href="../../Common/Leetcode/Array/27.移除元素.html">
            
                    
                    27.移除元素
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.12" data-path="../../Common/Leetcode/Array/274.H指数.html">
            
                <a href="../../Common/Leetcode/Array/274.H指数.html">
            
                    
                    274.H指数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.13" data-path="../../Common/Leetcode/Array/287.寻找重复数.html">
            
                <a href="../../Common/Leetcode/Array/287.寻找重复数.html">
            
                    
                    287.寻找重复数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.14" data-path="../../Common/Leetcode/Array/299.猜数字游戏.html">
            
                <a href="../../Common/Leetcode/Array/299.猜数字游戏.html">
            
                    
                    299.猜数字游戏
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.15" data-path="../../Common/Leetcode/Array/327.区间的个数.html">
            
                <a href="../../Common/Leetcode/Array/327.区间的个数.html">
            
                    
                    327.区间的个数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.16" data-path="../../Common/Leetcode/Array/334.递增的三元序列.html">
            
                <a href="../../Common/Leetcode/Array/334.递增的三元序列.html">
            
                    
                    334.递增的三元序列
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.17" data-path="../../Common/Leetcode/Array/41.缺失的第一个正数.html">
            
                <a href="../../Common/Leetcode/Array/41.缺失的第一个正数.html">
            
                    
                    41.缺失的第一个正数
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.18" data-path="../../Common/Leetcode/Array/42.接雨水.html">
            
                <a href="../../Common/Leetcode/Array/42.接雨水.html">
            
                    
                    42.接雨水
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.19" data-path="../../Common/Leetcode/Array/45.跳跃游戏.html">
            
                <a href="../../Common/Leetcode/Array/45.跳跃游戏.html">
            
                    
                    45.跳跃游戏
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.20" data-path="../../Common/Leetcode/Array/55.跳跃游戏.html">
            
                <a href="../../Common/Leetcode/Array/55.跳跃游戏.html">
            
                    
                    55.跳跃游戏
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.21" data-path="../../Common/Leetcode/Array/80.删除排序数组中的重复项.html">
            
                <a href="../../Common/Leetcode/Array/80.删除排序数组中的重复项.html">
            
                    
                    80.删除排序数组中的重复项
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8.22" data-path="../../Common/Leetcode/Array/付费.html">
            
                <a href="../../Common/Leetcode/Array/付费.html">
            
                    
                    付费
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.1.9" >
            
                <span>
            
                    
                    Tree
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.9.1" data-path="../../Common/Leetcode/Tree/102.二叉树的层级遍历.html">
            
                <a href="../../Common/Leetcode/Tree/102.二叉树的层级遍历.html">
            
                    
                    102.二叉树的层级遍历
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9.2" data-path="../../Common/Leetcode/Tree/144.二叉树的前序遍历.html">
            
                <a href="../../Common/Leetcode/Tree/144.二叉树的前序遍历.html">
            
                    
                    144.二叉树的前序遍历
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9.3" data-path="../../Common/Leetcode/Tree/145.二叉树的后序遍历.html">
            
                <a href="../../Common/Leetcode/Tree/145.二叉树的后序遍历.html">
            
                    
                    145.二叉树的后序遍历
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.9.4" data-path="../../Common/Leetcode/Tree/94,二叉树的中序遍历.html">
            
                <a href="../../Common/Leetcode/Tree/94,二叉树的中序遍历.html">
            
                    
                    94,二叉树的中序遍历
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../Common/Linux.html">
            
                <a href="../../Common/Linux.html">
            
                    
                    Linux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../Common/git.html">
            
                <a href="../../Common/git.html">
            
                    
                    Git
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../Common/技巧.html">
            
                <a href="../../Common/技巧.html">
            
                    
                    技巧
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../Common/算法.html">
            
                <a href="../../Common/算法.html">
            
                    
                    算法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../../Common/视频.html">
            
                <a href="../../Common/视频.html">
            
                    
                    视频
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Front</li>
        
        
    
        <li class="chapter " data-level="3.1" >
            
                <span>
            
                    
                    CSS
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../../Front/CSS/CSS3.html">
            
                <a href="../../Front/CSS/CSS3.html">
            
                    
                    CSS3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" >
            
                <span>
            
                    
                    HTML
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../../Front/HTML/html.html">
            
                <a href="../../Front/HTML/html.html">
            
                    
                    Html
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../../Front/HTML/html5.html">
            
                <a href="../../Front/HTML/html5.html">
            
                    
                    Html5
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" >
            
                <span>
            
                    
                    JavaScript
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../../Front/JavaScript/Data Structures and Algorithms.html">
            
                <a href="../../Front/JavaScript/Data Structures and Algorithms.html">
            
                    
                    Data Structures And Algorithms
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" >
            
                <span>
            
                    
                    ES6
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.2.1" data-path="../../Front/JavaScript/ES6/ES6 Proxies in practice.html">
            
                <a href="../../Front/JavaScript/ES6/ES6 Proxies in practice.html">
            
                    
                    ES6 Proxies In Practice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2.2" data-path="../../Front/JavaScript/ES6/ES6语法.html">
            
                <a href="../../Front/JavaScript/ES6/ES6语法.html">
            
                    
                    ES6语法
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2.3" data-path="../../Front/JavaScript/ES6/语法.html">
            
                <a href="../../Front/JavaScript/ES6/语法.html">
            
                    
                    语法
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="../../Front/JavaScript/JavaScipt.html">
            
                <a href="../../Front/JavaScript/JavaScipt.html">
            
                    
                    JavaScipt
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.4" data-path="../../Front/JavaScript/Jquery.html">
            
                <a href="../../Front/JavaScript/Jquery.html">
            
                    
                    Jquery
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.5" data-path="../../Front/JavaScript/typescript.html">
            
                <a href="../../Front/JavaScript/typescript.html">
            
                    
                    Typescript
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" >
            
                <span>
            
                    
                    React.Js
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.1" data-path="../../Front/React.js/redux.html">
            
                <a href="../../Front/React.js/redux.html">
            
                    
                    Redux
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.2" data-path="../../Front/React.js/起步.html">
            
                <a href="../../Front/React.js/起步.html">
            
                    
                    起步
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.5" >
            
                <span>
            
                    
                    Vue
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.5.1" data-path="../../Front/Vue/Untitled.html">
            
                <a href="../../Front/Vue/Untitled.html">
            
                    
                    Untitled
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.2" >
            
                <span>
            
                    
                    Vue3
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.5.2.1" data-path="../../Front/Vue/vue3/vue3.html">
            
                <a href="../../Front/Vue/vue3/vue3.html">
            
                    
                    Vue3
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.5.3" data-path="../../Front/Vue/vuex.html">
            
                <a href="../../Front/Vue/vuex.html">
            
                    
                    Vuex
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.4" >
            
                <span>
            
                    
                    Wbs的Vue
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.5.4.1" data-path="../../Front/Vue/wbs的vue/Vue模块篇.html">
            
                <a href="../../Front/Vue/wbs的vue/Vue模块篇.html">
            
                    
                    Vue模块篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.4.2" >
            
                <span>
            
                    
                    Assest
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.4.3" >
            
                <span>
            
                    
                    Assets
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.4.4" data-path="../../Front/Vue/wbs的vue/vue基础篇.html">
            
                <a href="../../Front/Vue/wbs的vue/vue基础篇.html">
            
                    
                    Vue基础篇
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.4.5" data-path="../../Front/Vue/wbs的vue/vue进阶篇.html">
            
                <a href="../../Front/Vue/wbs的vue/vue进阶篇.html">
            
                    
                    Vue进阶篇
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.5.5" data-path="../../Front/Vue/基础.html">
            
                <a href="../../Front/Vue/基础.html">
            
                    
                    基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.6" data-path="../../Front/Vue/技巧.html">
            
                <a href="../../Front/Vue/技巧.html">
            
                    
                    技巧
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.7" data-path="../../Front/Vue/模板.html">
            
                <a href="../../Front/Vue/模板.html">
            
                    
                    模板
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.8" data-path="../../Front/Vue/进阶.html">
            
                <a href="../../Front/Vue/进阶.html">
            
                    
                    进阶
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.6" >
            
                <span>
            
                    
                    Image
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="3.7" >
            
                <span>
            
                    
                    拓展
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.7.1" data-path="../../Front/拓展/webpack.html">
            
                <a href="../../Front/拓展/webpack.html">
            
                    
                    Webpack
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.8" >
            
                <span>
            
                    
                    未完成
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.8.1" >
            
                <span>
            
                    
                    AJAX
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.8.1.1" data-path="../../Front/未完成/AJAX/PHP.html">
            
                <a href="../../Front/未完成/AJAX/PHP.html">
            
                    
                    PHP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.1.2" data-path="../../Front/未完成/AJAX/配置.html">
            
                <a href="../../Front/未完成/AJAX/配置.html">
            
                    
                    配置
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.8.2" >
            
                <span>
            
                    
                    MongoDB
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.8.2.1" data-path="../../Front/未完成/MongoDB/入门.html">
            
                <a href="../../Front/未完成/MongoDB/入门.html">
            
                    
                    入门
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.8.3" >
            
                <span>
            
                    
                    微信小程序
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.8.3.1" data-path="../../Front/未完成/微信小程序/全局信息.html">
            
                <a href="../../Front/未完成/微信小程序/全局信息.html">
            
                    
                    全局信息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.3.2" data-path="../../Front/未完成/微信小程序/喵喵开发.html">
            
                <a href="../../Front/未完成/微信小程序/喵喵开发.html">
            
                    
                    喵喵开发
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.3.3" data-path="../../Front/未完成/微信小程序/学习.html">
            
                <a href="../../Front/未完成/微信小程序/学习.html">
            
                    
                    学习
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.8.3.4" data-path="../../Front/未完成/微信小程序/设计.html">
            
                <a href="../../Front/未完成/微信小程序/设计.html">
            
                    
                    设计
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">GO</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../../GO/起步.html">
            
                <a href="../../GO/起步.html">
            
                    
                    起步
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Java</li>
        
        
    
        <li class="chapter " data-level="5.1" >
            
                <span>
            
                    
                    Android
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="../Android/AndroidStudy.html">
            
                <a href="../Android/AndroidStudy.html">
            
                    
                    AndroidStudy
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.2" >
            
                <span>
            
                    
                    Project
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.1" data-path="../Project/Health.html">
            
                <a href="../Project/Health.html">
            
                    
                    Health
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.2" data-path="../Project/expertion.html">
            
                <a href="../Project/expertion.html">
            
                    
                    Expertion
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3" >
            
                <span>
            
                    
                    SQL
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.3.1" >
            
                <span>
            
                    
                    MySQL
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.3.1.1" data-path="../SQL/MySQL/Mysql基本语句.html">
            
                <a href="../SQL/MySQL/Mysql基本语句.html">
            
                    
                    Mysql基本语句
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.1.2" >
            
                <span>
            
                    
                    Images
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.1.3" data-path="../SQL/MySQL/mysql的存储和触发器.html">
            
                <a href="../SQL/MySQL/mysql的存储和触发器.html">
            
                    
                    Mysql的存储和触发器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.1.4" data-path="../SQL/MySQL/mysql练习2020.01.html">
            
                <a href="../SQL/MySQL/mysql练习2020.01.html">
            
                    
                    Mysql练习2020.01
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.1.5" data-path="../SQL/MySQL/mysql高级.html">
            
                <a href="../SQL/MySQL/mysql高级.html">
            
                    
                    Mysql高级
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.1.6" data-path="../SQL/MySQL/关于my文件的优化.html">
            
                <a href="../SQL/MySQL/关于my文件的优化.html">
            
                    
                    关于My文件的优化
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.1.7" data-path="../SQL/MySQL/视图.html">
            
                <a href="../SQL/MySQL/视图.html">
            
                    
                    视图
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3.2" data-path="../SQL/ORACLE.html">
            
                <a href="../SQL/ORACLE.html">
            
                    
                    ORACLE
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.3" >
            
                <span>
            
                    
                    NoSQL
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.3.3.1" data-path="../SQL/noSQL/redis.html">
            
                <a href="../SQL/noSQL/redis.html">
            
                    
                    Redis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3.4" >
            
                <span>
            
                    
                    连接池
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.3.4.1" data-path="../SQL/连接池/C3P0.html">
            
                <a href="../SQL/连接池/C3P0.html">
            
                    
                    C3P0
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.3.4.2" data-path="../SQL/连接池/JDBC.html">
            
                <a href="../SQL/连接池/JDBC.html">
            
                    
                    JDBC
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.4" >
            
                <span>
            
                    
                    SSM
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.4.1" data-path="../SSM/Docker.html">
            
                <a href="../SSM/Docker.html">
            
                    
                    Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.2" data-path="../SSM/DockereMaven.html">
            
                <a href="../SSM/DockereMaven.html">
            
                    
                    DockereMaven
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.3" data-path="../SSM/MyBatis.html">
            
                <a href="../SSM/MyBatis.html">
            
                    
                    MyBatis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.4" data-path="../SSM/MyBatis3.html">
            
                <a href="../SSM/MyBatis3.html">
            
                    
                    MyBatis3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.5" data-path="../SSM/Spring.html">
            
                <a href="../SSM/Spring.html">
            
                    
                    Spring
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.6" data-path="../SSM/Spring3.html">
            
                <a href="../SSM/Spring3.html">
            
                    
                    Spring3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.7" data-path="../SSM/SpringMVC.html">
            
                <a href="../SSM/SpringMVC.html">
            
                    
                    SpringMVC
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.8" data-path="../SSM/SpringMVC3.html">
            
                <a href="../SSM/SpringMVC3.html">
            
                    
                    SpringMVC3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.9" data-path="../SSM/XML.html">
            
                <a href="../SSM/XML.html">
            
                    
                    XML
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.10" >
            
                <span>
            
                    
                    Image
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.4.10.1" >
            
                <span>
            
                    
                    Docker
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.10.2" >
            
                <span>
            
                    
                    DockerMaven
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.10.3" >
            
                <span>
            
                    
                    SSM
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.10.4" >
            
                <span>
            
                    
                    Lucene
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.4.11" data-path="../SSM/lucene.html">
            
                <a href="../SSM/lucene.html">
            
                    
                    Lucene
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.12" data-path="../SSM/maven.html">
            
                <a href="../SSM/maven.html">
            
                    
                    Maven
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.13" data-path="../SSM/mybatis-plus.html">
            
                <a href="../SSM/mybatis-plus.html">
            
                    
                    Mybatis Plus
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.14" data-path="../SSM/test(cach">
            
                <span>
            
                    
                    Test(Cach)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4.15" data-path="../SSM/论mvc.html">
            
                <a href="../SSM/论mvc.html">
            
                    
                    论Mvc
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.5" >
            
                <span>
            
                    
                    Spring
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.5.1" data-path="Atguigu SpringBoot.html">
            
                <a href="Atguigu SpringBoot.html">
            
                    
                    Atguigu SpringBoot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.2" data-path="Dubbo.html">
            
                <a href="Dubbo.html">
            
                    
                    Dubbo
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.3" data-path="JPA.html">
            
                <a href="JPA.html">
            
                    
                    JPA
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.4" data-path="SpringBoot.html">
            
                <a href="SpringBoot.html">
            
                    
                    SpringBoot
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="5.5.5" data-path="SpringCloud.html">
            
                <a href="SpringCloud.html">
            
                    
                    SpringCloud
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.6" data-path="blog.html">
            
                <a href="blog.html">
            
                    
                    Blog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.7" >
            
                <span>
            
                    
                    Image
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.5.7.1" >
            
                <span>
            
                    
                    SpringBoot
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.5.7.2" >
            
                <span>
            
                    
                    Springcloud
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.5.8" data-path="临时文件.html">
            
                <a href="临时文件.html">
            
                    
                    临时文件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.6" >
            
                <span>
            
                    
                    Web
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.6.1" data-path="../Web/Http协议.html">
            
                <a href="../Web/Http协议.html">
            
                    
                    Http协议
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6.2" data-path="../Web/JSP.html">
            
                <a href="../Web/JSP.html">
            
                    
                    JSP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6.3" data-path="../Web/Servlet.html">
            
                <a href="../Web/Servlet.html">
            
                    
                    Servlet
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6.4" data-path="../Web/Web.html">
            
                <a href="../Web/Web.html">
            
                    
                    Web
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6.5" data-path="../Web/xml笔记.html">
            
                <a href="../Web/xml笔记.html">
            
                    
                    Xml笔记
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.6.6" data-path="../Web/复习文件.html">
            
                <a href="../Web/复习文件.html">
            
                    
                    复习文件
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.7" >
            
                <span>
            
                    
                    Image
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.7.1" >
            
                <span>
            
                    
                    Spring
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.7.2" >
            
                <span>
            
                    
                    Ssm
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.8" data-path="../杂学.html">
            
                <a href="../杂学.html">
            
                    
                    杂学
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9" >
            
                <span>
            
                    
                    结构
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.9.1" >
            
                <span>
            
                    
                    JVM
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.9.1.1" data-path="../结构/JVM/JVM_01 简介.html">
            
                <a href="../结构/JVM/JVM_01 简介.html">
            
                    
                    JVM 01 简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.1.2" data-path="../结构/JVM/JVM_02 类加载子系统.html">
            
                <a href="../结构/JVM/JVM_02 类加载子系统.html">
            
                    
                    JVM 02 类加载子系统
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.1.3" >
            
                <span>
            
                    
                    Images
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.1.4" data-path="../结构/JVM/">
            
                <a href="../结构/JVM/">
            
                    
                    Index
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.9.2" data-path="../结构/Java Advance.html">
            
                <a href="../结构/Java Advance.html">
            
                    
                    Java Advance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.3" >
            
                <span>
            
                    
                    Image
            
                </span>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4" >
            
                <span>
            
                    
                    算法
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.9.4.1" data-path="../结构/算法/01链表.html">
            
                <a href="../结构/算法/01链表.html">
            
                    
                    01链表
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.2" data-path="../结构/算法/06树.html">
            
                <a href="../结构/算法/06树.html">
            
                    
                    06树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.3" data-path="../结构/算法/07平衡二叉树.html">
            
                <a href="../结构/算法/07平衡二叉树.html">
            
                    
                    07平衡二叉树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.4" data-path="../结构/算法/08B树.html">
            
                <a href="../结构/算法/08B树.html">
            
                    
                    08B树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.5" data-path="../结构/算法/08红黑树.html">
            
                <a href="../结构/算法/08红黑树.html">
            
                    
                    08红黑树
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.6" data-path="../结构/算法/14 排序.html">
            
                <a href="../结构/算法/14 排序.html">
            
                    
                    14 排序
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.7" data-path="../结构/算法/15并查集.html">
            
                <a href="../结构/算法/15并查集.html">
            
                    
                    15并查集
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.8" data-path="../结构/算法/16 图.html">
            
                <a href="../结构/算法/16 图.html">
            
                    
                    16 图
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.9" data-path="../结构/算法/17 策略.html">
            
                <a href="../结构/算法/17 策略.html">
            
                    
                    17 策略
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.10" data-path="../结构/算法/mothed.html">
            
                <a href="../结构/算法/mothed.html">
            
                    
                    Mothed
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.11" data-path="../结构/算法/哈希值.html">
            
                <a href="../结构/算法/哈希值.html">
            
                    
                    哈希值
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.12" data-path="../结构/算法/堆.html">
            
                <a href="../结构/算法/堆.html">
            
                    
                    堆
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.4.13" data-path="../结构/算法/总结构.html">
            
                <a href="../结构/算法/总结构.html">
            
                    
                    总结构
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.9.5" >
            
                <span>
            
                    
                    设计模式
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.9.5.1" data-path="../结构/设计模式/03创建型模式.html">
            
                <a href="../结构/设计模式/03创建型模式.html">
            
                    
                    03创建型模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.5.2" data-path="../结构/设计模式/04结构型模式.html">
            
                <a href="../结构/设计模式/04结构型模式.html">
            
                    
                    04结构型模式
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.5.3" data-path="../结构/设计模式/设计原则.html">
            
                <a href="../结构/设计模式/设计原则.html">
            
                    
                    设计原则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.9.5.4" data-path="../结构/设计模式/设计模式.html">
            
                <a href="../结构/设计模式/设计模式.html">
            
                    
                    设计模式
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Python</li>
        
        
    
        <li class="chapter " data-level="6.1" data-path="../../Python/基础.html">
            
                <a href="../../Python/基础.html">
            
                    
                    基础
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >SpringCloud</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <p>&#x4E2D;&#x6587;&#x6587;&#x6863;</p>
<p><a href="https://www.springcloud.cc/" target="_blank">https://www.springcloud.cc/</a></p>
<p><a href="https://blog.csdn.net/woo_home/category_9841636.html" target="_blank">&#x539F;&#x6587;</a></p>
<h1 id="&#x521B;&#x5EFA;">&#x521B;&#x5EFA;</h1>
<p><a href="https://github.com/Chuyongwei/Java-Spring/tree/SpringCloud" target="_blank">github doc</a></p>
<ol>
<li>&#x5EFA;module</li>
<li>&#x6539;pom</li>
<li>&#x5199;yml</li>
<li>&#x4E3B;&#x542F;&#x52A8;</li>
<li>&#x4E1A;&#x52A1;&#x7C7B;</li>
</ol>
<h1 id="&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;">&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;</h1>
<h2 id="&#x6837;&#x4F8B;">&#x6837;&#x4F8B;</h2>
<h3 id="eureka">Eureka</h3>
<h4 id="&#x521B;&#x5EFA;&#xFF08;&#x5305;&#x62EC;&#x591A;&#x673A;&#xFF09;">&#x521B;&#x5EFA;&#xFF08;&#x5305;&#x62EC;&#x591A;&#x673A;&#xFF09;</h4>
<p>pom</p>
<pre class="language-"><code class="lang-xml"><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud2020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.atguigu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-eureka-server7001<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--eureka-server--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- &#x5F15;&#x5165;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;api&#x901A;&#x7528;&#x5305;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Payment&#x652F;&#x4ED8;Entity --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.atguigu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--boot web actuator--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--&#x4E00;&#x822C;&#x901A;&#x7528;&#x914D;&#x7F6E;--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>yml</p>
<pre class="language-"><code class="lang-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7001</span>


<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> localhost <span class="token comment">#eureka7001  #eureka&#x670D;&#x52A1;&#x7AEF;&#x7684;&#x5B9E;&#x4F8B;&#x540D;&#x79F0; </span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment">#false&#x8868;&#x793A;&#x4E0D;&#x5411;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x6CE8;&#x518C;&#x81EA;&#x5DF1;&#x3002;</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment">#false&#x8868;&#x793A;&#x81EA;&#x5DF1;&#x7AEF;&#x5C31;&#x662F;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#xFF0C;&#x6211;&#x7684;&#x804C;&#x8D23;&#x5C31;&#x662F;&#x7EF4;&#x62A4;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;&#xFF0C;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x53BB;&#x68C0;&#x7D22;&#x670D;&#x52A1;</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment">#&#x96C6;&#x7FA4;&#x6307;&#x5411;&#x5176;&#x5B83;eureka</span>
      <span class="token comment">#defaultZone: http://eureka7002.com:7002/eureka/</span>
      <span class="token comment">#&#x5355;&#x673A;&#x5C31;&#x662F;7001&#x81EA;&#x5DF1;</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/
    <span class="token comment">#server:</span>
    <span class="token comment">#&#x5173;&#x95ED;&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x673A;&#x5236;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E0D;&#x53EF;&#x7528;&#x670D;&#x52A1;&#x88AB;&#x53CA;&#x65F6;&#x8E22;&#x9664;</span>
    <span class="token comment">#enable-self-preservation: false</span>
    <span class="token comment">#eviction-interval-timer-in-ms: 2000</span>
</code></pre>
<p>&#x542F;&#x52A8;&#x7C7B;</p>
<pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaServer</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EurekaMain7001</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">EurekaMain7001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="&#x5C06;&#x6D88;&#x8D39;&#x8005;&#x548C;&#x751F;&#x4EA7;&#x8005;&#x52A0;&#x5165;eureka">&#x5C06;&#x6D88;&#x8D39;&#x8005;&#x548C;&#x751F;&#x4EA7;&#x8005;&#x52A0;&#x5165;eureka</h4>
<p>pom</p>
<pre class="language-"><code class="lang-xml">        <span class="token comment">&lt;!--eureka-client--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>yaml</p>
<pre class="language-"><code class="lang-yaml"><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token comment">#&#x8868;&#x793A;&#x662F;&#x5426;&#x5C06;&#x81EA;&#x5DF1;&#x6CE8;&#x518C;&#x8FDB;EurekaServer&#x9ED8;&#x8BA4;&#x4E3A;true&#x3002;</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment">#&#x662F;&#x5426;&#x4ECE;EurekaServer&#x6293;&#x53D6;&#x5DF2;&#x6709;&#x7684;&#x6CE8;&#x518C;&#x4FE1;&#x606F;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;true&#x3002;&#x5355;&#x8282;&#x70B9;&#x65E0;&#x6240;&#x8C13;&#xFF0C;&#x96C6;&#x7FA4;&#x5FC5;&#x987B;&#x8BBE;&#x7F6E;&#x4E3A;true&#x624D;&#x80FD;&#x914D;&#x5408;ribbon&#x4F7F;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</span>
    <span class="token key atrule">fetchRegistry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token comment">#&#x5355;&#x673A;&#x7248;</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>7001/eureka
      <span class="token comment"># &#x96C6;&#x7FA4;&#x7248;</span>
      <span class="token comment">#defaultZone: http://eureka7001.com:7001/eureka,http://eureka7002.com:7002/eureka</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">instance-id</span><span class="token punctuation">:</span> payment8001
    <span class="token comment">#&#x8BBF;&#x95EE;&#x8DEF;&#x5F84;&#x53EF;&#x4EE5;&#x663E;&#x793A;IP&#x5730;&#x5740;</span>
    <span class="token key atrule">prefer-ip-address</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token comment">#Eureka&#x5BA2;&#x6237;&#x7AEF;&#x5411;&#x670D;&#x52A1;&#x7AEF;&#x53D1;&#x9001;&#x5FC3;&#x8DF3;&#x7684;&#x65F6;&#x95F4;&#x95F4;&#x9694;&#xFF0C;&#x5355;&#x4F4D;&#x4E3A;&#x79D2;(&#x9ED8;&#x8BA4;&#x662F;30&#x79D2;)</span>
    <span class="token comment">#lease-renewal-interval-in-seconds: 1</span>
    <span class="token comment">#Eureka&#x670D;&#x52A1;&#x7AEF;&#x5728;&#x6536;&#x5230;&#x6700;&#x540E;&#x4E00;&#x6B21;&#x5FC3;&#x8DF3;&#x540E;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x4E0A;&#x9650;&#xFF0C;&#x5355;&#x4F4D;&#x4E3A;&#x79D2;(&#x9ED8;&#x8BA4;&#x662F;90&#x79D2;)&#xFF0C;&#x8D85;&#x65F6;&#x5C06;&#x5254;&#x9664;&#x670D;&#x52A1;</span>
    <span class="token comment">#lease-expiration-duration-in-seconds: 2</span>
</code></pre>
<p>java&#x542F;&#x52A8;</p>
<pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain8001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain8001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="&#x591A;&#x751F;&#x4EA7;&#x8005;&#x8FD0;&#x884C;">&#x591A;&#x751F;&#x4EA7;&#x8005;&#x8FD0;&#x884C;</h4>
<ol>
<li><p>&#x6D88;&#x8D39;&#x8005;&#x8BBF;&#x95EE;&#x63A5;&#x53E3;</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> PAYMENT_URL<span class="token operator">=</span><span class="token string">&quot;http://CLOUD-PAYMENT-SERVICE&quot;</span><span class="token punctuation">;</span><span class="token comment">//eureka&#x7684;&#x751F;&#x4EA7;&#x8005;&#x540D;&#x5B57;</span>
</code></pre>
</li>
<li><p>&#x6D88;&#x8D39;&#x8005;&#x914D;&#x7F6E;&#x7C7B;&#x52A0;&#x4E0A;<code>LoadBalanced</code>&#x8BBF;&#x95EE;eureka&#x63A5;&#x53E3;</p>
<pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@LoadBalanced</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getRestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</li>
</ol>
<p>&#x8BBF;&#x95EE;&#x5730;&#x5740;</p>
<pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/discovery&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span>  <span class="token function">discovery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> services <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> element<span class="token operator">:</span>services<span class="token punctuation">)</span><span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;*****element:&quot;</span><span class="token operator">+</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> instances <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token string">&quot;CLOUD-PAYMENT-SERVICE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">ServiceInstance</span> instance<span class="token operator">:</span>instances<span class="token punctuation">)</span><span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span><span class="token function">getServiceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;\t&quot;</span><span class="token operator">+</span>instance<span class="token punctuation">.</span><span class="token function">getPort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;\t&quot;</span><span class="token operator">+</span>instance<span class="token punctuation">.</span><span class="token function">getUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>discoveryClient<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>&#x542F;&#x52A8;&#x7C7B;&#x52A0;&#x5165;<code>EnableDiscoveryClient</code></p>
<pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentMain8002</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">PaymentMain8002</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x673A;&#x5236;">&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x673A;&#x5236;</h4>
<blockquote>
<p>&#x5F53;&#x7AEF;&#x53E3;&#x4E0D;&#x89C1;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4E0D;&#x4F1A;&#x4E86;&#x7ACB;&#x523B;&#x5220;&#x9664;</p>
</blockquote>
<p>&#x5173;&#x95ED;&#x81EA;&#x6211;&#x4FDD;&#x62A4;</p>
<p>eureka.yaml</p>
<pre class="language-"><code class="lang-yaml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">7002</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">instance</span><span class="token punctuation">:</span>
    <span class="token key atrule">hostname</span><span class="token punctuation">:</span> eureka7002.com
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment">#false&#x8868;&#x793A;&#x4E0D;&#x5411;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x6CE8;&#x518C;&#x81EA;&#x5DF1;&#x3002;</span>
  <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>     <span class="token comment">#false&#x8868;&#x793A;&#x81EA;&#x5DF1;&#x7AEF;&#x5C31;&#x662F;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#xFF0C;&#x6211;&#x7684;&#x804C;&#x8D23;&#x5C31;&#x662F;&#x7EF4;&#x62A4;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;&#xFF0C;&#x5E76;&#x4E0D;&#x9700;&#x8981;&#x53BB;&#x68C0;&#x7D22;&#x670D;&#x52A1;</span>
  <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/
    <span class="token key atrule">server</span><span class="token punctuation">:</span>
      <span class="token comment">#&#x5173;&#x95ED;&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x673A;&#x5236;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E0D;&#x53EF;&#x7528;&#x670D;&#x52A1;&#x88AB;&#x53CA;&#x65F6;&#x8E22;&#x9664;</span>
      <span class="token key atrule">enable-self-preservation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
      <span class="token key atrule">eviction-interval-timer-in-ms</span><span class="token punctuation">:</span> <span class="token number">2000</span>
</code></pre>
<h3 id="zookeeper">zookeeper</h3>
<h2 id="consul">consul</h2>
<p><a href="https://www.consul.io/" target="_blank">consul</a></p>
<h3 id="consul-&#x662F;&#x4EC0;&#x4E48;&#xFF1F;">Consul &#x662F;&#x4EC0;&#x4E48;&#xFF1F;</h3>
<p>Consul &#x662F;&#x4E00;&#x5957;&#x5F00;&#x6E90;&#x7684;&#x5206;&#x5E03;&#x5F0F;&#x670D;&#x52A1;&#x53D1;&#x73B0;&#x548C;&#x914D;&#x7F6E;&#x7BA1;&#x7406;&#x7CFB;&#x7EDF;&#xFF0C;&#x7531; HashiCorp &#x516C;&#x53F8; &#x7528; Go &#x8BED;&#x8A00;&#x5F00;&#x53D1;</p>
<p>Consul &#x63D0;&#x4F9B;&#x4E86;&#x5FAE;&#x670D;&#x52A1;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x670D;&#x52A1;&#x6CBB;&#x7406;&#x3001;&#x914D;&#x7F6E;&#x4E2D;&#x5FC3;&#x3001;&#x63A7;&#x5236;&#x603B;&#x7EBF;&#x7B49;&#x529F;&#x80FD;&#x3002;&#x8FD9;&#x4E9B;&#x529F;&#x80FD;&#x4E2D;&#x7684;&#x6BCF;&#x4E00;&#x4E2A;&#x90FD;&#x53EF;&#x4EE5;&#x6839;&#x636E;&#x9700;&#x8981;&#x5355;&#x72EC;&#x4F7F;&#x7528;&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x4E00;&#x8D77;&#x4F7F;&#x7528;&#x4EE5;&#x6784;&#x5EFA;&#x5168;&#x65B9;&#x4F4D;&#x7684;&#x670D;&#x52A1;&#x7F51;&#x683C;&#xFF0C;&#x603B;&#x4E4B; Consul &#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x79CD;&#x5B8C;&#x6574;&#x7684;&#x670D;&#x52A1;&#x7F51;&#x683C;&#x89E3;&#x51B3;&#x65B9;&#x6848;</p>
<p>&#x5B83;&#x5177;&#x6709;&#x5F88;&#x591A;&#x4F18;&#x70B9;&#x3002;&#x5305;&#x62EC;&#xFF1A;&#x57FA;&#x4E8E; raft &#x534F;&#x8BAE;&#xFF0C;&#x6BD4;&#x8F83;&#x7B80;&#x6D01;&#xFF1B;&#x652F;&#x6301;&#x5065;&#x5EB7;&#x68C0;&#x67E5;&#xFF0C;&#x540C;&#x65F6;&#x652F;&#x6301; HTTP &#x548C; DNS &#x534F;&#x8BAE;&#x652F;&#x6301;&#x8DE8;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#x7684; WAN &#x96C6;&#x7FA4;&#x63D0;&#x4F9B;&#x56FE;&#x5F62;&#x754C;&#x9762;&#x8DE8;&#x5E73;&#x53F0;&#xFF0C;&#x652F;&#x6301; Linux&#x3001;Mac&#x3001;Windows</p>
<h3 id="springcloud-consul-&#x5177;&#x6709;&#x5982;&#x4E0B;&#x7279;&#x6027;">SpringCloud Consul &#x5177;&#x6709;&#x5982;&#x4E0B;&#x7279;&#x6027;</h3>
<ul>
<li>&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x4E0E;&#x53D1;&#x73B0;&#xFF08;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#xFF0C;&#x63D0;&#x4F9B; HTTP &#x548C; DNS &#x4E24;&#x79CD;&#x53D1;&#x73B0;&#x65B9;&#x5F0F;&#xFF09;</li>
<li>&#x5065;&#x5EB7;&#x68C0;&#x67E5;&#xFF08;&#x652F;&#x6301;&#x591A;&#x79CD;&#x65B9;&#x5F0F;&#xFF0C;HTTP&#x3001;TCP&#x3001;Docker&#x3001;Shell &#x811A;&#x672C;&#x5B9A;&#x5236;&#x5316;&#xFF09;</li>
<li>&#x952E;&#x503C;&#x5BF9;&#x7684;&#x5B58;&#x50A8;&#xFF08;Key&#x3001;Value &#x7684;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#xFF09;</li>
<li>&#x5B89;&#x5168;&#x52A0;&#x56FA;</li>
<li>&#x591A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF08;Consul &#x652F;&#x6301;&#x591A;&#x6570;&#x636E;&#x4E2D;&#x5FC3;&#xFF09;</li>
<li>&#x53EF;&#x89C6;&#x5316; Web &#x754C;&#x9762;</li>
</ul>
<h3 id="consul-&#x7684;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;">Consul &#x7684;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;</h3>
<p><a href="https://www.consul.io/downloads.html" target="_blank">Consul &#x7684;&#x4E0B;&#x8F7D;&#x5730;&#x5740; https://www.consul.io/downloads.html</a> &#xFF0C;&#x6839;&#x636E;&#x7248;&#x672C;&#x4E0B;&#x8F7D;&#x5373;&#x53EF;&#xFF0C;&#x8FD9;&#x91CC;&#x4E0B;&#x8F7D;&#x7684;&#x662F; Windows &#x7248;&#x672C;&#x7684;
<img src="image/springcloud/001.png" alt="Consul &#x7684;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;">
&#x4E0B;&#x8F7D;&#x4E4B;&#x540E;&#x89E3;&#x538B;&#x5C31;&#x4E00;&#x4E2A; exe &#x53EF;&#x6267;&#x884C;&#x6587;&#x4EF6;
<img src="https://img-blog.csdnimg.cn/20200326154019969.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x67E5;&#x770B;&#x7248;&#x672C;&#xFF0C;&#x7528; cmd &#x6253;&#x5F00;&#xFF0C;&#x8F93;&#x5165; <strong>consul --version</strong> &#x5373;&#x53EF;:
<img src="image/springcloud/consulVersion.png" alt="consul-version">
&#x8F93;&#x5165; consul &#x8FD8;&#x53EF;&#x4EE5;&#x67E5;&#x770B;&#x6240;&#x6709;&#x53C2;&#x6570;
<img src="image/springcloud/consul-help.png" alt="consul-help"></p>
<h3 id="&#x542F;&#x52A8;-consul">&#x542F;&#x52A8; Consul</h3>
<p>&#x8F93;&#x5165;&#x4EE5;&#x4E0B;&#x547D;&#x4EE4;&#x542F;&#x52A8; Consul</p>
<pre class="language-"><code class="lang-java">consul agent <span class="token operator">-</span>dev
<span class="token number">1</span>
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200326154825461.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h4 id="&#x8BBF;&#x95EE;&#x9875;&#x9762;">&#x8BBF;&#x95EE;&#x9875;&#x9762;</h4>
<p>&#x542F;&#x52A8; Consul &#x4E4B;&#x540E;&#x5728;&#x6D4F;&#x89C8;&#x5668;&#x8F93;&#x5165; <a href="http://localhost:8500/" target="_blank">http://localhost:8500/</a> &#x5373;&#x53EF;&#x8BBF;&#x95EE; Consul &#x7684;&#x63A7;&#x5236;&#x754C;&#x9762;
<img src="https://img-blog.csdnimg.cn/20200326155001828.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x8FD9;&#x6837; Consul &#x7684;&#x4E0B;&#x8F7D;&#x5B89;&#x88C5;&#x5E76;&#x4E14;&#x8FD0;&#x884C;&#x6210;&#x529F;&#x4E86;</p>
<h3 id="&#x65B0;&#x5EFA;-module&#xFF08;8006&#xFF09;">&#x65B0;&#x5EFA; Module&#xFF08;8006&#xFF09;</h3>
<p><img src="https://img-blog.csdnimg.cn/20200326155347942.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h4 id="&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;">&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h4>
<pre class="language-"><code class="lang-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--SpringCloud consul-server --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- SpringBoot&#x6574;&#x5408;Web&#x7EC4;&#x4EF6; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--&#x65E5;&#x5E38;&#x901A;&#x7528;jar&#x5305;&#x914D;&#x7F6E;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cn.hutool<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hutool-all<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
123456789101112131415161718192021222324252627282930313233343536373839404142434445
</code></pre>
<h4 id="&#x7F16;&#x5199;-applicationyml">&#x7F16;&#x5199; application.yml</h4>
<pre class="language-"><code class="lang-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8006</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> consul<span class="token punctuation">-</span>provider<span class="token punctuation">-</span>payment
  <span class="token comment"># consul &#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x5730;&#x5740;</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span> <span class="token comment"># consul &#x7684;&#x7AEF;&#x53E3;&#x53F7;</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token comment"># hostname&#xFF1A;127.0.0.1</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
1234567891011121314
</code></pre>
<h4 id="&#x542F;&#x52A8;&#x7C7B;">&#x542F;&#x52A8;&#x7C7B;</h4>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>discovery<span class="token punctuation">.</span></span><span class="token class-name">EnableDiscoveryClient</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/26 16:02
 */</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConsulPaymentMain</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ConsulPaymentMain</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718</span>
</code></pre>
<h4 id="&#x7F16;&#x5199;-controller">&#x7F16;&#x5199; Controller</h4>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>UUID<span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/26 16:03
 */</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/consul&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentConsul</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;SpringCloud with Consul : &quot;</span> <span class="token operator">+</span> serverPort <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> UUID<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">12345678910111213141516171819202122232425</span>
</code></pre>
<h4 id="&#x6D4B;&#x8BD5;">&#x6D4B;&#x8BD5;</h4>
<p>8006 &#x8BBF;&#x95EE; OK
<img src="https://img-blog.csdnimg.cn/20200326160834222.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x800C;&#x4E14; 8006 &#x4E5F;&#x6210;&#x529F;&#x6CE8;&#x518C;&#x5230; Consul
<img src="https://img-blog.csdnimg.cn/2020032616072577.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="&#x65B0;&#x5EFA;-module&#xFF08;80&#xFF09;">&#x65B0;&#x5EFA; Module&#xFF08;80&#xFF09;</h3>
<p>&#x65B0;&#x5EFA;&#x7684;&#x6B65;&#x9AA4;&#x8DDF;&#x4E0A;&#x9762;&#x4E00;&#x6837;</p>
<h4 id="&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;">&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h4>
<pre class="language-"><code class="lang-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--SpringCloud consul-server --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-consul-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- SpringBoot&#x6574;&#x5408;Web&#x7EC4;&#x4EF6; --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--&#x65E5;&#x5E38;&#x901A;&#x7528;jar&#x5305;&#x914D;&#x7F6E;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
123456789101112131415161718192021222324252627282930313233
</code></pre>
<h4 id="&#x7F16;&#x5199;-applicationyml-&#x6587;&#x4EF6;">&#x7F16;&#x5199; application.yml &#x6587;&#x4EF6;</h4>
<pre class="language-"><code class="lang-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> consul<span class="token punctuation">-</span>consumer<span class="token punctuation">-</span>order
  <span class="token comment"># consul &#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x5730;&#x5740;</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">consul</span><span class="token punctuation">:</span>
      <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost
      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8500</span> <span class="token comment"># consul &#x7684;&#x7AEF;&#x53E3;&#x53F7;</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token comment"># hostname&#xFF1A;127.0.0.1</span>
        <span class="token key atrule">service-name</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span>spring.application.name<span class="token punctuation">}</span>
1234567891011121314
</code></pre>
<h4 id="&#x7F16;&#x5199;&#x542F;&#x52A8;&#x7C7B;">&#x7F16;&#x5199;&#x542F;&#x52A8;&#x7C7B;</h4>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>discovery<span class="token punctuation">.</span></span><span class="token class-name">EnableDiscoveryClient</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/26 16:14
 */</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableDiscoveryClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderConsulMain80</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrderConsulMain80</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718</span>
</code></pre>
<h4 id="&#x914D;&#x7F6E;-bean">&#x914D;&#x7F6E; Bean</h4>
<p>&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x7C7B;&#x5176;&#x5B9E;&#x5C31;&#x52A0;&#x4E86;&#x4E2A; @LoadBalance &#x5B9E;&#x73B0;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x80FD;&#x529B;</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span>loadbalancer<span class="token punctuation">.</span></span><span class="token class-name">LoadBalanced</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestTemplate</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/26 16:15
 */</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationContextConfig</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@LoadBalanced</span>
    <span class="token keyword">public</span> <span class="token class-name">RestTemplate</span> <span class="token function">getResTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RestTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718192021</span>
</code></pre>
<h4 id="&#x7F16;&#x5199;-controller">&#x7F16;&#x5199; Controller</h4>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestTemplate</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/26 16:17
 */</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderConsulController</span> <span class="token punctuation">{</span>

    <span class="token comment">// &#x8FD9;&#x91CC;&#x8C03;&#x7684;&#x662F; consul &#x754C;&#x9762;&#x63D0;&#x4F9B;&#x8005;&#x7684;&#x5B9E;&#x4F8B;&#x540D;&#x79F0;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> INVOCE_URL <span class="token operator">=</span> <span class="token string">&quot;http://consul-provider-payment&quot;</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">RestTemplate</span> restTemplate<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;consumer/payment/consul&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>INVOCE_URL <span class="token operator">+</span> <span class="token string">&quot;/payment/consul&quot;</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718192021222324252627282930</span>
</code></pre>
<h4 id="&#x6D4B;&#x8BD5;">&#x6D4B;&#x8BD5;</h4>
<p>&#x8BBF;&#x95EE; <a href="http://localhost:8500/ui/dc1/services" target="_blank">http://localhost:8500/ui/dc1/services</a> &#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x5DF2;&#x7ECF;&#x6CE8;&#x518C;&#x5230; Consul &#x63A7;&#x5236;&#x754C;&#x9762;
<img src="https://img-blog.csdnimg.cn/20200326163135592.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8BBF;&#x95EE; <a href="http://localhost:8006/payment/consul" target="_blank">http://localhost:8006/payment/consul</a>
<img src="https://img-blog.csdnimg.cn/20200326163226558.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x4E5F;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8BBF;&#x95EE; <a href="http://localhost/consumer/payment/consul" target="_blank">http://localhost/consumer/payment/consul</a>
<img src="https://img-blog.csdnimg.cn/20200326163308117.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x5728; Consul &#x7684;&#x63A7;&#x5236;&#x53F0;&#x53EF;&#x4EE5;&#x770B;&#x5230;&#x4E00;&#x76F4;&#x5728;&#x68C0;&#x6D4B;&#x670D;&#x52A1;&#x7684;&#x72B6;&#x6001;
<img src="https://img-blog.csdnimg.cn/20200326163523376.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h2 id="eureka-&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x673A;&#x5236;">Eureka &#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x673A;&#x5236;</h2>
<h3 id="&#x6982;&#x8FF0;">&#x6982;&#x8FF0;</h3>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x4E00;&#x7EC4;&#x5BA2;&#x6237;&#x7AEF;&#x548C; Eureka Server &#x4E4B;&#x95F4;&#x5B58;&#x5728;&#x7F51;&#x7EDC;&#x5206;&#x533A;&#x573A;&#x666F;&#x4E0B;&#x7684;&#x4FDD;&#x62A4;&#x3002;&#x4E00;&#x65E6;&#x8FDB;&#x5165;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#xFF0C;Eureka Server &#x5C06;&#x4F1A;&#x5C1D;&#x8BD5;&#x4FDD;&#x62A4;&#x5176;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x8868;&#x4E2D;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x518D;&#x5220;&#x9664;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x8868;&#x4E2D;&#x7684;&#x6570;&#x636E;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E0D;&#x4F1A;&#x6CE8;&#x9500;&#x4EFB;&#x4F55;&#x5FAE;&#x670D;&#x52A1;</p>
<p>&#x5982;&#x679C;&#x5728; Eureka Server &#x7684;&#x9996;&#x9875;&#x770B;&#x5230;&#x4EE5;&#x4E0B;&#x8FD9;&#x6BB5;&#x63D0;&#x793A;&#xFF0C;&#x5219;&#x8BF4;&#x660E; Eureka &#x8FDB;&#x5165;&#x4E86;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#xFF1A;</p>
<blockquote>
<p><strong>EMERGENCY! EUREKA MAY BE INCORRECTLY CLAIMING INSTANCES ARE UP WHEN THEY&#x2019;RE NOT. RENEWALS ARE LESSER THAN THRESHOLD AND HENCE THE INSTANCES ARE NOT BEING EXPIRED JUST TO BE SAFE.</strong></p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200326131920647.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x7B80;&#x5355;&#x5730;&#x8BF4;&#x5C31;&#x662F;&#x67D0;&#x65F6;&#x523B;&#x67D0;&#x4E00;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x4E0D;&#x53EF;&#x7528;&#x4E86;&#xFF0C;Eureka &#x4E0D;&#x4F1A;&#x7ACB;&#x523B;&#x6E05;&#x7406;&#xFF0C;&#x4F9D;&#x65E7;&#x4F1A;&#x5BF9;&#x8BE5;&#x670D;&#x52A1;&#x7684;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x4FDD;&#x5B58;&#xFF0C;&#x5C5E;&#x4E8E; CAP &#x91CC;&#x9762;&#x7684; AP &#x5206;&#x652F;</p>
<h3 id="&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x4EA7;&#x751F;-eureka-&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x673A;&#x5236;&#xFF1F;">&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x4EA7;&#x751F; Eureka &#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x673A;&#x5236;&#xFF1F;</h3>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x4E3A;&#x4E86;&#x9632;&#x6B62; EurekaClient &#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#xFF0C;&#x4F46;&#x662F;&#x4E0E; EurekaServer &#x7F51;&#x7EDC;&#x4E0D;&#x901A;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;EurekaServer &#x4E0D;&#x4F1A;&#x7ACB;&#x523B; &#x5C06; EurekaClient &#x670D;&#x52A1;&#x5254;&#x9664;</p>
<h3 id="&#x4EC0;&#x4E48;&#x662F;&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#xFF1F;">&#x4EC0;&#x4E48;&#x662F;&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#xFF1F;</h3>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x5982;&#x679C; EurekaServer &#x5728;&#x4E00;&#x5B9A;&#x65F6;&#x95F4;&#x5185;&#x6CA1;&#x6709;&#x63A5;&#x6536;&#x5230;&#x67D0;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;&#x7684;&#x5FC3;&#x8DF3;&#xFF0C;EurekaServer &#x5C06;&#x4F1A;&#x6CE8;&#x9500;&#x8BE5;&#x5B9E;&#x4F8B;&#xFF08;&#x9ED8;&#x8BA4; 90 s&#xFF09;&#x3002;&#x4F46;&#x662F;&#x5F53;&#x7F51;&#x7EDC;&#x5206;&#x533A;&#x6545;&#x969C;&#x53D1;&#x751F;&#xFF08;&#x5EF6;&#x65F6;&#x3001;&#x5361;&#x987F;&#x3001;&#x62E5;&#x6324;&#x65F6;&#xFF09;&#x65F6;&#xFF0C;&#x5FAE;&#x670D;&#x52A1;&#x4E0E; EurekaServer &#x4E4B;&#x95F4;&#x65E0;&#x6CD5;&#x6B63;&#x5E38;&#x901A;&#x4FE1;&#xFF0C;&#x4EE5;&#x4E0A;&#x884C;&#x4E3A;&#x53EF;&#x80FD;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x5371;&#x9669;&#x4E86; &#x2014;&#x2014; &#x56E0;&#x4E3A;&#x5FAE;&#x670D;&#x52A1;&#x672C;&#x8EAB;&#x5176;&#x5B9E;&#x662F;&#x5065;&#x5EB7;&#x7684;&#xFF0C;&#x6B64;&#x65F6;&#x672C;&#x4E0D;&#x5E94;&#x8BE5;&#x6CE8;&#x9500;&#x8FD9;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x3002;Eureka &#x901A;&#x8FC7; &#x201C;<strong>&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;</strong>&#x201D; &#x6765;&#x89E3;&#x51B3;&#x8FD9;&#x4E2A;&#x95EE;&#x9898; &#x2014;&#x2014; &#x5F53; EurekaServer &#x8282;&#x70B9;&#x5728;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x4E22;&#x5931;&#x8FC7;&#x591A;&#x5BA2;&#x6237;&#x7AEF;&#x65F6;&#xFF08;&#x53EF;&#x80FD;&#x53D1;&#x751F;&#x4E86;&#x7F51;&#x7EDC;&#x5206;&#x533A;&#x6545;&#x969C;&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x4E2A;&#x8282;&#x70B9;&#x5C31;&#x4F1A;&#x8FDB;&#x5165;&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;</p>
<p><img src="https://img-blog.csdnimg.cn/20200326133049937.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x2002;&#x2002;&#x2002;&#x2002;&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x673A;&#x5236;&#xFF1A;&#x9ED8;&#x8BA4;&#x60C5;&#x51B5;&#x4E0B; EurekaClient &#x5B9A;&#x65F6;&#x5411; EurekaServer &#x7AEF;&#x53D1;&#x9001;&#x5FC3;&#x8DF3;&#x5305;&#xFF0C;&#x5982;&#x679C; Eureka &#x5728; Server &#x7AEF;&#x5728;&#x4E00;&#x5B9A;&#x65F6;&#x95F4;&#x5185;&#xFF08;&#x9ED8;&#x8BA4; 90 s&#xFF09;&#x6CA1;&#x6709;&#x6536;&#x5230; EurekaClient &#x53D1;&#x9001;&#x7684;&#x5FC3;&#x8DF3;&#x5305;&#xFF0C;&#x4FBF;&#x4F1A;&#x76F4;&#x63A5;&#x4ECE;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x5217;&#x8868;&#x4E2D;&#x5220;&#x9664;&#x8BE5;&#x670D;&#x52A1;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x77ED;&#x65F6;&#x95F4;&#xFF08;90 s &#x4E2D;&#xFF09;&#x5185;&#x4E22;&#x5931;&#x4E86;&#x5927;&#x91CF;&#x7684;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;&#x5FC3;&#x8DF3;&#xFF0C;&#x8FD9;&#x65F6;&#x5019; EurekaServer &#x4F1A;&#x5F00;&#x542F;&#x81EA;&#x542F;&#x4FDD;&#x62A4;&#x673A;&#x5236;&#xFF0C;&#x4E0D;&#x4F1A;&#x5254;&#x9664;&#x8BE5;&#x670D;&#x52A1;&#xFF08;&#x8BE5;&#x73B0;&#x8C61;&#x53EF;&#x80FD;&#x51FA;&#x73B0;&#x5728;&#x5982;&#x679C;&#x7F51;&#x7EDC;&#x4E0D;&#x901A;&#x4F46;&#x662F; EurekaClient &#x4E3A;&#x51FA;&#x73B0;&#x5B95;&#x673A;&#xFF0C;&#x6B64;&#x65F6;&#x5982;&#x679C;&#x6362;&#x505A;&#x522B;&#x7684;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x5982;&#x679C;&#x4E00;&#x5B9A;&#x65F6;&#x95F4;&#x5185;&#x6CA1;&#x6709;&#x6536;&#x5230;&#x5FC3;&#x8DF3;&#x4F1A;&#x5C06;&#x5254;&#x9664;&#x8BE5;&#x670D;&#x52A1;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x51FA;&#x73B0;&#x4E86;&#x4E25;&#x91CD;&#x7684;&#x5931;&#x8BEF;&#xFF0C;&#x56E0;&#x4E3A;&#x5BA2;&#x6237;&#x7AEF;&#x8FD8;&#x80FD;&#x6B63;&#x5E38;&#x53D1;&#x9001;&#x5FC3;&#x8DF3;&#xFF0C;&#x53EA;&#x662F;&#x7F51;&#x7EDC;&#x5EF6;&#x8FDF;&#x95EE;&#x9898;&#xFF0C;&#x800C;&#x4FDD;&#x62A4;&#x673A;&#x5236;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x6B64;&#x95EE;&#x9898;&#x800C;&#x4EA7;&#x751F;&#x7684;&#xFF09;</p>
<p>&#x5728;&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#x4E2D;&#xFF0C;Eureka Server &#x4F1A;&#x4FDD;&#x62A4;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x8868;&#x4E2D;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x4E0D;&#x5728;&#x6CE8;&#x9500;&#x4EFB;&#x4F55;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;</p>
<p>&#x5B83;&#x7684;&#x8BBE;&#x8BA1;&#x54F2;&#x5B66;&#x5C31;&#x662F;&#x5B81;&#x53EF;&#x4FDD;&#x7559;&#x9519;&#x8BEF;&#x7684;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x4FE1;&#x606F;&#xFF0C;&#x4E5F;&#x4E0D;&#x76F2;&#x76EE;&#x6CE8;&#x9500;&#x4EFB;&#x4F55;&#x53EF;&#x80FD;&#x5065;&#x5EB7;&#x7684;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;</p>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x7EFC;&#x4E0A;&#x6240;&#x8FF0;&#xFF0C;&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#x662F;&#x4E00;&#x79CD;&#x5E94;&#x5BF9;&#x7F51;&#x7EDC;&#x5F02;&#x5E38;&#x7684;&#x5B89;&#x5168;&#x4FDD;&#x62A4;&#x63AA;&#x65BD;&#x3002;&#x5B83;&#x7684;&#x67B6;&#x6784;&#x54F2;&#x5B66;&#x662F;&#x5B81;&#x53EF;&#x540C;&#x65F6;&#x4FDD;&#x7559;&#x6240;&#x6709;&#x5FAE;&#x670D;&#x52A1;&#xFF08;&#x5065;&#x5EB7;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x548C;&#x4E0D;&#x5065;&#x5EB7;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x90FD;&#x4F1A;&#x4FDD;&#x7559;&#xFF09;&#x4E5F;&#x4E0D;&#x76F2;&#x76EE;&#x6CE8;&#x9500;&#x4EFB;&#x4F55;&#x5065;&#x5EB7;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#x3002;&#x4F7F;&#x7528;&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x6A21;&#x5F0F;&#xFF0C;&#x53EF;&#x4EE5;&#x8BA9; Eureka &#x96C6;&#x7FA4;&#x66F4;&#x52A0;&#x7684;&#x5065;&#x58EE;&#x3001;&#x7A33;&#x5B9A;</p>
<h3 id="&#x600E;&#x4E48;&#x7981;&#x6B62;&#x81EA;&#x6211;&#x4FDD;&#x62A4;">&#x600E;&#x4E48;&#x7981;&#x6B62;&#x81EA;&#x6211;&#x4FDD;&#x62A4;</h3>
<pre class="language-"><code class="lang-yml"><span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token comment"># &#x5173;&#x95ED;&#x81EA;&#x6211;&#x4FDD;&#x62A4;&#x673A;&#x5236;&#xFF0C;&#x4FDD;&#x8BC1;&#x4E0D;&#x53EF;&#x7528;&#x670D;&#x52A1;&#x88AB;&#x53CA;&#x65F6;&#x5254;&#x9664;</span>
    <span class="token key atrule">enable-self-preservation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre>
<h2 id="&#x4E09;&#x4E2A;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x7684;&#x5F02;&#x540C;&#x70B9;">&#x4E09;&#x4E2A;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x7684;&#x5F02;&#x540C;&#x70B9;</h2>
<table>
<thead>
<tr>
<th>&#x7EC4;&#x4EF6;&#x540D;</th>
<th>&#x8BED;&#x8A00;</th>
<th>CAP</th>
<th>&#x670D;&#x52A1;&#x5065;&#x5EB7;&#x68C0;&#x67E5;</th>
<th>&#x5BF9;&#x5916;&#x66B4;&#x9732;&#x63A5;&#x53E3;</th>
<th>SpringCloud &#x96C6;&#x6210;</th>
</tr>
</thead>
<tbody>
<tr>
<td>Eureka</td>
<td>Java</td>
<td>AP</td>
<td>&#x53EF;&#x914D;&#x652F;&#x6301;</td>
<td>HTTP</td>
<td>&#x652F;&#x6301;</td>
</tr>
<tr>
<td>Consul</td>
<td>Go</td>
<td>CP</td>
<td>&#x652F;&#x6301;</td>
<td>HTTP/DNS</td>
<td>&#x652F;&#x6301;</td>
</tr>
<tr>
<td>Zookeeper</td>
<td>Java</td>
<td>CP</td>
<td>&#x652F;&#x6301;</td>
<td>&#x5BA2;&#x6237;&#x7AEF;</td>
<td>&#x652F;&#x6301;</td>
</tr>
</tbody>
</table>
<p>&#x53E6;&#x5916;&#xFF0C;Eureka &#x548C; Consul &#x90FD;&#x662F;&#x6709;&#x754C;&#x9762;&#x7684;&#xFF0C;&#x800C; Zookeeper &#x6CA1;&#x6709;</p>
<ol>
<li><h4 id="&#x4EC0;&#x4E48;&#x662F;-cap&#xFF1F;">&#x4EC0;&#x4E48;&#x662F; CAP&#xFF1F;</h4>
<ul>
<li>C&#xFF1A;Consistency&#xFF08;&#x5F3A;&#x4E00;&#x81F4;&#x6027;&#xFF09;</li>
<li>A&#xFF1A;Availability&#xFF08;&#x53EF;&#x7528;&#x6027;&#xFF09;</li>
<li>P&#xFF1A;Partition tolerance&#xFF08;&#x5206;&#x533A;&#x5BB9;&#x9519;&#x6027;&#xFF09;</li>
</ul>
<p>&#x6700;&#x591A;&#x53EA;&#x80FD;&#x540C;&#x65F6;&#x8F83;&#x597D;&#x7684;&#x6EE1;&#x8DB3;&#x4E24;&#x4E2A;</p>
<p>CAP &#x7406;&#x8BBA;&#x7684;&#x6838;&#x5FC3;&#x662F;&#xFF1A;&#x4E00;&#x4E2A;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E0D;&#x53EF;&#x80FD;&#x540C;&#x65F6;&#x5F88;&#x597D;&#x7684;&#x6EE1;&#x8DB3;&#x4E00;&#x81F4;&#x6027;&#x3001;&#x53EF;&#x7528;&#x6027;&#x3001;&#x5206;&#x533A;&#x5BB9;&#x9519;&#x6027;&#x8FD9;&#x4E09;&#x4E2A;&#x9700;&#x6C42;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x6839;&#x636E; CAP &#x539F;&#x7406;&#x5C06; NoSQL &#x6570;&#x636E;&#x5E93;&#x5206;&#x6210;&#x4E86;&#x6EE1;&#x8DB3; CA &#x539F;&#x5219;&#x3001;&#x6EE1;&#x8DB3; CP &#x539F;&#x5219;&#x548C;&#x6EE1;&#x8DB3; AP &#x539F;&#x5219;&#x4E09;&#x5927;&#x7C7B;&#xFF1A;</p>
<ul>
<li>CA&#xFF1A;&#x5355;&#x70B9;&#x96C6;&#x7FA4;&#xFF0C;&#x6EE1;&#x8DB3;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x53EF;&#x7528;&#x6027;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x901A;&#x5E38;&#x5728;&#x53EF;&#x6269;&#x5C55;&#x6027;&#x4E0A;&#x4E0D;&#x592A;&#x5F3A;&#x5927;</li>
<li>CP&#xFF1A;&#x6EE1;&#x8DB3;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x5206;&#x533A;&#x5BB9;&#x5FCD;&#x6027;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x901A;&#x5E38;&#x6027;&#x80FD;&#x4E0D;&#x662F;&#x7279;&#x522B;&#x9AD8;</li>
<li>AP&#xFF1A;&#x6EE1;&#x8DB3;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x5206;&#x533A;&#x5BB9;&#x5FCD;&#x6027;&#x7684;&#x7CFB;&#x7EDF;&#xFF0C;&#x901A;&#x5E38;&#x53EF;&#x80FD;&#x5BF9;&#x4E00;&#x81F4;&#x6027;&#x8981;&#x6C42;&#x4F4E;&#x4E00;&#x4E9B;</li>
</ul>
<p>CAP &#x7406;&#x8BBA;&#x5173;&#x6CE8;&#x7C92;&#x5EA6;&#x662F;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x8BBE;&#x8BA1;&#x7684;&#x7B56;&#x7565;</p>
<hr>
</li>
<li><h4 id="ap-&#x67B6;&#x6784;">AP &#x67B6;&#x6784;</h4>
<p>&#x5F53;&#x7F51;&#x7EDC;&#x5206;&#x533A;&#x51FA;&#x73B0;&#x540E;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x53EF;&#x7528;&#x6027;&#xFF0C;&#x7CFB;&#x7EDF; B &#x53EF;&#x4EE5;&#x8FD4;&#x56DE;&#x65E7;&#x503C;&#xFF0C;&#x4FDD;&#x8BC1;&#x7CFB;&#x7EDF;&#x7684;&#x53EF;&#x7528;&#x6027;</p>
<p>&#x7ED3;&#x8BBA;&#xFF1A;&#x8FDD;&#x80CC;&#x4E86;&#x4E00;&#x81F4;&#x6027; C &#x7684;&#x8981;&#x6C42;&#xFF0C;&#x53EA;&#x6EE1;&#x8DB3;&#x53EF;&#x7528;&#x6027;&#x548C;&#x5206;&#x533A;&#x5BB9;&#x9519;&#xFF0C;&#x5373; AP</p>
<p><img src="https://img-blog.csdnimg.cn/20200326175249477.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h4 id=""> </h4>
</li>
<li><h4 id="cp-&#x67B6;&#x6784;">CP &#x67B6;&#x6784;</h4>
<p>&#x5F53;&#x7F51;&#x7EDC;&#x5206;&#x533A;&#x51FA;&#x73B0;&#x540E;&#xFF0C;&#x4E3A;&#x4E86;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x6027;&#xFF0C;&#x5C31;&#x5FC5;&#x987B;&#x62D2;&#x63A5;&#x8BF7;&#x6C42;&#xFF0C;&#x5426;&#x5219;&#x65E0;&#x6CD5;&#x4FDD;&#x8BC1;&#x4E00;&#x81F4;&#x6027;</p>
<p>&#x7ED3;&#x8BBA;&#xFF1A;&#x8FDD;&#x80CC;&#x4E86;&#x53EF;&#x7528;&#x6027; A &#x7684;&#x8981;&#x6C42;&#xFF0C;&#x53EA;&#x6EE1;&#x8DB3;&#x4E00;&#x81F4;&#x6027;&#x548C;&#x5206;&#x533A;&#x5BB9;&#x9519;&#xFF0C;&#x5373; AP</p>
<p><img src="https://img-blog.csdnimg.cn/20200326175713633.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
</li>
</ol>
<h1 id="ribbon">Ribbon</h1>
<p><a href="http://netflix.github.io/ribbon/ribbon-core-javadoc/index.html" target="_blank">&#x6587;&#x6863;</a></p>
<h2 id="&#x4EC0;&#x4E48;&#x662F;-ribbon&#xFF1F;">&#x4EC0;&#x4E48;&#x662F; Ribbon&#xFF1F;</h2>
<p>SpringCloud Ribbon &#x662F;&#x57FA;&#x4E8E; Netflix Ribbon &#x5B9E;&#x73B0;&#x7684;&#x4E00;&#x5957; &#x5BA2;&#x6237;&#x7AEF;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x5DE5;&#x5177;</p>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;Ribbon &#x662F; Netflix &#x53D1;&#x5E03;&#x7684;&#x5F00;&#x6E90;&#x9879;&#x76EE;&#xFF0C;&#x4E3B;&#x8981;&#x529F;&#x80FD;&#x662F;&#x63D0;&#x4F9B; &#x5BA2;&#x6237;&#x7AEF;&#x8F6F;&#x4EF6;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B97;&#x6CD5;&#x548C;&#x670D;&#x52A1;&#x8C03;&#x7528;&#x3002;Ribbon &#x5BA2;&#x6237;&#x7AEF;&#x7EC4;&#x4EF6;&#x63D0;&#x4F9B;&#x4E00;&#x7CFB;&#x5217;&#x5B8C;&#x5584;&#x7684;&#x914D;&#x7F6E;&#x9879;&#xFF0C;&#x5982;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#x3001;&#x91CD;&#x8BD5;&#x7B49;&#x7B49;&#x3002;</p>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x4E2D;&#x5217;&#x51FA; Load Balance&#xFF08;&#x7B80;&#x79F0; LB&#xFF09;&#x540E;&#x9762;&#x6240;&#x6709;&#x7684;&#x673A;&#x5668;&#xFF0C;Ribbon &#x4F1A;&#x81EA;&#x52A8;&#x7684;&#x5E2E;&#x52A9;&#x4F60;&#x57FA;&#x4E8E;&#x67D0;&#x79CD;&#x89C4;&#x5219;&#xFF08;&#x5982;&#x7B80;&#x5355;&#x8F6E;&#x8BE2;&#xFF0C;&#x968F;&#x673A;&#x8FDE;&#x63A5;&#x7B49;&#xFF09;&#x53BB;&#x8FDE;&#x63A5;&#x8FD9;&#x4E9B;&#x673A;&#x5668;&#x3002;&#x6211;&#x4EEC;&#x5F88;&#x5BB9;&#x6613;&#x4F7F;&#x7528; Ribbon &#x5B9E;&#x73B0;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B97;&#x6CD5;</p>
<h2 id="ribbon-&#x80FD;&#x5E72;&#x4EC0;&#x4E48;&#xFF1F;">Ribbon &#x80FD;&#x5E72;&#x4EC0;&#x4E48;&#xFF1F;</h2>
<h3 id="&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF08;lb&#xFF09;">&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF08;LB&#xFF09;</h3>
<p><strong>&#x4EC0;&#x4E48;&#x662F;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF1F;
</strong>
&#x7B80;&#x5355;&#x5730;&#x8BF4;&#x5C31;&#x662F;&#x5C06;&#x7528;&#x6237;&#x7684;&#x8BF7;&#x6C42;&#x5E73;&#x644A;&#x7684;&#x5206;&#x914D;&#x5230;&#x591A;&#x4E2A;&#x670D;&#x52A1;&#x4E0A;&#xFF0C;&#x4ECE;&#x800C;&#x8FBE;&#x5230;&#x7CFB;&#x7EDF;&#x7684; HA&#xFF08;&#x9AD8;&#x53EF;&#x7528;&#xFF09;
&#x5E38;&#x89C1;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x8F6F;&#x4EF6;&#x6709;&#x6709; Nginx&#xFF0C;LVS&#xFF0C;&#x786C;&#x4EF6; F5 &#x7B49;</p>
<p><strong>Ribbon &#x672C;&#x5730;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x5BA2;&#x6237;&#x7AEF; VS Nginx &#x670D;&#x52A1;&#x7AEF;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x533A;&#x522B;
</strong></p>
<p>Nginx &#x662F;&#x670D;&#x52A1;&#x5668;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x6240;&#x6709;&#x8BF7;&#x6C42;&#x90FD;&#x4F1A;&#x4EA4;&#x7ED9; Nginx&#xFF0C;&#x7136;&#x540E;&#x7531; Nginx &#x5B9E;&#x73B0;&#x8F6C;&#x53D1;&#x8BF7;&#x6C42;&#x3002;&#x5373;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x662F;&#x7531;&#x670D;&#x52A1;&#x5668;&#x7AEF;&#x5B9E;&#x73B0;&#x7684;</p>
<p>Ribbon &#x672C;&#x5730;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;&#x5728;&#x8C03;&#x7528;&#x5FAE;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x4F1A;&#x5728;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x4E0A;&#x83B7;&#x53D6;&#x6CE8;&#x518C;&#x4FE1;&#x606F;&#x670D;&#x52A1;&#x5217;&#x8868;&#x4E4B;&#x540E;&#x7F13;&#x5B58;&#x5230; JVM &#x672C;&#x5730;&#xFF0C;&#x4ECE;&#x800C;&#x5728;&#x672C;&#x5730;&#x5B9E;&#x73B0; RPC &#x8FDC;&#x7A0B;&#x670D;&#x52A1;&#x8C03;&#x7528;&#x6280;&#x672F;</p>
<h3 id="&#x96C6;&#x4E2D;&#x5F0F;-lb">&#x96C6;&#x4E2D;&#x5F0F; LB</h3>
<p>&#x5373;&#x5728;&#x670D;&#x52A1;&#x7684;&#x6D88;&#x8D39;&#x65B9;&#x548C;&#x63D0;&#x4F9B;&#x65B9;&#x4E4B;&#x95F4;&#x4F7F;&#x7528;&#x72EC;&#x7ACB;&#x7684; LB &#x8BBE;&#x65BD;&#xFF08;&#x53EF;&#x4EE5;&#x662F;&#x786C;&#x4EF6;&#xFF0C;&#x5982; F5&#xFF0C;&#x4E5F;&#x53EF;&#x4EE5;&#x662F;&#x8F6F;&#x4EF6;&#xFF0C;&#x5982; Nginx&#xFF09;&#xFF0C;&#x7531;&#x8BE5;&#x8BBE;&#x65BD;&#x8D1F;&#x8D23;&#x628A;&#x8BBF;&#x95EE;&#x8BF7;&#x6C42;&#x901A;&#x8FC7;&#x67D0;&#x79CD;&#x7B56;&#x7565;&#x8F6C;&#x53D1;&#x81F3;&#x670D;&#x52A1;&#x7684;&#x63D0;&#x4F9B;&#x65B9;</p>
<h3 id="&#x8FDB;&#x7A0B;&#x5185;-lb">&#x8FDB;&#x7A0B;&#x5185; LB</h3>
<p>&#x5C06; LB &#x903B;&#x8F91;&#x96C6;&#x6210;&#x5230;&#x6D88;&#x8D39;&#x65B9;&#xFF0C;&#x6D88;&#x8D39;&#x65B9;&#x4ECE;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x4E2D;&#x5FC3;&#x83B7;&#x53D6;&#x6709;&#x54EA;&#x4E9B;&#x5730;&#x5740;&#x53EF;&#x4EE5;&#x7528;&#xFF0C;&#x7136;&#x540E;&#x81EA;&#x5DF1;&#x518D;&#x4ECE;&#x8FD9;&#x4E9B;&#x5730;&#x5740;&#x4E2D;&#x9009;&#x62E9;&#x51FA;&#x4E00;&#x4E2A;&#x5408;&#x9002;&#x7684;&#x670D;&#x52A1;&#x5668;</p>
<p><strong>Ribbon &#x5C31;&#x5C5E;&#x4E8E;&#x8FDB;&#x7A0B;&#x5185; LB</strong>&#xFF0C;&#x5B83;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x7C7B;&#x5E93;&#xFF0C;&#x96C6;&#x6210;&#x4E0E;&#x6D88;&#x8D39;&#x65B9;&#x8FDB;&#x7A0B;&#xFF0C;&#x6D88;&#x8D39;&#x65B9;&#x901A;&#x8FC7;&#x5B83;&#x6765;&#x83B7;&#x53D6;&#x5230;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x65B9;&#x7684;&#x5730;&#x5740;</p>
<hr>
<p>&#x7B80;&#x5355;&#x5730;&#x8BF4; Ribbon == &#x8D1F;&#x8F7D;&#x5747;&#x8861; + RESTTemplate &#x8C03;&#x7528;</p>
<h3 id="&#x603B;&#x7ED3;&#xFF1A;">&#x603B;&#x7ED3;&#xFF1A;</h3>
<p>Ribbon &#x5176;&#x5B9E;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x8F6F;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x7EC4;&#x4EF6;&#xFF0C;&#x5B83;&#x53EF;&#x4EE5;&#x548C;&#x5176;&#x5B83;&#x6240;&#x9700;&#x8BF7;&#x6C42;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x7ED3;&#x5408;&#x4F7F;&#x7528;&#xFF0C;&#x548C; Eureka &#x7ED3;&#x5408;&#x53EA;&#x662F;&#x5176;&#x4E2D;&#x7684;&#x4E00;&#x4E2A;&#x5B9E;&#x4F8B;</p>
<h2 id="ribbon-&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x548C;-rest-&#x8C03;&#x7528;">Ribbon &#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x548C; REST &#x8C03;&#x7528;</h2>
<p><img src="https://img-blog.csdnimg.cn/20200327102925164.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
Ribbon &#x5728;&#x5DE5;&#x4F5C;&#x65F6;&#x5206;&#x6210;&#x4E24;&#x6B65;&#xFF1A;</p>
<ul>
<li>&#x7B2C;&#x4E00;&#x6B65;&#x5148;&#x9009;&#x62E9; EurekaServer&#xFF0C;&#x5B83;&#x4F18;&#x5148;&#x9009;&#x62E9;&#x5728;&#x540C;&#x4E00;&#x4E2A;&#x533A;&#x57DF;&#x5185;&#x8D1F;&#x8F7D;&#x8F83;&#x5C11;&#x7684; Server</li>
<li>&#x7B2C;&#x4E8C;&#x6B65;&#x5728;&#x6839;&#x636E;&#x7528;&#x6237;&#x6307;&#x5B9A;&#x7684;&#x7B56;&#x7565;&#xFF0C;&#x518D;&#x4ECE; Server &#x53D6;&#x5230;&#x7684;&#x670D;&#x52A1;&#x6CE8;&#x518C;&#x5217;&#x8868;&#x4E2D;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x5730;&#x5740;</li>
</ul>
<p>&#x5176;&#x4E2D; Ribbon &#x63D0;&#x4F9B;&#x4E86;&#x591A;&#x79CD;&#x7B56;&#x7565;&#xFF1A;&#x6BD4;&#x5982;&#x8F6E;&#x8BE2;&#x3001;&#x968F;&#x673A;&#x548C;&#x6839;&#x636E;&#x54CD;&#x5E94;&#x4E8B;&#x4EF6;&#x52A0;&#x6743;</p>
<h3 id="&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;">&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h3>
<p>&#x5728;&#x524D;&#x9762;&#x7684;&#x6587;&#x7AE0;&#x4E2D;&#x5176;&#x5B9E;&#x5DF2;&#x7ECF;&#x7B80;&#x5355;&#x5730;&#x63A2;&#x8BA8;&#x8FC7; Ribbon &#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#xFF0C;<a href="https://blog.csdn.net/Woo_home/article/details/105093023" target="_blank">https://blog.csdn.net/Woo_home/article/details/105093023</a></p>
<pre class="language-"><code class="lang-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!--&#x5305;&#x542B;&#x4E86;sleuth+zipkin--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-zipkin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
1234567891011121314151617181920212223242526272829303132333435
</code></pre>
<p>&#x7EC6;&#x5FC3;&#x7684;&#x670B;&#x53CB;&#x4F1A;&#x53D1;&#x73B0;&#xFF0C;&#x8FD9;&#x91CC;&#x5E76;&#x6CA1;&#x6709;&#x5F15;&#x5165; Ribbon &#x7684;&#x4F9D;&#x8D56;&#xFF0C;&#x90A3;&#x600E;&#x4E48;&#x4F7F;&#x7528;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x5462;&#xFF1F;
<img src="https://img-blog.csdnimg.cn/20200327103718311.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x5176;&#x5B9E; spring-cloud-starter-netflix-eureka-client &#xFF08;&#x5728;&#x65B0;&#x7248;&#x672C;&#x4E2D;&#xFF09;&#x81EA;&#x5E26;&#x4E86; spring-cloud-starter-ribbon &#x5F15;&#x7528;&#xFF0C;&#x53EF;&#x4EE5;&#x6253;&#x5F00; Maven &#x770B;&#x4E0B;&#xFF1A;
<img src="https://img-blog.csdnimg.cn/20200327103900713.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x5982;&#x679C;&#x60F3;&#x76F4;&#x63A5;&#x6DFB;&#x52A0; Ribbon &#x4F9D;&#x8D56;&#x7684;&#x4E5F;&#x53EF;&#x4EE5;&#xFF0C;Ribbon &#x7684;&#x4F9D;&#x8D56;&#x5982;&#x4E0B;&#xFF08;&#x522B;&#x641E;&#x5F97; jar &#x51B2;&#x7A81;&#x4E86;&#xFF09;&#xFF1A;</p>
<pre class="language-"><code class="lang-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-ribbon<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
1234
</code></pre>
<h3 id="resttemplate-&#x7684;&#x4F7F;&#x7528;">RestTemplate &#x7684;&#x4F7F;&#x7528;</h3>
<h4 id="getforobject-&#x548C;-getforentity-&#x65B9;&#x6CD5;">getForObject &#x548C; getForEntity &#x65B9;&#x6CD5;</h4>
<p><strong>getForObject &#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x4E3A;&#x54CD;&#x5E94;&#x4F53;&#x4E2D;&#x6570;&#x636E;&#x8F6C;&#x5316;&#x6210;&#x7684;&#x5BF9;&#x8C61;&#xFF0C;&#x57FA;&#x672C;&#x4E0A;&#x53EF;&#x4EE5;&#x7ACB;&#x5373;&#x4E3A; JSON</strong>
<img src="https://img-blog.csdnimg.cn/20200327104537527.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
<strong>getForEntity &#x8FD4;&#x56DE;&#x5BF9;&#x8C61;&#x4E3A; ResponseEntity &#x5BF9;&#x8C61;&#xFF0C;&#x5305;&#x542B;&#x4E86;&#x54CD;&#x5E94;&#x4E2D;&#x7684;&#x4E00;&#x4E9B;&#x91CD;&#x8981;&#x4FE1;&#x606F;&#xFF0C;&#x6BD4;&#x5982;&#x54CD;&#x5E94;&#x5934;&#x3001;&#x54CD;&#x5E94;&#x72B6;&#x6001;&#x7801;&#x3001;&#x54CD;&#x5E94;&#x4F53;&#x7B49;</strong></p>
<pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/getForEntity/{id}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPayment2</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ResponseEntity</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">CommonResult</span><span class="token punctuation">&gt;</span></span> forEntity <span class="token operator">=</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForEntity</span><span class="token punctuation">(</span>PAYMENT_URL <span class="token operator">+</span> <span class="token string">&quot;/payment/get/&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>forEntity<span class="token punctuation">.</span><span class="token function">getStatusCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is2xxSuccessful</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> forEntity<span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">,</span><span class="token string">&quot;&#x64CD;&#x4F5C;&#x5931;&#x8D25;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789</span>
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200327112743913.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h4 id="postforobject-&#x548C;-postforentity-&#x65B9;&#x6CD5;">postForObject &#x548C; postForEntity &#x65B9;&#x6CD5;</h4>
<p><img src="https://img-blog.csdnimg.cn/20200327105403162.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer/payment/create&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">create2</span><span class="token punctuation">(</span><span class="token class-name">Payment</span> payment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">postForEntity</span><span class="token punctuation">(</span>PAYMENT_URL <span class="token operator">+</span> <span class="token string">&quot;/payment/create&quot;</span><span class="token punctuation">,</span> payment<span class="token punctuation">,</span> <span class="token class-name">CommonResult</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token number">1234</span>
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200327112650106.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h2 id="ribbon-&#x6838;&#x5FC3;&#x7EC4;&#x4EF6;-irule">Ribbon &#x6838;&#x5FC3;&#x7EC4;&#x4EF6; IRule</h2>
<h3 id="irule">IRule</h3>
<p>IRule &#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x6839;&#x636E;&#x7279;&#x5B9A;&#x7B97;&#x6CD5;&#x4E2D;&#x4ECE;&#x670D;&#x52A1;&#x5217;&#x8868;&#x4E2D;&#x9009;&#x53D6;&#x4E00;&#x4E2A;&#x8981;&#x8BBF;&#x95EE;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x770B;&#x4E0B; IRule &#x7684;&#x4E00;&#x4E9B;&#x5B9E;&#x73B0;&#x7C7B;
<img src="https://img-blog.csdnimg.cn/20200327100255671.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<ul>
<li>com.netflix.loadbalancer.RoundRobinRule&#xFF1A;&#x8F6E;&#x8BE2;</li>
<li>com.netflix.loadbalancer.RandomRule&#xFF1A;&#x968F;&#x673A;</li>
<li>com.netflix.loadbalancer.RetryRule&#xFF1A;&#x5148;&#x6309;&#x7167; RoundRobinRule &#x7684;&#x7B56;&#x7565;&#x83B7;&#x53D6;&#x670D;&#x52A1;&#xFF0C;&#x5982;&#x679C;&#x83B7;&#x53D6;&#x670D;&#x52A1;&#x5931;&#x8D25;&#x5219;&#x5728;&#x6307;&#x5B9A;&#x7684;&#x65F6;&#x95F4;&#x5185;&#x4F1A;&#x8FDB;&#x884C;&#x91CD;&#x8BD5;&#xFF0C;&#x83B7;&#x53D6;&#x53EF;&#x7528;&#x7684;&#x670D;&#x52A1;</li>
<li>WeightedResponseTimeRule&#xFF1A;&#x5BF9; RoundRobinRule &#x7684;&#x6269;&#x5C55;&#xFF0C;&#x54CD;&#x5E94;&#x901F;&#x5EA6;&#x8D8A;&#x5FEB;&#x7684;&#x5B9E;&#x4F8B;&#x9009;&#x62E9;&#x6743;&#x91CD;&#x8D8A;&#x5927;&#xFF0C;&#x8D8A;&#x5BB9;&#x6613;&#x88AB;&#x9009;&#x62E9;</li>
<li>BestAvailableRule&#xFF1A;&#x4F1A;&#x5148;&#x8FC7;&#x6EE4;&#x6389;&#x7531;&#x4E8E;&#x591A;&#x6B21;&#x8BBF;&#x95EE;&#x6545;&#x969C;&#x800C;&#x5904;&#x4E8E;&#x65AD;&#x8DEF;&#x5668;&#x8DF3;&#x95F8;&#x72B6;&#x6001;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x7136;&#x540E;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x5E76;&#x53D1;&#x91CF;&#x6700;&#x5C0F;&#x7684;&#x670D;&#x52A1;</li>
<li>AvailabilityFilteringRule&#xFF1A;&#x4F1A;&#x5148;&#x8FC7;&#x6EE4;&#x6389;&#x6545;&#x969C;&#x5B9E;&#x4F8B;&#xFF0C;&#x518D;&#x9009;&#x62E9;&#x5E76;&#x53D1;&#x8F83;&#x5C0F;&#x7684;&#x5B9E;&#x4F8B;</li>
<li>ZoneAvoiddanceRule&#xFF1A;&#x9ED8;&#x8BA4;&#x89C4;&#x5219;&#xFF0C;&#x590D;&#x5408;&#x5224;&#x65AD; server &#x6240;&#x5728;&#x533A;&#x57DF;&#x7684;&#x6027;&#x80FD;&#x548C; server &#x7684;&#x53EF;&#x7528;&#x6027;&#x9009;&#x62E9;&#x670D;&#x52A1;&#x5668;</li>
</ul>
<h3 id="&#x5982;&#x4F55;&#x66FF;&#x6362;&#x8D1F;&#x8F7D;&#x89C4;&#x5219;&#xFF1F;">&#x5982;&#x4F55;&#x66FF;&#x6362;&#x8D1F;&#x8F7D;&#x89C4;&#x5219;&#xFF1F;</h3>
<h4 id="&#x6CE8;&#x610F;&#xFF1A;">&#x6CE8;&#x610F;&#xFF1A;</h4>
<p><strong>&#x5728;&#x81EA;&#x5B9A;&#x4E49;&#x914D;&#x7F6E;&#x7C7B;&#x7684;&#x65F6;&#x5019;&#x4E0D;&#x80FD;&#x653E;&#x5728; @ComponentScan &#x6240;&#x626B;&#x63CF;&#x7684;&#x5F53;&#x524D;&#x5305;&#x4E0B;&#x4EE5;&#x53CA;&#x5B50;&#x5305;&#x4E0B;&#xFF0C;&#x5426;&#x5219;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x8FD9;&#x4E2A;&#x914D;&#x7F6E;&#x7C7B;&#x5C31;&#x4F1A;&#x88AB;&#x6240;&#x6709;&#x7684; Ribbon &#x5BA2;&#x6237;&#x7AEF;&#x6240;&#x5171;&#x4EAB;&#xFF0C;&#x8FD9;&#x6837;&#x8FBE;&#x4E0D;&#x5230;&#x7279;&#x6B8A;&#x5316;&#x5B9A;&#x5236;&#x7684;&#x76EE;&#x7684;&#x4E86;</strong></p>
<p>&#x8FD9;&#x8BDD;&#x4EC0;&#x4E48;&#x610F;&#x601D;&#x5462;&#xFF1F;&#x56E0;&#x4E3A; @SpringBootApplication &#x6CE8;&#x89E3;&#x5305;&#x542B;&#x4E86; @ComponentScan &#x8FD9;&#x4E2A;&#x6CE8;&#x89E3;
<img src="https://img-blog.csdnimg.cn/20200327113326590.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF0C;&#x5C31;&#x662F;&#x6211;&#x4EEC;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x914D;&#x7F6E;&#x7C7B;&#x4E0D;&#x80FD;&#x653E;&#x5728;&#x4E0E; &#x542F;&#x52A8;&#x7C7B;&#x540C;&#x4E00;&#x5B50;&#x5305;&#x4E0B;
<img src="https://img-blog.csdnimg.cn/20200327113503919.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h5 id="&#x65B0;&#x5EFA;&#x89C4;&#x5219;&#x7C7B;">&#x65B0;&#x5EFA;&#x89C4;&#x5219;&#x7C7B;</h5>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>ruleconfig<span class="token punctuation">.</span>myrule</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>loadbalancer<span class="token punctuation">.</span></span><span class="token class-name">IRule</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>loadbalancer<span class="token punctuation">.</span></span><span class="token class-name">RandomRule</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/27 11:11
 */</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySelfRule</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">IRule</span> <span class="token function">myRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x8FD4;&#x56DE;&#x968F;&#x673A;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RandomRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718192021</span>
</code></pre>
<h5 id="&#x4FEE;&#x6539;&#x542F;&#x52A8;&#x7C7B;">&#x4FEE;&#x6539;&#x542F;&#x52A8;&#x7C7B;</h5>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>ruleconfig<span class="token punctuation">.</span>myrule<span class="token punctuation">.</span></span><span class="token class-name">MySelfRule</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>ribbon<span class="token punctuation">.</span></span><span class="token class-name">RibbonClient</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/24 14:09
 */</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token comment">// name &#x662F;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#x7684;&#x5B9E;&#x4F8B;&#x540D;&#x79F0;</span>
<span class="token annotation punctuation">@RibbonClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;DEMO-PROVIDER-PAYMENT&quot;</span><span class="token punctuation">,</span>configuration <span class="token operator">=</span> <span class="token class-name">MySelfRule</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderMain80</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrderMain80</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">12345678910111213141516171819202122</span>
</code></pre>
<h5 id="&#x8BBF;&#x95EE;&#x9875;&#x9762;">&#x8BBF;&#x95EE;&#x9875;&#x9762;</h5>
<p>&#x4E0B;&#x9762;&#x662F;&#x8FDE;&#x7EED;&#x5237;&#x65B0;&#x9875;&#x9762;&#x8FD4;&#x56DE;&#x7684;&#x7ED3;&#x679C;&#xFF0C;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x7AEF;&#x53E3;&#x53F7;&#x5E76;&#x4E0D;&#x662F;&#x9ED8;&#x8BA4;&#x7684;&#x8F6E;&#x8BE2;&#x4E86;
<img src="https://img-blog.csdnimg.cn/20200327112835208.png" alt="localhost:/consumer/payment/postForEntity/create">
<img src="https://img-blog.csdnimg.cn/20200327112844821.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
<img src="https://img-blog.csdnimg.cn/20200327112857469.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h2 id="ribbon-&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x539F;&#x7406;">Ribbon &#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x539F;&#x7406;</h2>
<p>&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B97;&#x6CD5;&#xFF1A;REST &#x63A5;&#x53E3;&#x7B2C;&#x51E0;&#x6B21;&#x8BF7;&#x6C42;&#x6570; % &#x670D;&#x52A1;&#x5668;&#x96C6;&#x7FA4;&#x603B;&#x6570;&#x91CF; = &#x5B9E;&#x9645;&#x8C03;&#x7528;&#x670D;&#x52A1;&#x5668;&#x4F4D;&#x7F6E;&#x4E0B;&#x6807;&#xFF0C;&#x6BCF;&#x6B21;&#x670D;&#x52A1;&#x542F;&#x52A8;&#x540E; REST &#x63A5;&#x53E3;&#x8BA1;&#x6570;&#x4ECE; 1 &#x5F00;&#x59CB;</p>
<pre class="language-"><code class="lang-java"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> instances <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token string">&quot;DEMO-PROVIDER-PAYMENT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token number">1</span>
</code></pre>
<p>&#x5982;&#xFF1A;
List[0] instances = 127.0.0.1:8001
List[1] instances = 127.0.0.1:8002</p>
<p>1 % 2 = 1 &#x2014;&#x2014;&#x300B;index = 1 list.get(index)
2 % 2 = 0 &#x2014;&#x2014;&#x300B;index = 0 list.get(index)
3 % 2 = 1 &#x2014;&#x2014;&#x300B;index = 1 list.get(index)
4 % 2 = 0 &#x2014;&#x2014;&#x300B;index = 0 list.get(index)
5 % 2 = 1 &#x2014;&#x2014;&#x300B;index = 1 list.get(index)</p>
<p>8001 + 8002 &#x7EC4;&#x5408;&#x6210;&#x4E3A;&#x96C6;&#x7FA4;&#xFF0C;&#x5171;&#x8BA1;&#x4E24;&#x53F0;&#x673A;&#x5668;&#xFF0C;&#x96C6;&#x7FA4;&#x603B;&#x6570;&#x4E3A; 2&#xFF0C;&#x6309;&#x7167;&#x8F6E;&#x8BE2;&#x7B97;&#x6CD5;&#x539F;&#x7406;&#xFF1A;</p>
<p>&#x5F53;&#x603B;&#x8BF7;&#x6C42;&#x6570;&#x4E3A; 1 &#x65F6;&#xFF1A;1 % 2 = 1 &#x5BF9;&#x5E94;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x4E3A; 1&#xFF0C;&#x5219;&#x83B7;&#x5F97;&#x670D;&#x52A1;&#x5730;&#x5740;&#x4E3A; 127.0.0.1:8002
&#x5F53;&#x603B;&#x8BF7;&#x6C42;&#x6570;&#x4E3A; 1 &#x65F6;&#xFF1A;2 % 2 = 0 &#x5BF9;&#x5E94;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x4E3A; 0&#xFF0C;&#x5219;&#x83B7;&#x5F97;&#x670D;&#x52A1;&#x5730;&#x5740;&#x4E3A; 127.0.0.1:8001
&#x5F53;&#x603B;&#x8BF7;&#x6C42;&#x6570;&#x4E3A; 1 &#x65F6;&#xFF1A;3 % 2 = 1 &#x5BF9;&#x5E94;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x4E3A; 1&#xFF0C;&#x5219;&#x83B7;&#x5F97;&#x670D;&#x52A1;&#x5730;&#x5740;&#x4E3A; 127.0.0.1:8002
&#x5F53;&#x603B;&#x8BF7;&#x6C42;&#x6570;&#x4E3A; 1 &#x65F6;&#xFF1A;4 % 2 = 0 &#x5BF9;&#x5E94;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x4E3A; 0&#xFF0C;&#x5219;&#x83B7;&#x5F97;&#x670D;&#x52A1;&#x5730;&#x5740;&#x4E3A; 127.0.0.1:8001
&#x5F53;&#x603B;&#x8BF7;&#x6C42;&#x6570;&#x4E3A; 1 &#x65F6;&#xFF1A;5 % 2 = 1 &#x5BF9;&#x5E94;&#x4E0B;&#x6807;&#x4F4D;&#x7F6E;&#x4E3A; 1&#xFF0C;&#x5219;&#x83B7;&#x5F97;&#x670D;&#x52A1;&#x5730;&#x5740;&#x4E3A; 127.0.0.1:8002</p>
<p>&#x4EE5;&#x6B64;&#x7C7B;&#x63A8;&#x2026;</p>
<h2 id="ribbon-&#x6E90;&#x7801;&#x5206;&#x6790;">Ribbon &#x6E90;&#x7801;&#x5206;&#x6790;</h2>
<p>&#x5148;&#x6765;&#x770B;&#x4E0B; IRule &#x7684; UML &#x56FE;
<img src="https://img-blog.csdnimg.cn/20200327115314434.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x4E0B;&#x9762;&#x662F; IRule &#x7684;&#x63A5;&#x53E3;&#x6E90;&#x7801;
<img src="https://img-blog.csdnimg.cn/20200327121156296.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IRule</span> <span class="token punctuation">{</span>
    <span class="token class-name">Server</span> <span class="token function">choose</span><span class="token punctuation">(</span><span class="token class-name">Object</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">setLoadBalancer</span><span class="token punctuation">(</span><span class="token class-name">ILoadBalancer</span> lb<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">ILoadBalancer</span> <span class="token function">getLoadBalancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>IRule &#x7684;&#x5B9E;&#x73B0;&#x7C7B;
<img src="https://img-blog.csdnimg.cn/20200327115541332.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="roundrobinrule">RoundRobinRule</h3>
<p>&#x6765;&#x770B;&#x4E0B;&#x9ED8;&#x8BA4;&#x7684;&#x8F6E;&#x8BE2;&#x7B97;&#x6CD5;&#x6E90;&#x7801; RoundRobinRule.java</p>
<p>&#x53EF;&#x4EE5;&#x53D1;&#x73B0; RoundRobinRule &#x7C7B;&#x4E2D;&#x5B9A;&#x4E49;&#x4E86;&#x4E00;&#x4E2A; AtomicInteger&#xFF0C; &#x5E76;&#x521D;&#x59CB;&#x5316;&#x4E3A; 0
<img src="https://img-blog.csdnimg.cn/20200327123411844.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x518D;&#x6765;&#x770B;&#x4E0B; RoundRobinRule &#x5B9E;&#x73B0; IRule &#x7684; choose &#x65B9;&#x6CD5;</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">public</span> <span class="token class-name">Server</span> <span class="token function">choose</span><span class="token punctuation">(</span><span class="token class-name">ILoadBalancer</span> lb<span class="token punctuation">,</span> <span class="token class-name">Object</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x5982;&#x679C; lb &#x7B49;&#x4E8E; null&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#x6CA1;&#x6709;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>lb <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;no load balancer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x8FD4;&#x56DE; null</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">Server</span> server <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// &#x5982;&#x679C;&#x670D;&#x52A1;&#x5668;&#x4E3A; null &#x5E76;&#x4E14; count++ &lt; 10</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>server <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> count<span class="token operator">++</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x83B7;&#x53D6;&#x53EF;&#x8FBE;&#xFF08;&#x5065;&#x5EB7;&#x7684;&#xFF09;&#x7684;&#x673A;&#x5668;&#xFF08;&#x670D;&#x52A1;&#x5668;&#xFF09;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Server</span><span class="token punctuation">&gt;</span></span> reachableServers <span class="token operator">=</span> lb<span class="token punctuation">.</span><span class="token function">getReachableServers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x83B7;&#x53D6;&#x6240;&#x6709;&#x673A;&#x5668;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Server</span><span class="token punctuation">&gt;</span></span> allServers <span class="token operator">=</span> lb<span class="token punctuation">.</span><span class="token function">getAllServers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x83B7;&#x53D6;&#x5065;&#x5EB7;&#x670D;&#x52A1;&#x7684;&#x6570;&#x91CF;</span>
        <span class="token keyword">int</span> upCount <span class="token operator">=</span> reachableServers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x83B7;&#x53D6;&#x6240;&#x6709;&#x670D;&#x52A1;&#x7684;&#x6570;&#x91CF;&#xFF0C;&#x8FD9;&#x91CC;&#x4E5F;&#x5C31;&#x662F;&#x4E0A;&#x9762;&#x6240;&#x8BF4;&#x7684;&#x83B7;&#x53D6;&#x96C6;&#x7FA4;&#x603B;&#x6570;&#x91CF;&#x5982; 8001 + 8002 &#x4E24;&#x53F0;&#x673A;&#x5668;</span>
        <span class="token keyword">int</span> serverCount <span class="token operator">=</span> allServers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// &#x4E00;&#x822C;&#x53EA;&#x8981;&#x6709;&#x670D;&#x52A1;&#x542F;&#x52A8;&#x6210;&#x529F;&#xFF0C;&#x901A;&#x5E38;&#x4E0D;&#x4F1A;&#x6267;&#x884C;&#x8FD9;&#x4E2A; if</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>upCount <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>serverCount <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;No up servers available from load balancer: &quot;</span> <span class="token operator">+</span> lb<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// &#x8FD9;&#x91CC;&#x5F97;&#x5230;&#x7684;&#x503C;&#x4E3A; 1&#xFF0C;&#x4E3A;&#x4EC0;&#x4E48;&#x662F; 1&#xFF0C;&#x4E0B;&#x9762;&#x4F1A;&#x8BB2;&#x5230;</span>
        <span class="token keyword">int</span> nextServerIndex <span class="token operator">=</span> <span class="token function">incrementAndGetModulo</span><span class="token punctuation">(</span>serverCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x83B7;&#x53D6;&#x4E0B;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x4E0B;&#x6807;&#xFF0C;&#x5982; 0&#x3001;1&#x3001;0&#x3001;1</span>
        server <span class="token operator">=</span> allServers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>nextServerIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>server <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">/* Transient. */</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">continue</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>server<span class="token punctuation">.</span><span class="token function">isAlive</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>server<span class="token punctuation">.</span><span class="token function">isReadyToServe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">(</span>server<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Next.</span>
        server <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span><span class="token string">&quot;No available alive servers after 10 tries from load balancer: &quot;</span>
                <span class="token operator">+</span> lb<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// &#x8FD4;&#x56DE;&#x4E0B;&#x6807;&#x5BF9;&#x5E94;&#x7684;&#x670D;&#x52A1;</span>
    <span class="token keyword">return</span> server<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token number">1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253</span>
</code></pre>
<h3 id="getreachableservers">getReachableServers()</h3>
<p>&#x8FD4;&#x56DE;&#x53EF;&#x8BBF;&#x95EE;&#x7684;&#x670D;&#x52A1;&#x5668;
<img src="https://img-blog.csdnimg.cn/20200327130300989.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="getallservers">getAllServers()</h3>
<p>&#x8FD4;&#x56DE;&#x6240;&#x6709;&#x5DF2;&#x77E5;&#x7684;&#x670D;&#x52A1;&#x5668;&#xFF0C;&#x5305;&#x62EC;&#x53EF;&#x8BBF;&#x95EE;&#x7684;&#x548C;&#x4E0D;&#x53EF;&#x8BBF;&#x95EE;&#x7684;
<img src="https://img-blog.csdnimg.cn/20200327130331809.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="incrementandgetmodulo">incrementAndGetModulo</h3>
<pre class="language-"><code class="lang-java"><span class="token comment">// &#x6839;&#x636E;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x5982;&#x679C;&#x96C6;&#x7FA4;&#x6570;&#x91CF;&#x4E3A; 2&#xFF0C;&#x90A3;&#x4E48;&#x8FD9;&#x91CC; modulo &#x4F20;&#x7684;&#x5C31;&#x662F; 2</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">incrementAndGetModulo</span><span class="token punctuation">(</span><span class="token keyword">int</span> modulo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x4EE5;&#x4E0B;&#x662F;&#x4E00;&#x4E2A;&#x81EA;&#x65CB;&#x9501;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// nextServerCyclicCounter &#x4E0A;&#x9762;&#x5DF2;&#x7ECF;&#x4ECB;&#x7ECD;&#x8FC7;&#xFF0C;&#x521D;&#x59CB;&#x503C;&#x4E3A; 0&#xFF0C;&#x90A3;&#x4E48;&#x4E5F;&#x5C31;&#x662F;&#x8BF4; current = 0</span>
        <span class="token keyword">int</span> current <span class="token operator">=</span> nextServerCyclicCounter<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#xFF08;0 + 1&#xFF09;% 2 = 1&#xFF0C;&#x6839;&#x636E;&#x4E0A;&#x9762;&#x63D0;&#x5230;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x539F;&#x7406;&#xFF0C;&#x8FD9;&#x91CC;&#x7684;&#x4E0B;&#x6807;&#x5C31;&#x662F; 1</span>
        <span class="token keyword">int</span> next <span class="token operator">=</span> <span class="token punctuation">(</span>current <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> modulo<span class="token punctuation">;</span>
        <span class="token comment">// &#x8FD9;&#x91CC;&#x4F7F;&#x7528;&#x7684;&#x662F; CAS &#xFF08;&#x6BD4;&#x8F83;&#x5E76;&#x4EA4;&#x6362;&#xFF09;&#xFF0C;&#x5C06;&#x5F53;&#x524D;&#x7684;&#x503C;&#xFF08;current&#xFF09;&#x4F20;&#x8FDB;&#x53BB;&#xFF0C;&#x4E0B;&#x4E00;&#x6B21;&#x7684;&#x503C;&#x4F20;&#x8FDB;&#x53BB;</span>
        <span class="token comment">// &#x5047;&#x8BBE; next &#x503C;&#x6CA1;&#x4FEE;&#x6539;&#x8FC7;&#x7684;&#x8BDD;&#xFF0C;&#x90A3;&#x4E48; next &#x503C;&#x5C31;&#x662F; 1&#xFF0C;&#x5426;&#x5219;&#x5F00;&#x59CB;&#x81EA;&#x65CB;&#xFF0C;&#x4E0D;&#x65AD;&#x6BD4;&#x8F83;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nextServerCyclicCounter<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span> next<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token comment">// &#x8FD4;&#x56DE; next &#x503C;</span>
            <span class="token keyword">return</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789101112131415</span>
</code></pre>
<h2 id="&#x81EA;&#x5B9A;&#x4E49;&#x8F6E;&#x8BE2;&#x7B97;&#x6CD5;">&#x81EA;&#x5B9A;&#x4E49;&#x8F6E;&#x8BE2;&#x7B97;&#x6CD5;</h2>
<p>&#x5148;&#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>lb</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">ServiceInstance</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/27 13:13
 */</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LoadBalancer</span> <span class="token punctuation">{</span>
    <span class="token class-name">ServiceInstance</span> <span class="token function">instances</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> serviceInstances<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token number">12345678910111213</span>
</code></pre>
<p>&#x521B;&#x5EFA;&#x5B9E;&#x73B0;&#x7C7B;</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>lb</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">ServiceInstance</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>atomic<span class="token punctuation">.</span></span><span class="token class-name">AtomicInteger</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/27 13:14
 */</span>

<span class="token annotation punctuation">@Component</span> <span class="token comment">// &#x4E00;&#x5B9A;&#x8981;&#x52A0;&#x4E0A;&#x8FD9;&#x4E2A;&#x6CE8;&#x89E3;&#xFF0C;&#x5426;&#x5219;&#x65E0;&#x6CD5;&#x626B;&#x63CF;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyLB</span> <span class="token keyword">implements</span> <span class="token class-name">LoadBalancer</span><span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">AtomicInteger</span> atomicInteger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AtomicInteger</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">int</span> <span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> current<span class="token punctuation">;</span>
        <span class="token keyword">int</span> next<span class="token punctuation">;</span>
        <span class="token keyword">do</span> <span class="token punctuation">{</span>
            current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>atomicInteger<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// &#x8FD9;&#x4E00;&#x4E32;&#x6570;&#x5B57;&#x662F; Integer.MAX_VALUE &#x7684;&#x503C;</span>
            next <span class="token operator">=</span> current <span class="token operator">&gt;=</span> <span class="token number">2147483647</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> current <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>atomicInteger<span class="token punctuation">.</span><span class="token function">compareAndSet</span><span class="token punctuation">(</span>current<span class="token punctuation">,</span>next<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &#x8FD9;&#x91CC;&#x4E0D;&#x8981;&#x5FD8;&#x8BB0;&#x52A0;&#x4E0A; &#xFF01;&#xFF0C;&#x4E0D;&#x7136;&#x6253;&#x5370;&#x7684;&#x7ED3;&#x679C;&#x51FA;&#x4E4E;&#x4F60;&#x7684;&#x610F;&#x6599;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;****** &#x7B2C; &quot;</span> <span class="token operator">+</span> next <span class="token operator">+</span> <span class="token string">&quot; &#x6B21;&#x8BBF;&#x95EE; ****** : &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &#x8FD4;&#x56DE;&#x7684;&#x662F;&#x7B2C;&#x51E0;&#x6B21;&#x8BBF;&#x95EE;</span>
        <span class="token keyword">return</span> next<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// &#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x7B97;&#x6CD5;&#xFF1A;REST &#x63A5;&#x53E3;&#x7B2C;&#x51E0;&#x6B21;&#x8BF7;&#x6C42;&#x6570; % &#x670D;&#x52A1;&#x5668;&#x96C6;&#x7FA4;&#x603B;&#x6570;&#x91CF; = &#x5B9E;&#x9645;&#x8C03;&#x7528;&#x670D;&#x52A1;&#x5668;&#x4F4D;&#x7F6E;&#x4E0B;&#x6807;&#xFF0C;&#x6BCF;&#x6B21;&#x670D;&#x52A1;&#x542F;&#x52A8;&#x540E; REST &#x63A5;&#x53E3;&#x8BA1;&#x6570;&#x4ECE; 1 &#x5F00;&#x59CB;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">ServiceInstance</span> <span class="token function">instances</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> serviceInstances<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span> serviceInstances<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> serviceInstances<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">12345678910111213141516171819202122232425262728293031323334353637</span>
</code></pre>
<p>&#x4FEE;&#x6539;&#x6D88;&#x8D39;&#x8005;&#x7AEF; Controller</p>
<pre class="language-"><code class="lang-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/consumer/payment/lb&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getPaymentLB</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// &#x83B7;&#x53D6;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ServiceInstance</span><span class="token punctuation">&gt;</span></span> instances <span class="token operator">=</span> discoveryClient<span class="token punctuation">.</span><span class="token function">getInstances</span><span class="token punctuation">(</span><span class="token string">&quot;DEMO-PROVIDER-PAYMENT&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>instances <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> instances<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// &#x4F7F;&#x7528;&#x81EA;&#x5B9A;&#x4E49;&#x7684;&#x8F6E;&#x8BE2;&#x7B97;&#x6CD5;</span>
    <span class="token class-name">ServiceInstance</span> serviceInstance <span class="token operator">=</span> loadBalancer<span class="token punctuation">.</span><span class="token function">instances</span><span class="token punctuation">(</span>instances<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">URI</span> uri <span class="token operator">=</span> serviceInstance<span class="token punctuation">.</span><span class="token function">getUri</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> restTemplate<span class="token punctuation">.</span><span class="token function">getForObject</span><span class="token punctuation">(</span>uri <span class="token operator">+</span> <span class="token string">&quot;/payment/lb&quot;</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token number">1234567891011121314</span>
</code></pre>
<p>&#x8BBF;&#x95EE;&#x9875;&#x9762;
<img src="https://img-blog.csdnimg.cn/20200327133842634.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
<img src="https://img-blog.csdnimg.cn/20200327133906555.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x51FA;
<img src="https://img-blog.csdnimg.cn/20200327133923398.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h1 id="openfeign">OpenFeign</h1>
<h2 id="&#x4EC0;&#x4E48;&#x662F;-openfeign&#xFF1F;">&#x4EC0;&#x4E48;&#x662F; OpenFeign&#xFF1F;</h2>
<p>Feign &#x662F;&#x4E00;&#x4E2A;&#x58F0;&#x660E;&#x5F0F; WebService &#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x4F7F;&#x7528; Feign &#x80FD;&#x8BA9;&#x7F16;&#x5199; Web Service &#x5BA2;&#x6237;&#x7AEF;&#x66F4;&#x52A0;&#x7B80;&#x5355;</p>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x5B83;&#x7684;&#x4F7F;&#x7528;&#x65B9;&#x6CD5;&#x662F; &#x5B9A;&#x4E49;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x7136;&#x540E;&#x5728;&#x4E0A;&#x9762;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;&#x3002;Feign &#x4E5F;&#x652F;&#x6301;&#x53EF;&#x63D2;&#x62D4;&#x5F0F;&#x7684;&#x7F16;&#x7801;&#x5668;&#x548C;&#x89E3;&#x7801;&#x5668;&#x3002;SpringCloud &#x5BF9; Feign &#x8FDB;&#x884C;&#x4E86;&#x5C01;&#x88C5;&#xFF0C;&#x4F7F;&#x5176;&#x652F;&#x6301;&#x4E86; SpringMVC &#x6807;&#x51C6;&#x6CE8;&#x89E3;&#x548C; HttpMessageConverters&#x3002;Feign &#x53EF;&#x4EE5;&#x4E0E; Eureka &#x548C; Ribbon &#x7EC4;&#x5408;&#x4F7F;&#x7528;&#x4EE5;&#x652F;&#x6301;&#x8D1F;&#x8F7D;&#x5747;&#x8861;</p>
<p>&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF1A;Feign &#x662F;&#x4E00;&#x4E2A;&#x58F0;&#x660E;&#x5F0F;&#x7684; Web &#x670D;&#x52A1;&#x5BA2;&#x6237;&#x7AEF;&#xFF0C;&#x8BA9;&#x7F16;&#x5199; Web &#x670D;&#x52A1;&#x5BA2;&#x6237;&#x7AEF;&#x53D8;&#x5F97;&#x975E;&#x5E38;&#x5BB9;&#x6613;&#xFF0C;&#x53EA;&#x9700;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x5E76;&#x5728;&#x63A5;&#x53E3;&#x4E0A;&#x6DFB;&#x52A0;&#x6CE8;&#x89E3;&#x5373;&#x53EF;</p>
<h2 id="feign-&#x80FD;&#x5E72;&#x4EC0;&#x4E48;&#xFF1F;">Feign &#x80FD;&#x5E72;&#x4EC0;&#x4E48;&#xFF1F;</h2>
<p>Feign &#x65E8;&#x5728;&#x4F7F;&#x7F16;&#x5199; Java Http &#x5BA2;&#x6237;&#x7AEF;&#x53D8;&#x5F97;&#x66F4;&#x52A0;&#x5BB9;&#x6613;</p>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x5728;&#x524D;&#x9762;&#x7684;&#x6587;&#x7AE0;&#x91CC;&#x4F7F;&#x7528; Ribbon + RestTemplate &#x65F6; <a href="https://blog.csdn.net/Woo_home/article/details/105125602" target="_blank">SpringCloud &#x2014;&#x2014; Ribbon
</a>&#xFF0C;&#x5229;&#x7528; RestTemplate &#x5BF9; http &#x8BF7;&#x6C42;&#x7684;&#x5C01;&#x88C5;&#x5904;&#x7406;&#xFF0C;&#x5F62;&#x6210;&#x4E86;&#x4E00;&#x5957;&#x6A21;&#x677F;&#x5316;&#x7684;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x3002;&#x4F46;&#x662F;&#x5728;&#x5B9E;&#x9645;&#x5F00;&#x53D1;&#x4E2D;&#xFF0C;&#x7531;&#x4E8E;&#x5BF9;&#x670D;&#x52A1;&#x4F9D;&#x8D56;&#x7684;&#x8C03;&#x7528;&#x53EF;&#x80FD;&#x4E0D;&#x6B62;&#x4E00;&#x5904;&#xFF0C;&#x5F80;&#x5F80;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x4F1A;&#x88AB;&#x591A;&#x5904;&#x8C03;&#x7528;&#xFF0C;&#x6240;&#x4EE5;&#x901A;&#x5E38;&#x4F1A;&#x9488;&#x5BF9;&#x6BCF;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x81EA;&#x884C;&#x5C01;&#x88C5;&#x4E00;&#x4E9B;&#x5BA2;&#x6237;&#x7AEF;&#x7C7B;&#x6765;&#x5305;&#x88C5;&#x8FD9;&#x4E9B;&#x4F9D;&#x8D56;&#x7684;&#x8C03;&#x7528;&#x3002;&#x6240;&#x4EE5;&#xFF0C;Feign &#x5728;&#x6B64;&#x57FA;&#x7840;&#x4E0A;&#x505A;&#x4E86;&#x8FDB;&#x4E00;&#x6B65;&#x5C01;&#x88C5;&#xFF0C;&#x7531;&#x4ED6;&#x6765;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5B9A;&#x4E49;&#x548C;&#x5B9E;&#x73B0;&#x4F9D;&#x8D56;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x7684;&#x5B9A;&#x4E49;&#x3002;</p>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x5728; Feign &#x7684;&#x5B9E;&#x73B0;&#x4E0B;&#xFF0C;&#x6211;&#x4EEC; &#x53EA;&#x9700;&#x521B;&#x5EFA;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x5E76;&#x4F7F;&#x7528;&#x6CE8;&#x89E3;&#x7684;&#x65B9;&#x5F0F;&#x6765;&#x914D;&#x7F6E;&#x5B83;&#xFF08;&#x4EE5;&#x524D;&#x662F; Dao &#x63A5;&#x53E3;&#x4E0A;&#x9762;&#x6807;&#x6CE8; @Mapper &#x6CE8;&#x89E3;&#xFF0C;&#x73B0;&#x5728;&#x662F;&#x4E00;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x63A5;&#x53E3;&#x4E0A;&#x9762;&#x6807;&#x6CE8;&#x4E00;&#x4E2A; @Feign &#x6CE8;&#x89E3;&#x5373;&#x53EF;&#xFF09;&#xFF0C;&#x5373;&#x53EF;&#x5B8C;&#x6210;&#x5BF9;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x65B9;&#x7684;&#x63A5;&#x53E3;&#x7ED1;&#x5B9A;&#xFF0C;&#x7B80;&#x5316;&#x4E86;&#x4F7F;&#x7528; SpringCloud Ribbon &#x65F6;&#x81EA;&#x52A8;&#x5C01;&#x88C5;&#x670D;&#x52A1;&#x8C03;&#x7528;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x5F00;&#x53D1;&#x91CF;</p>
<h2 id="feign-&#x96C6;&#x6210;&#x4E86;-ribbon">Feign &#x96C6;&#x6210;&#x4E86; Ribbon</h2>
<p><img src="https://img-blog.csdnimg.cn/20200328015350128.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x2002;&#x2002;&#x2002;&#x2002;&#x5229;&#x7528; Ribbon &#x7EF4;&#x62A4;&#x4E86;&#x63D0;&#x4F9B;&#x65B9;&#x7684;&#x670D;&#x52A1;&#x5217;&#x8868;&#x4FE1;&#x606F;&#xFF0C;&#x5E76;&#x4E14;&#x901A;&#x8FC7;&#x8F6E;&#x8BE2;&#x5B9E;&#x73B0;&#x4E86;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8D1F;&#x8F7D;&#x5747;&#x8861;&#x3002;&#x800C;&#x4E0E; Ribbon &#x4E0D;&#x540C;&#x7684;&#x662F;&#xFF0C;&#x901A;&#x8FC7; Feign &#x53EA;&#x9700;&#x8981;&#x5B9A;&#x4E49;&#x670D;&#x52A1;&#x7ED1;&#x5B9A;&#x63A5;&#x53E3;&#x4E14;&#x4EE5;&#x58F0;&#x660E;&#x5F0F;&#x7684;&#x65B9;&#x6CD5;&#xFF0C;&#x4F18;&#x96C5;&#x800C;&#x7B80;&#x5355;&#x7684;&#x5B9E;&#x73B0;&#x4E86;&#x670D;&#x52A1;&#x8C03;&#x7528;</p>
<h2 id="feign-&#x548C;-openfeign-&#x7684;&#x533A;&#x522B;">Feign &#x548C; OpenFeign &#x7684;&#x533A;&#x522B;</h2>
<p><img src="https://img-blog.csdnimg.cn/20200327203841619.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h2 id="&#x65B0;&#x5EFA;-module&#xFF08;80&#xFF09;">&#x65B0;&#x5EFA; Module&#xFF08;80&#xFF09;</h2>
<p><img src="https://img-blog.csdnimg.cn/20200327204559430.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="&#x7F16;&#x5199;-applicationyml-&#x6587;&#x4EF6;">&#x7F16;&#x5199; application.yml &#x6587;&#x4EF6;</h3>
<pre class="language-"><code class="lang-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defualtZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com/eureka/
12345678
</code></pre>
<h3 id="&#x7F16;&#x5199;&#x542F;&#x52A8;&#x7C7B;">&#x7F16;&#x5199;&#x542F;&#x52A8;&#x7C7B;</h3>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">EnableFeignClients</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/27 20:48
 */</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableFeignClients</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderOpenFeignMain80</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">OrderOpenFeignMain80</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718</span>
</code></pre>
<h3 id="&#x7F16;&#x5199;&#x4E1A;&#x52A1;&#x63A5;&#x53E3;">&#x7F16;&#x5199;&#x4E1A;&#x52A1;&#x63A5;&#x53E3;</h3>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">CommonResult</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Payment</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">FeignClient</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/27 20:50
 */</span>

<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;DEMO-PROVIDER-PAYMENT&quot;</span><span class="token punctuation">)</span> <span class="token comment">// &#x670D;&#x52A1;&#x5B9E;&#x4F8B;&#x540D;&#x79F0;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OpenFeignPaymentService</span> <span class="token punctuation">{</span>

    <span class="token comment">// &#x8DDF; 8001 &#x7684;&#x8BBF;&#x95EE;&#x8DEF;&#x5F84;&#x4E00;&#x81F4;</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/get/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPayment</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token number">12345678910111213141516171819202122</span>
</code></pre>
<h3 id="&#x7F16;&#x5199;&#x63A7;&#x5236;&#x5668;&#x4EE3;&#x7801;">&#x7F16;&#x5199;&#x63A7;&#x5236;&#x5668;&#x4EE3;&#x7801;</h3>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">CommonResult</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">Payment</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">OpenFeignPaymentService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/27 20:56
 */</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenFeignController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">OpenFeignPaymentService</span> paymentFeignService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/consumer/payment/get/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">CommonResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Payment</span><span class="token punctuation">&gt;</span></span> <span class="token function">getPaymentById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x4F7F;&#x7528;&#x63A5;&#x53E3;&#x8C03;&#x7528;&#x670D;&#x52A1;</span>
        <span class="token keyword">return</span> paymentFeignService<span class="token punctuation">.</span><span class="token function">getPayment</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token number">123456789101112131415161718192021222324252627282930</span>
</code></pre>
<h3 id="&#x542F;&#x52A8;&#x670D;&#x52A1;">&#x542F;&#x52A8;&#x670D;&#x52A1;</h3>
<p><img src="https://img-blog.csdnimg.cn/20200328000251513.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x5148;&#x540E;&#x542F;&#x52A8; 8001&#x3001;8002&#x3001;7001&#x3001;7002&#xFF0C;&#x6700;&#x540E;&#x542F;&#x52A8;&#x65B0;&#x5EFA;&#x7684; OrderOpenFeignMain80
<img src="https://img-blog.csdnimg.cn/20200327213608821.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x8FDE;&#x7EED;&#x5237;&#x65B0;&#x9875;&#x9762;
<img src="https://img-blog.csdnimg.cn/2020032721344456.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
<img src="https://img-blog.csdnimg.cn/20200327213510983.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
OK&#xFF0C;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x8F6E;&#x8BE2;&#x8BBF;&#x95EE;</p>
<h2 id="openfeign-&#x8D85;&#x65F6;&#x63A7;&#x5236;">OpenFeign &#x8D85;&#x65F6;&#x63A7;&#x5236;</h2>
<h3 id="&#x8D85;&#x65F6;&#x6F14;&#x793A;&#x51FA;&#x9519;&#x60C5;&#x51B5;">&#x8D85;&#x65F6;&#x6F14;&#x793A;&#x51FA;&#x9519;&#x60C5;&#x51B5;</h3>
<p><img src="https://img-blog.csdnimg.cn/20200328011358385.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x65B9;-8001-&#x6545;&#x610F;&#x5199;&#x6682;&#x505C;&#x7A0B;&#x5E8F;">&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x65B9; 8001 &#x6545;&#x610F;&#x5199;&#x6682;&#x505C;&#x7A0B;&#x5E8F;</h3>
<p><img src="https://img-blog.csdnimg.cn/20200328011921260.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x65B9;-80-&#x6DFB;&#x52A0;&#x8D85;&#x65F6;&#x65B9;&#x6CD5;-openfeignpaymentservice">&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x65B9; 80 &#x6DFB;&#x52A0;&#x8D85;&#x65F6;&#x65B9;&#x6CD5; OpenFeignPaymentService</h3>
<p><img src="https://img-blog.csdnimg.cn/20200328012003576.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x65B9;-80-&#x6DFB;&#x52A0;&#x8D85;&#x65F6;&#x65B9;&#x6CD5;-openfeigncontroller">&#x670D;&#x52A1;&#x6D88;&#x8D39;&#x65B9; 80 &#x6DFB;&#x52A0;&#x8D85;&#x65F6;&#x65B9;&#x6CD5; OpenFeignController</h3>
<p><img src="https://img-blog.csdnimg.cn/20200328012537154.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="&#x6D4B;&#x8BD5;">&#x6D4B;&#x8BD5;</h3>
<p><img src="https://img-blog.csdnimg.cn/2020032801120973.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x62A5;&#x9519;&#x9875;&#x9762;&#xFF0C;&#x56E0;&#x4E3A; Feign &#x5BA2;&#x6237;&#x7AEF;&#x53EA;&#x7B49;&#x5F85;&#x4E00;&#x79D2;&#x949F;&#xFF0C;&#x5BFC;&#x81F4; Feign &#x5BA2;&#x6237;&#x7AEF;&#x4E0D;&#x60F3;&#x7B49;&#x5F85;&#x4E86;&#xFF0C;&#x76F4;&#x63A5;&#x8FD4;&#x56DE;&#x62A5;&#x9519;
<img src="https://img-blog.csdnimg.cn/20200328011358385.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="&#x4FEE;&#x6539;-applicationyml-&#x5F00;&#x542F;-openfeign-&#x5BA2;&#x6237;&#x7AEF;&#x8D85;&#x65F6;&#x63A7;&#x5236;">&#x4FEE;&#x6539; application.yml &#x5F00;&#x542F; OpenFeign &#x5BA2;&#x6237;&#x7AEF;&#x8D85;&#x65F6;&#x63A7;&#x5236;</h3>
<p>&#x4E3A;&#x4E86;&#x907F;&#x514D;&#x8FD9;&#x6837;&#x7684;&#x60C5;&#x51B5;&#xFF0C;&#x6709;&#x65F6;&#x5019;&#x6211;&#x4EEC;&#x9700;&#x8981;&#x8BBE;&#x7F6E; Feign &#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x8D85;&#x65F6;&#x63A7;&#x5236;&#xFF0C;&#x5982;&#x4E0B;&#xFF1A;</p>
<pre class="language-"><code class="lang-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka/

<span class="token comment"># &#x8BBE;&#x7F6E; feign &#x5BA2;&#x6237;&#x7AEF;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#xFF08;OpenFeign &#x9ED8;&#x8BA4;&#x652F;&#x6301; Ribbon&#xFF09;</span>
<span class="token key atrule">ribbon</span><span class="token punctuation">:</span>
  <span class="token comment"># &#x6307;&#x7684;&#x662F;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x6240;&#x7528;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x7F51;&#x7EDC;&#x72B6;&#x51B5;&#x6B63;&#x5E38;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E24;&#x7AEF;&#x8FDE;&#x63A5;&#x6240;&#x7528;&#x7684;&#x65F6;&#x95F4;</span>
  <span class="token key atrule">ReadTimeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>
  <span class="token comment"># &#x6307;&#x7684;&#x662F;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x540E;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8BFB;&#x53D6;&#x5230;&#x53EF;&#x7528;&#x8D44;&#x6E90;&#x6240;&#x7528;&#x7684;&#x65F6;&#x95F4;</span>
  <span class="token key atrule">ConnectTimeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>
123456789101112131415
</code></pre>
<p>&#x518D;&#x6765;&#x6D4B;&#x8BD5;&#x4E0B;
<img src="https://img-blog.csdnimg.cn/2020032802002719.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x6B63;&#x5E38;&#x8BBF;&#x95EE;
&#x5728; application.yml &#x6587;&#x4EF6;&#x4E2D;&#x5F00;&#x542F;&#x914D;&#x7F6E;</p>
<h2 id="openfeign-&#x65E5;&#x5FD7;&#x6253;&#x5370;&#x529F;&#x80FD;">OpenFeign &#x65E5;&#x5FD7;&#x6253;&#x5370;&#x529F;&#x80FD;</h2>
<p>Feign &#x63D0;&#x4F9B;&#x4E86;&#x65E5;&#x5FD7;&#x6253;&#x5370;&#x529F;&#x80FD;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x901A;&#x8FC7;&#x914D;&#x7F6E;&#x6765;&#x8C03;&#x6574;&#x65E5;&#x5FD7;&#x7EA7;&#x522B;&#xFF0C;&#x4ECE;&#x800C;&#x4E86;&#x89E3; Feign &#x4E2D; HTTP &#x8BF7;&#x6C42;&#x7EC6;&#x8282;</p>
<p>&#x7B80;&#x5355;&#x5730;&#x8BF4;&#xFF1A;&#x5C31;&#x662F; &#x5BF9; Feign &#x63A5;&#x53E3;&#x7684;&#x8C03;&#x7528;&#x60C5;&#x51B5;&#x8FDB;&#x884C;&#x76D1;&#x63A7;&#x548C;&#x8F93;&#x51FA;</p>
<h3 id="&#x65E5;&#x5FD7;&#x7EA7;&#x522B;">&#x65E5;&#x5FD7;&#x7EA7;&#x522B;</h3>
<ul>
<li>NONE&#xFF1A;&#x9ED8;&#x8BA4;&#x7684;&#xFF0C;&#x4E0D;&#x663E;&#x793A;&#x4EFB;&#x4F55;&#x65E5;&#x5FD7;</li>
<li>BASIC&#xFF1A;&#x4EC5;&#x8BB0;&#x5F55;&#x8BF7;&#x6C42;&#x65B9;&#x6CD5;&#x3001;URL&#x3001;&#x54CD;&#x5E94;&#x72B6;&#x6001;&#x7801;&#x4EE5;&#x53CA;&#x6267;&#x884C;&#x65F6;&#x95F4;</li>
<li>HEADERS&#xFF1A;&#x9664;&#x4E86; BASIC &#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x4FE1;&#x606F;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x7684;&#x5934;&#x4FE1;&#x606F;</li>
<li>FULL&#xFF1A;&#x9664;&#x4E86; HEADERS &#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x4FE1;&#x606F;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x7684;&#x6B63;&#x6587;&#x53CA;&#x5143;&#x6570;&#x636E;</li>
</ul>
<h3 id="&#x914D;&#x7F6E;-bean">&#x914D;&#x7F6E; Bean</h3>
<p><img src="image/springcloud/&#x914D;&#x7F6E; Bean.png" alt="&#x914D;&#x7F6E; Bean"></p>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">feign<span class="token punctuation">.</span></span><span class="token class-name">Logger</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 2:06
 */</span>

<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FeignConfig</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">Logger<span class="token punctuation">.</span>Level</span> <span class="token function">feignLoggerLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x9664;&#x4E86; HEADERS &#x4E2D;&#x5B9A;&#x4E49;&#x7684;&#x4FE1;&#x606F;&#x4E4B;&#x5916;&#xFF0C;&#x8FD8;&#x6709;&#x8BF7;&#x6C42;&#x548C;&#x54CD;&#x5E94;&#x7684;&#x6B63;&#x6587;&#x53CA;&#x5143;&#x6570;&#x636E;</span>
        <span class="token keyword">return</span> <span class="token class-name">Logger<span class="token punctuation">.</span>Level</span><span class="token punctuation">.</span>FULL<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718192021</span>
</code></pre>
<h3 id="&#x4FEE;&#x6539;-applicationyml-&#x6587;&#x4EF6;">&#x4FEE;&#x6539; application.yml &#x6587;&#x4EF6;</h3>
<pre class="language-"><code class="lang-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/<span class="token punctuation">,</span>http<span class="token punctuation">:</span>//eureka7002.com<span class="token punctuation">:</span>7002/eureka/
<span class="token comment">#&#x8BBE;&#x7F6E;feign&#x5BA2;&#x6237;&#x7AEF;&#x8D85;&#x65F6;&#x65F6;&#x95F4;(OpenFeign&#x9ED8;&#x8BA4;&#x652F;&#x6301;ribbon)</span>
<span class="token key atrule">ribbon</span><span class="token punctuation">:</span>
  <span class="token comment">#&#x6307;&#x7684;&#x662F;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x6240;&#x7528;&#x7684;&#x65F6;&#x95F4;&#xFF0C;&#x9002;&#x7528;&#x4E8E;&#x7F51;&#x7EDC;&#x72B6;&#x51B5;&#x6B63;&#x5E38;&#x7684;&#x60C5;&#x51B5;&#x4E0B;,&#x4E24;&#x7AEF;&#x8FDE;&#x63A5;&#x6240;&#x7528;&#x7684;&#x65F6;&#x95F4;</span>
  <span class="token key atrule">ReadTimeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>
  <span class="token comment">#&#x6307;&#x7684;&#x662F;&#x5EFA;&#x7ACB;&#x8FDE;&#x63A5;&#x540E;&#x4ECE;&#x670D;&#x52A1;&#x5668;&#x8BFB;&#x53D6;&#x5230;&#x53EF;&#x7528;&#x8D44;&#x6E90;&#x6240;&#x7528;&#x7684;&#x65F6;&#x95F4;</span>
  <span class="token key atrule">ConnectTimeout</span><span class="token punctuation">:</span> <span class="token number">5000</span>

<span class="token key atrule">logging</span><span class="token punctuation">:</span>
  <span class="token key atrule">level</span><span class="token punctuation">:</span>
    <span class="token comment"># Feign &#x65E5;&#x5FD7;&#x4EE5;&#x4EC0;&#x4E48;&#x7EA7;&#x522B;&#x76D1;&#x63A7;&#x54EA;&#x4E2A;&#x63A5;&#x53E3;&#xFF08;&#x8FD9;&#x91CC;&#x626B;&#x63CF;&#x7684;&#x662F;&#x63A5;&#x53E3;&#xFF09;</span>
    <span class="token key atrule">com.java.springcloud.service.OpenFeignPaymentService</span><span class="token punctuation">:</span> debug
12345678910111213141516171819
</code></pre>
<h3 id="&#x542F;&#x52A8;&#x670D;&#x52A1;&#x8BBF;&#x95EE;&#x9875;&#x9762;">&#x542F;&#x52A8;&#x670D;&#x52A1;&#x8BBF;&#x95EE;&#x9875;&#x9762;</h3>
<p><img src="image/springcloud/&#x670D;&#x52A1;&#x8BBF;&#x95EE;&#x9875;&#x9762;.png" alt="&#x670D;&#x52A1;&#x8BBF;&#x95EE;&#x9875;&#x9762;"></p>
<h3 id="&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x51FA;">&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x51FA;</h3>
<p><img src="image/springcloud/&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x51FA;.png" alt="&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x51FA;"></p>
<h1 id="hystrix-&#x7B80;&#x4ECB;">Hystrix &#x7B80;&#x4ECB;</h1>
<p><a href="https://github.com/Netflix/Hystrix/wiki/How-To-Use" target="_blank">&#x6587;&#x6863;</a></p>
<h2 id="&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x9762;&#x4E34;&#x7684;&#x95EE;&#x9898;">&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x9762;&#x4E34;&#x7684;&#x95EE;&#x9898;</h2>
<p>&#x590D;&#x6742;&#x5206;&#x5E03;&#x5F0F;&#x4F53;&#x7CFB;&#x7ED3;&#x6784;&#x4E2D;&#x7684;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6709;&#x6570;&#x5341;&#x4E2A;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#xFF0C;&#x6BCF;&#x4E2A;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x5728;&#x67D0;&#x4E9B;&#x65F6;&#x5019;&#x5C06;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x5730;&#x5931;&#x8D25;</p>
<h3 id="&#x670D;&#x52A1;&#x96EA;&#x5D29;">&#x670D;&#x52A1;&#x96EA;&#x5D29;</h3>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x591A;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x8C03;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5047;&#x8BBE;&#x5FAE;&#x670D;&#x52A1; A &#x8C03;&#x7528;&#x5FAE;&#x670D;&#x52A1; B &#x548C; &#x5FAE;&#x670D;&#x52A1; C&#xFF0C;&#x5FAE;&#x670D;&#x52A1; B &#x548C;&#x5FAE;&#x670D;&#x52A1; C &#x53C8;&#x8C03;&#x7528;&#x5176;&#x5B83;&#x7684;&#x5FAE;&#x670D;&#x52A1;&#xFF0C;&#x8FD9;&#x5C31;&#x662F;&#x6240;&#x8C13;&#x7684; &#x201C;&#x6247;&#x51FA;&#x201D;&#x3002;&#x5982;&#x679C;&#x6247;&#x51FA;&#x7684;&#x94FE;&#x8DEF;&#x4E0A;&#x67D0;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x8C03;&#x7528;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x8FC7;&#x957F;&#x6216;&#x8005;&#x4E0D;&#x53EF;&#x7528;&#xFF0C;&#x5BF9;&#x5FAE;&#x670D;&#x52A1; A &#x7684;&#x8C03;&#x7528;&#x5C31;&#x4F1A;&#x5360;&#x7528;&#x8D8A;&#x6765;&#x8D8A;&#x591A;&#x7684;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#xFF0C;&#x8FDB;&#x800C;&#x5F15;&#x8D77;&#x7CFB;&#x7EDF;&#x5D29;&#x6E83;&#xFF0C;&#x6240;&#x8C13;&#x7684; &#x201C;&#x96EA;&#x5D29;&#x6548;&#x5E94;&#x201D;</p>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x5BF9;&#x4E8E;&#x9AD8;&#x6D41;&#x91CF;&#x7684;&#x5E94;&#x7528;&#x6765;&#x8BF4;&#xFF0C;&#x5355;&#x4E00;&#x7684;&#x540E;&#x7AEF;&#x4F9D;&#x8D56;&#x53EF;&#x80FD;&#x4F1A;&#x5BFC;&#x81F4;&#x6240;&#x6709;&#x670D;&#x52A1;&#x5668;&#x4E0A;&#x7684;&#x6240;&#x6709;&#x8D44;&#x6E90;&#x90FD;&#x5728;&#x51E0;&#x79D2;&#x949F;&#x5185;&#x9971;&#x548C;&#x3002;&#x6BD4;&#x5931;&#x8D25;&#x66F4;&#x7CDF;&#x7CD5;&#x7684;&#x662F;&#xFF0C;&#x8FD9;&#x4E9B;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x8FD8;&#x53EF;&#x80FD;&#x5BFC;&#x81F4;&#x670D;&#x52A1;&#x4E4B;&#x95F4;&#x7684;&#x5EF6;&#x8FDF;&#x589E;&#x52A0;&#xFF0C;&#x5907;&#x4EFD;&#x961F;&#x5217;&#xFF0C;&#x7EBF;&#x7A0B;&#x548C;&#x5176;&#x5B83;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#x7D27;&#x5F20;&#xFF0C;&#x5BFC;&#x81F4;&#x6574;&#x4E2A;&#x7CFB;&#x7EDF;&#x53D1;&#x751F;&#x66F4;&#x591A;&#x7684;&#x7EA7;&#x8054;&#x6545;&#x969C;&#x3002;&#x8FD9;&#x4E9B;&#x90FD;&#x8868;&#x793A;&#x9700;&#x8981;&#x5BF9;&#x6545;&#x969C;&#x548C;&#x5EF6;&#x8FDF;&#x8FDB;&#x884C;&#x9694;&#x79BB;&#x548C;&#x7BA1;&#x7406;&#xFF0C;&#x4EE5;&#x4FBF;&#x5355;&#x4E2A;&#x4F9D;&#x8D56;&#x5173;&#x7CFB;&#x7684;&#x5931;&#x8D25;&#xFF0C;&#x4E0D;&#x80FD;&#x53D6;&#x6D88;&#x6574;&#x4E2A;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6216;&#x7CFB;&#x7EDF;</p>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x6240;&#x4EE5;&#xFF0C;&#x901A;&#x5E38;&#x5F53;&#x4F60;&#x53D1;&#x73B0;&#x4E00;&#x4E2A;&#x6A21;&#x5757;&#x4E0B;&#x7684;&#x67D0;&#x4E2A;&#x5B9E;&#x4F8B;&#x5931;&#x8D25;&#x540E;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x8FD9;&#x4E2A;&#x6A21;&#x5757;&#x4F9D;&#x7136;&#x8FD8;&#x4F1A;&#x63A5;&#x6536;&#x6D41;&#x91CF;&#xFF0C;&#x7136;&#x540E;&#x8FD9;&#x4E2A;&#x6709;&#x95EE;&#x9898;&#x7684;&#x6A21;&#x5757;&#x8FD8;&#x8C03;&#x7528;&#x4E86;&#x5176;&#x5B83;&#x7684;&#x6A21;&#x5757;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4F1A;&#x53D1;&#x751F;&#x7EA7;&#x8054;&#x6545;&#x969C;&#xFF0C;&#x6216;&#x8005;&#x53EB;&#x96EA;&#x5D29;</p>
<h2 id="hystrix-&#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#xFF08;&#x6982;&#x5FF5;&#xFF09;">Hystrix &#x662F;&#x4EC0;&#x4E48;&#xFF1F;&#xFF08;&#x6982;&#x5FF5;&#xFF09;</h2>
<p>&#x2002;&#x2002;&#x2002;&#x2002;Hystrix &#x662F;&#x4E00;&#x4E2A;&#x7528;&#x4E8E;&#x5904;&#x7406;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7684; &#x5EF6;&#x8FDF; &#x548C; &#x5BB9;&#x9519;&#x7684;&#x5F00;&#x6E90;&#x5E93;&#xFF0C;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x91CC;&#xFF0C;&#x8BB8;&#x591A;&#x4F9D;&#x8D56;&#x4E0D;&#x53EF;&#x907F;&#x514D;&#x7684;&#x4F1A;&#x8C03;&#x7528;&#x5931;&#x8D25;&#xFF0C;&#x6BD4;&#x5982;&#x8D85;&#x65F6;&#x3001;&#x5F02;&#x5E38;&#x7B49;&#xFF0C;Hystrix &#x80FD;&#x591F;&#x4FDD;&#x8BC1;&#x5728;&#x4E00;&#x4E2A;&#x4F9D;&#x8D56;&#x51FA;&#x95EE;&#x9898;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4E0D;&#x4F1A;&#x5BFC;&#x81F4;&#x6574;&#x4F53;&#x670D;&#x52A1;&#x5931;&#x8D25;&#xFF0C;&#x907F;&#x514D;&#x7EA7;&#x8054;&#x6545;&#x969C;&#xFF0C;&#x4EE5;&#x63D0;&#x9AD8;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x7684;&#x5F39;&#x6027;</p>
<p>&#x2002;&#x2002;&#x2002;&#x2002;&#x201C;&#x65AD;&#x8DEF;&#x5668;&#x201D; &#x672C;&#x8EAB;&#x662F;&#x4E00;&#x79CD;&#x5F00;&#x5173;&#x88C5;&#x7F6E;&#xFF0C;&#x5F53;&#x67D0;&#x4E2A;&#x670D;&#x52A1;&#x5355;&#x5143;&#x53D1;&#x751F;&#x6545;&#x969C;&#x4E4B;&#x540E;&#xFF0C;&#x901A;&#x8FC7;&#x65AD;&#x8DEF;&#x5668;&#x7684;&#x6545;&#x969C;&#x76D1;&#x63A7;&#xFF08;&#x7C7B;&#x4F3C;&#x7194;&#x65AD;&#x4FDD;&#x9669;&#x4E1D;&#xFF09;&#xFF0C;&#x5411;&#x8C03;&#x7528;&#x653E;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x7B26;&#x5408;&#x9884;&#x671F;&#x7684;&#x3001;&#x53EF;&#x5904;&#x7406;&#x7684;&#x5907;&#x9009;&#x54CD;&#x5E94;&#xFF08;FallBack&#xFF09;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x957F;&#x65F6;&#x95F4;&#x7684;&#x7B49;&#x5F85;&#x6216;&#x8005;&#x629B;&#x51FA;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x5904;&#x7406;&#x7684;&#x5F02;&#x5E38;&#xFF0C;&#x8FD9;&#x6837;&#x5C31;&#x4FDD;&#x8BC1;&#x4E86;&#x670D;&#x52A1;&#x8C03;&#x7528;&#x65B9;&#x6CD5;&#x7684;&#x7EBF;&#x7A0B;&#x4E0D;&#x4F1A;&#x88AB;&#x957F;&#x65F6;&#x95F4;&#x3001;&#x4E0D;&#x5FC5;&#x8981;&#x7684;&#x5360;&#x7528;&#xFF0C;&#x4ECE;&#x800C;&#x907F;&#x514D;&#x4E86;&#x6545;&#x969C;&#x5728;&#x5206;&#x5E03;&#x5F0F;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x8513;&#x5EF6;&#xFF0C;&#x4E43;&#x81F3;&#x96EA;&#x5D29;</p>
<h2 id="hystrix-&#x80FD;&#x5E72;&#x4EC0;&#x4E48;&#xFF1F;">Hystrix &#x80FD;&#x5E72;&#x4EC0;&#x4E48;&#xFF1F;</h2>
<h3 id="&#x670D;&#x52A1;&#x964D;&#x7EA7;">&#x670D;&#x52A1;&#x964D;&#x7EA7;</h3>
<p>&#x5F53;&#x670D;&#x52A1;&#x5668;&#x5FD9;&#xFF0C;&#x8BF7;&#x7A0D;&#x540E;&#x518D;&#x8BD5;&#xFF0C;&#x4E0D;&#x8BA9;&#x5BA2;&#x6237;&#x7AEF;&#x7B49;&#x5F85;&#x5E76;&#x7ACB;&#x5373;&#x8FD4;&#x56DE;&#x4E00;&#x4E2A;&#x53CB;&#x597D;&#x7684; fallback</p>
<h4 id="&#x54EA;&#x4E9B;&#x60C5;&#x51B5;&#x4F1A;&#x89E6;&#x53D1;&#x964D;&#x7EA7;&#xFF1F;">&#x54EA;&#x4E9B;&#x60C5;&#x51B5;&#x4F1A;&#x89E6;&#x53D1;&#x964D;&#x7EA7;&#xFF1F;</h4>
<ul>
<li>&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x5F02;&#x5E38;</li>
<li>&#x8D85;&#x65F6;</li>
<li>&#x670D;&#x52A1;&#x7194;&#x65AD;&#x89E6;&#x53D1;&#x670D;&#x52A1;&#x964D;&#x7EA7;</li>
<li>&#x7EBF;&#x7A0B;&#x6C60; / &#x4FE1;&#x53F7;&#x91CF;&#x6253;&#x6EE1;&#x4E5F;&#x4F1A;&#x5BFC;&#x81F4;&#x670D;&#x52A1;&#x964D;&#x7EA7;</li>
</ul>
<h3 id="&#x670D;&#x52A1;&#x7194;&#x65AD;">&#x670D;&#x52A1;&#x7194;&#x65AD;</h3>
<p>&#x7C7B;&#x4F3C;&#x4FDD;&#x9669;&#x4E1D;&#x8FBE;&#x5230;&#x6700;&#x5927;&#x670D;&#x52A1;&#x8BBF;&#x95EE;&#x540E;&#xFF0C;&#x76F4;&#x63A5;&#x62D2;&#x7EDD;&#x8BBF;&#x95EE;&#xFF0C;&#x62C9;&#x95F8;&#x9650;&#x7535;&#xFF0C;&#x7136;&#x540E;&#x8C03;&#x7528;&#x670D;&#x52A1;&#x964D;&#x7EA7;&#x7684;&#x65B9;&#x6CD5;&#x5E76;&#x8FD4;&#x56DE;&#x53CB;&#x597D;&#x7684;&#x63D0;&#x793A;</p>
<p>&#x670D;&#x52A1;&#x964D;&#x7EA7; &#x2014;&#x2014;&gt; &#x8FDB;&#x800C;&#x7194;&#x65AD; &#x2014;&#x2014;&gt; &#x6062;&#x590D;&#x8C03;&#x7528;&#x94FE;&#x8DEF;</p>
<h3 id="&#x670D;&#x52A1;&#x9650;&#x6D41;">&#x670D;&#x52A1;&#x9650;&#x6D41;</h3>
<p>&#x79D2;&#x6740;&#x9AD8;&#x5E76;&#x53D1;&#x7B49;&#x64CD;&#x4F5C;&#xFF0C;&#x4E25;&#x7981;&#x4E00;&#x7A9D;&#x8702;&#x7684;&#x8FC7;&#x6765;&#x62E5;&#x6324;&#xFF0C;&#x5927;&#x5BB6;&#x6392;&#x961F;&#xFF0C;&#x4E00;&#x79D2;&#x949F; N &#x4E2A;&#xFF0C;&#x6709;&#x5E8F;&#x5730;&#x8FDB;&#x884C;</p>
<h2 id="hystrix-&#x5B9E;&#x6218;">Hystrix &#x5B9E;&#x6218;</h2>
<h3 id="&#x6784;&#x5EFA;&#x9879;&#x76EE;-8001&#xFF08;&#x63D0;&#x4F9B;&#x8005;&#xFF09;">&#x6784;&#x5EFA;&#x9879;&#x76EE; 8001&#xFF08;&#x63D0;&#x4F9B;&#x8005;&#xFF09;</h3>
<p>&#x65B0;&#x5EFA; Module 8001</p>
<h4 id="&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;">&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h4>
<pre class="language-"><code class="lang-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--hystrix--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--eureka client--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--web--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- &#x5F15;&#x5165;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;api&#x901A;&#x7528;&#x5305;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Payment&#x652F;&#x4ED8;Entity --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
123456789101112131415161718192021222324252627282930313233343536373839404142
</code></pre>
<h4 id="&#x7F16;&#x5199;-applicationyml-&#x6587;&#x4EF6;">&#x7F16;&#x5199; application.yml &#x6587;&#x4EF6;</h4>
<pre class="language-"><code class="lang-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8001</span>

<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> demo<span class="token punctuation">-</span>provider<span class="token punctuation">-</span>hystrix<span class="token punctuation">-</span>payment

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">fetch-registry</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/
12345678910111213
</code></pre>
<h4 id="&#x7F16;&#x5199;-service">&#x7F16;&#x5199; Service</h4>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 12:33
 */</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentService</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * &#x6B63;&#x5E38;&#x8BBF;&#x95EE;
     * @param id
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;paymentInfo_OK,id :&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> timeNumber <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>timeNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;paymentInfo_OK,id :&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&#x8017;&#x65F6; &quot;</span> <span class="token operator">+</span> timeNumber <span class="token operator">+</span> <span class="token string">&quot; s&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token number">12345678910111213141516171819202122232425262728293031323334</span>
</code></pre>
<h4 id="&#x7F16;&#x5199;-controller">&#x7F16;&#x5199; Controller</h4>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span></span><span class="token class-name">Controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">PaymentService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Value</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 12:39
 */</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">PaymentService</span> paymentService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;${server.port}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> serverPort<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/hystrix/ok/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> paymentService<span class="token punctuation">.</span><span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;****** result ****** &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> paymentService<span class="token punctuation">.</span><span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;****** result ****** &quot;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">12345678910111213141516171819202122232425262728293031323334353637383940</span>
</code></pre>
<h4 id="&#x7F16;&#x5199;&#x542F;&#x52A8;&#x7C7B;">&#x7F16;&#x5199;&#x542F;&#x52A8;&#x7C7B;</h4>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>eureka<span class="token punctuation">.</span></span><span class="token class-name">EnableEurekaClient</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 12:52
 */</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableEurekaClient</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HystrixPaymentMain8001</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HystrixPaymentMain8001</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718</span>
</code></pre>
<h4 id="&#x6D4B;&#x8BD5;">&#x6D4B;&#x8BD5;</h4>
<p>&#x542F;&#x52A8;&#x670D;&#x52A1;&#x7AEF; 7001&#xFF0C;&#x542F;&#x52A8;&#x5BA2;&#x6237;&#x7AEF; 8001&#xFF0C;&#x8BBF;&#x95EE; <a href="http://eureka7001.com:7001/" target="_blank">http://eureka7001.com:7001/</a></p>
<p>&#x6210;&#x529F;&#x6CE8;&#x518C;&#x5230; Eureka
<img src="https://img-blog.csdnimg.cn/2020032813003157.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
<img src="https://img-blog.csdnimg.cn/20200328130007325.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x4E5F;&#x80FD;&#x6B63;&#x5E38;&#x8BBF;&#x95EE; <a href="http://localhost:8001/payment/hystrix/ok/1" target="_blank">http://localhost:8001/payment/hystrix/ok/1</a> &#x548C; <a href="http://localhost:8001/payment/hystrix/timeout/1" target="_blank">http://localhost:8001/payment/hystrix/timeout/1</a>
<img src="https://img-blog.csdnimg.cn/20200328130151252.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
<img src="https://img-blog.csdnimg.cn/20200328130706498.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x51FA;&#xFF1A;
<img src="https://img-blog.csdnimg.cn/20200328130656454.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h1 id="springcloud-&#x2014;&#x2014;-hystrix-&#x65AD;&#x8DEF;&#x5668;">SpringCloud &#x2014;&#x2014; Hystrix &#x65AD;&#x8DEF;&#x5668;</h1>
<h2 id="&#x9AD8;&#x5E76;&#x53D1;&#x6D4B;&#x8BD5;">&#x9AD8;&#x5E76;&#x53D1;&#x6D4B;&#x8BD5;</h2>
<p>&#x5728;&#x8FDB;&#x884C;&#x9AD8;&#x5E76;&#x53D1;&#x6D4B;&#x8BD5;&#x4E4B;&#x524D;&#xFF0C;&#x5148;&#x6765;&#x770B;&#x4E0B;&#x5355;&#x4E2A;&#x8BF7;&#x6C42;&#x7684;&#xFF0C;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x8BF7;&#x6C42; <a href="http://localhost:8001/payment/hystrix/ok/1" target="_blank">http://localhost:8001/payment/hystrix/ok/1</a>
&#x7684;&#x65F6;&#x5019;&#x54CD;&#x5E94;&#x5F88;&#x5FEB;</p>
<p><img src="D:\baidu\MarkDown\Java\Spring\image\springcloud\&#x9AD8;&#x5E76;&#x53D1;&#x6D4B;&#x8BD5;.gif" alt="&#x9AD8;&#x5E76;&#x53D1;&#x6D4B;&#x8BD5;">
&#x4F7F;&#x7528; JMeter &#x5DE5;&#x5177;&#x6A21;&#x4EFF;&#x9AD8;&#x5E76;&#x53D1;&#xFF0C;&#x8BBE;&#x7F6E; 20000 &#x4E2A;&#x5E76;&#x53D1;&#x53BB;&#x8BBF;&#x95EE; 8001&#xFF0C;20000 &#x4E2A;&#x8BF7;&#x6C42;&#x90FD;&#x662F;&#x8BBF;&#x95EE; <a href="http://localhost:8001/payment/hystrix/timeout/1" target="_blank">http://localhost:8001/payment/hystrix/timeout/1</a></p>
<p>&#x7136;&#x540E;&#x518D;&#x53BB;&#x8BBF;&#x95EE; <a href="http://localhost:8001/payment/hystrix/ok/1" target="_blank">http://localhost:8001/payment/hystrix/ok/1</a></p>
<p>&#x5148;&#x6E05;&#x7A7A;&#x63A7;&#x5236;&#x53F0;
<img src="https://img-blog.csdnimg.cn/20200328132941744.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x542F;&#x52A8; JMeter &#x5DE5;&#x5177;&#xFF0C;&#x8BBE;&#x7F6E;&#x597D; 200 &#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C;&#x5FAA;&#x73AF; 100 &#x6B21;&#xFF0C;&#x4E5F;&#x5C31;&#x662F; 20000 &#x6B21;&#x8BF7;&#x6C42;
<img src="https://img-blog.csdnimg.cn/20200328133027443.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x542F;&#x52A8;&#x9AD8;&#x5E76;&#x53D1;&#x8BBF;&#x95EE;
<img src="https://img-blog.csdnimg.cn/20200328133122659.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x5728;&#x4F7F;&#x7528;&#x9AD8;&#x5E76;&#x53D1;&#x6D4B;&#x518D;&#x53BB;&#x8BBF;&#x95EE;&#x7684;&#x65F6;&#x5019;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#x8BBF;&#x95EE; <a href="http://localhost:8001/payment/hystrix/ok/1" target="_blank">http://localhost:8001/payment/hystrix/ok/1</a>
&#x7684;&#x65F6;&#x5019;&#x4E5F;&#x9700;&#x8981;&#x7B49;&#x5F85;&#x4E86;
<img src="https://img-blog.csdnimg.cn/20200328134032938.gif#pic_center" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x63A7;&#x5236;&#x53F0;&#x8F93;&#x51FA;&#xFF1A;&#x53EF;&#x53F3;&#x8FB9;&#x7684;&#x6EDA;&#x52A8;&#x6761;&#x53EF;&#x4EE5;&#x53D1;&#x73B0; timeout &#x786E;&#x5B9E;&#x63A5;&#x6536;&#x5230;&#x4E86;&#x5F88;&#x591A;&#x7684;&#x8BF7;&#x6C42;
<img src="https://img-blog.csdnimg.cn/20200328134251802.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x5361;&#x6B7B;">&#x4E3A;&#x4EC0;&#x4E48;&#x4F1A;&#x5361;&#x6B7B;</h3>
<p>&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x5F53;&#x4E00;&#x5927;&#x6CE2;&#x8BF7;&#x6C42;&#x53BB;&#x8BBF;&#x95EE; <a href="http://localhost:8001/payment/hystrix/timeout/1" target="_blank">http://localhost:8001/payment/hystrix/timeout/1</a> &#x7684;&#x65F6;&#x5019;&#xFF0C;<a href="http://localhost:8001/payment/hystrix/ok/1" target="_blank">http://localhost:8001/payment/hystrix/ok/1</a> &#x4E5F;&#x88AB;&#x62D6;&#x6162;&#x4E86;</p>
<p>tomcat &#x7684;&#x9ED8;&#x8BA4;&#x7684;&#x5DE5;&#x4F5C;&#x7EBF;&#x7A0B;&#x6570;&#x88AB;&#x6253;&#x6EE1;&#x4E86;&#xFF08;&#x3000;Windows &#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x4E2D;&#x7684;&#x7EBF;&#x7A0B;&#x6570;&#x4E0D;&#x5141;&#x8BB8;&#x8D85;&#x8FC7; 2000&#xFF09;&#xFF0C;&#x6CA1;&#x6709;&#x591A;&#x4F59;&#x7684;&#x7EBF;&#x7A0B;&#x6765;&#x5206;&#x89E3;&#x538B;&#x529B;&#x548C;&#x5904;&#x7406;</p>
<p>&#x4E0A;&#x9762;&#x4EC5;&#x4EC5;&#x662F;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005; 8001 &#x81EA;&#x5DF1;&#x6D4B;&#x8BD5;&#xFF0C;&#x5047;&#x5982;&#x6B64;&#x65F6;&#x5916;&#x90E8;&#x7684;&#x6D88;&#x8D39;&#x8005; 80 &#x4E5F;&#x6765;&#x8BBF;&#x95EE;&#xFF0C;&#x90A3;&#x4E48;&#x6D88;&#x8D39;&#x8005;&#x53EA;&#x80FD;&#x5E72;&#x7B49;&#xFF0C;&#x6700;&#x7EC8;&#x5BFC;&#x81F4;&#x6D88;&#x8D39;&#x8005; 80 &#x4E0D;&#x6EE1;&#x610F;&#xFF0C;&#x670D;&#x52A1;&#x7AEF; 8001 &#x76F4;&#x63A5;&#x5D29;&#x4E86;</p>
<h3 id="&#x65B0;&#x5EFA;-module-80&#xFF08;&#x6D88;&#x8D39;&#x8005;&#xFF09;">&#x65B0;&#x5EFA; Module 80&#xFF08;&#x6D88;&#x8D39;&#x8005;&#xFF09;</h3>
<h4 id="&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;">&#x6DFB;&#x52A0;&#x4F9D;&#x8D56;</h4>
<pre class="language-"><code class="lang-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--openfeign--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--hystrix--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-hystrix<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--eureka client--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-netflix-eureka-client<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- &#x5F15;&#x5165;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;api&#x901A;&#x7528;&#x5305;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Payment&#x652F;&#x4ED8;Entity --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.atguigu.springcloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cloud-api-commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${project.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--web--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--&#x4E00;&#x822C;&#x57FA;&#x7840;&#x901A;&#x7528;&#x914D;&#x7F6E;--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.projectlombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>lombok<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849
</code></pre>
<h4 id="&#x7F16;&#x5199;-applicationyml-&#x6587;&#x4EF6;">&#x7F16;&#x5199; application.yml &#x6587;&#x4EF6;</h4>
<pre class="language-"><code class="lang-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/
12345678
</code></pre>
<h4 id="&#x7F16;&#x5199;&#x542F;&#x52A8;&#x7C7B;">&#x7F16;&#x5199;&#x542F;&#x52A8;&#x7C7B;</h4>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">EnableFeignClients</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 13:59
 */</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableFeignClients</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HystrixOrderMain80</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HystrixOrderMain80</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718</span>
</code></pre>
<h4 id="&#x7F16;&#x5199;&#x4E1A;&#x52A1;&#x63A5;&#x53E3;">&#x7F16;&#x5199;&#x4E1A;&#x52A1;&#x63A5;&#x53E3;</h4>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">FeignClient</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 14:00
 */</span>

<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;DEMO-PROVIDER-HYSTRIX-PAYMENT&quot;</span><span class="token punctuation">)</span> <span class="token comment">// &#x4E0A;&#x8FF0; 8001 &#x7684;&#x670D;&#x52A1;&#x5B9E;&#x4F8B;&#x540D;&#x79F0;</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PaymentHystrixService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/hystrix/ok/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token number">12345678910111213141516171819202122</span>
</code></pre>
<h4 id="&#x7F16;&#x5199;-controller">&#x7F16;&#x5199; Controller</h4>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">PaymentHystrixService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 14:03
 */</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderHystrixController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">PaymentHystrixService</span> paymentHystrixService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/consumer/payment/hystrix/ok/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> paymentHystrixService<span class="token punctuation">.</span><span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/consumer/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> paymentHystrixService<span class="token punctuation">.</span><span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token number">1234567891011121314151617181920212223242526272829303132333435</span>
</code></pre>
<h4 id="&#x6D4B;&#x8BD5;">&#x6D4B;&#x8BD5;</h4>
<p>&#x672A;&#x5F00;&#x542F;&#x9AD8;&#x5E76;&#x53D1;&#x8BF7;&#x6C42;&#x7684;&#x6D4B;&#x8BD5;&#xFF08;&#x8DDF;&#x4E0A;&#x8FF0;&#x4E00;&#x6837;&#x4F7F;&#x7528; JMeter&#xFF09;&#xFF0C;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;</p>
<p><img src="https://img-blog.csdnimg.cn/20200328142141586.gif#pic_center" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x5F00;&#x542F;&#x9AD8;&#x5E76;&#x53D1;&#x4E4B;&#x540E;&#x8BBF;&#x95EE;&#xFF0C;&#x5361;&#x987F;</p>
<p><img src="https://img-blog.csdnimg.cn/2020032814225462.gif#pic_center" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x603B;&#x7ED3;&#xFF1A;</p>
<ul>
<li>&#x6D88;&#x8D39;&#x8005;&#x8981;&#x4E48;&#x8F6C;&#x5708;&#x5708;&#x7B49;&#x5F85;</li>
<li>&#x6D88;&#x8D39;&#x7AEF;&#x8981;&#x4E48;&#x8D85;&#x65F6;&#x9519;&#x8BEF;
<img src="https://img-blog.csdnimg.cn/20200328142448753.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></li>
</ul>
<h2 id="&#x670D;&#x52A1;&#x964D;&#x7EA7;">&#x670D;&#x52A1;&#x964D;&#x7EA7;</h2>
<h3 id="&#x670D;&#x52A1;&#x964D;&#x7EA7;&#x5BB9;&#x9519;&#x89E3;&#x51B3;&#x7684;&#x7EF4;&#x5EA6;&#x8981;&#x6C42;">&#x670D;&#x52A1;&#x964D;&#x7EA7;&#x5BB9;&#x9519;&#x89E3;&#x51B3;&#x7684;&#x7EF4;&#x5EA6;&#x8981;&#x6C42;</h3>
<ul>
<li>&#x5982;&#x679C;&#x51FA;&#x73B0;&#x8D85;&#x65F6;&#x5BFC;&#x81F4;&#x670D;&#x52A1;&#x5668;&#x53D8;&#x6162;&#xFF08;&#x8F6C;&#x5708;&#xFF09;&#xFF0C;&#x90A3;&#x4E48;&#x4E0D;&#x518D;&#x7B49;&#x5F85;</li>
<li>&#x51FA;&#x9519;&#xFF08;&#x5B95;&#x673A;&#x6216;&#x7A0B;&#x5E8F;&#x8FD0;&#x884C;&#x51FA;&#x9519;&#xFF09;</li>
<li>&#x89E3;&#x51B3;<ul>
<li>&#x5BF9;&#x65B9;&#x670D;&#x52A1;&#xFF08;8001&#xFF09;&#x8D85;&#x65F6;&#x4E86;&#xFF0C;&#x8C03;&#x7528;&#x8005;&#xFF08;80&#xFF09;&#x4E0D;&#x80FD;&#x4E00;&#x76F4;&#x5361;&#x6B7B;&#x7B49;&#x5F85;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x6709;&#x670D;&#x52A1;&#x964D;&#x7EA7;</li>
<li>&#x5BF9;&#x65B9;&#xFF08;8001&#xFF09;&#x5B95;&#x673A;&#x4E86;&#xFF0C;&#x8C03;&#x7528;&#x8005;&#xFF08;80&#xFF09;&#x4E0D;&#x80FD;&#x4E00;&#x76F4;&#x5361;&#x6B7B;&#x7B49;&#x5F85;&#xFF0C;&#x5FC5;&#x987B;&#x8981;&#x6709;&#x670D;&#x52A1;&#x964D;&#x7EA7;</li>
<li>&#x5BF9;&#x65B9;&#x670D;&#x52A1;&#xFF08;8001&#xFF09;OK &#x4E86;&#xFF0C; &#x8C03;&#x7528;&#x8005;&#xFF08;80&#xFF09;&#x81EA;&#x5DF1;&#x51FA;&#x6545;&#x969C;&#x6216;&#x6709;&#x81EA;&#x6211;&#x8981;&#x6C42;&#xFF08;&#x81EA;&#x5DF1;&#x7684;&#x7B49;&#x5F85;&#x65F6;&#x95F4;&#x5C0F;&#x4E8E;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#xFF09;</li>
</ul>
</li>
</ul>
<h4 id="&#x670D;&#x52A1;&#x964D;&#x7EA7;&#x914D;&#x7F6E;">&#x670D;&#x52A1;&#x964D;&#x7EA7;&#x914D;&#x7F6E;</h4>
<p>&#x4F7F;&#x7528; @HystrixCommand &#x6CE8;&#x89E3;&#xFF08;&#x4E00;&#x65E6;&#x8C03;&#x7528;&#x670D;&#x52A1;&#x65B9;&#x6CD5;&#x5931;&#x8D25;&#x5E76;&#x629B;&#x51FA;&#x4E86;&#x9519;&#x8BEF;&#x4FE1;&#x606F;&#x540E;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x8C03;&#x7528; @HystrixCommand &#x6807;&#x6CE8;&#x597D;&#x7684; fallbackMethod &#x8C03;&#x7528;&#x7C7B;&#x4E2D;&#x7684;&#x6307;&#x5B9A;&#x65B9;&#x6CD5;&#xFF09;</p>
<h4 id="&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#x8D85;&#x65F6;&#x8BBE;&#x7F6E;">&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;&#x8D85;&#x65F6;&#x8BBE;&#x7F6E;</h4>
<p>*&#x8BBE;&#x7F6E;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005; 8001 &#x81EA;&#x8EAB;&#x8C03;&#x7528;&#x8D85;&#x65F6;&#x65F6;&#x95F4;&#x7684;&#x5CF0;&#x503C;&#xFF0C;&#x5CF0;&#x503C;&#x5185;&#x53EF;&#x4EE5;&#x6B63;&#x5E38;&#x8FD0;&#x884C;&#xFF0C;&#x8D85;&#x8FC7;&#x4E86;&#x9700;&#x8981;&#x6709;&#x515C;&#x5E95;&#x7684;&#x65B9;&#x6CD5;&#x5904;&#x7406;&#xFF0C;&#x505A;&#x670D;&#x52A1;&#x964D;&#x7EA7; fallback</p>
<h5 id="&#x4FEE;&#x6539;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;-8001-&#x7684;-paymentservice">&#x4FEE;&#x6539;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005; 8001 &#x7684; PaymentService</h5>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>hystrix<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>javanica<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">HystrixCommand</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>hystrix<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>javanica<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">HystrixProperty</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 12:33
 */</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentService</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * &#x6B63;&#x5E38;&#x8BBF;&#x95EE;
     * @param id
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;paymentInfo_OK,id :&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ########## &#x65B0;&#x589E;&#x6CE8;&#x89E3; ##########</span>
    <span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;paymentInfo_TimeoutHandler&quot;</span><span class="token punctuation">,</span>commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token comment">// &#x5982;&#x679C;&#x662F; 3 s &#x5185;&#x5C31;&#x8D70;&#x6B63;&#x5E38;&#x903B;&#x8F91;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x670D;&#x52A1;&#x81EA;&#x8EAB;&#x8C03;&#x7528;&#x7684;&#x5CF0;&#x503C;</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;execution.isolation.thread.timeoutInMilliseconds&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;3000&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x8BBE;&#x7F6E;&#x6BD4;&#x4E0A;&#x9762;&#x5927;&#x7684;&#x65F6;&#x95F4;</span>
        <span class="token keyword">int</span> timeNumber <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>timeNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; paymentInfo_timeout,id :&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&#x8017;&#x65F6; &quot;</span> <span class="token operator">+</span> timeNumber <span class="token operator">+</span> <span class="token string">&quot; s&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// &#x670D;&#x52A1;&#x964D;&#x7EA7;&#x4F1A;&#x6267;&#x884C;&#x7684;&#x65B9;&#x6CD5;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_TimeoutHandler</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; paymentInfo_TimeoutHandler,id :&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&#x8FDB;&#x5165; paymentInfo_TimeoutHandler &#x65B9;&#x6CD5;&quot;</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718192021222324252627282930313233343536373839404142434445464748</span>
</code></pre>
<h5 id="&#x4FEE;&#x8BE5;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;-8001-&#x7684;&#x542F;&#x52A8;&#x7C7B;">&#x4FEE;&#x8BE5;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005; 8001 &#x7684;&#x542F;&#x52A8;&#x7C7B;</h5>
<p>&#x589E;&#x52A0; @EnableCircuitBreaker &#x6CE8;&#x89E3;
<img src="https://img-blog.csdnimg.cn/20200328145039208.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h5 id="&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;">&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;</h5>
<p>&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x4F7F;&#x7528; @HystrixCommand &#x6CE8;&#x89E3;&#x8BBE;&#x7F6E;&#x5CF0;&#x503C;&#x4E3A; 3 s&#xFF0C;&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x5CF0;&#x503C;&#x5C31;&#x4F1A;&#x8D70; fallbackMethod &#x8BBE;&#x7F6E;&#x7684;&#x7684;&#x65B9;&#x6CD5;
<img src="https://img-blog.csdnimg.cn/20200328145727391.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x7ED3;&#x8BBA;&#xFF1A;&#x6807;&#x6CE8; @HystrixCommand &#x7684;&#x65B9;&#x6CD5;&#x5982;&#x679C;&#x8D85;&#x65F6;&#x5F02;&#x5E38;&#x6216;&#x8005;&#x8BA1;&#x7B97;&#x5F02;&#x5E38;&#x90FD;&#x4F1A; fallback</p>
<h3 id="&#x6D88;&#x8D39;&#x7AEF;&#x8D85;&#x65F6;&#x8BBE;&#x7F6E;">&#x6D88;&#x8D39;&#x7AEF;&#x8D85;&#x65F6;&#x8BBE;&#x7F6E;</h3>
<h5 id="&#x4FEE;&#x6539;-applicationyml-&#x6587;&#x4EF6;">&#x4FEE;&#x6539; application.yml &#x6587;&#x4EF6;</h5>
<pre class="language-"><code class="lang-yml"><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span>

<span class="token key atrule">eureka</span><span class="token punctuation">:</span>
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">register-with-eureka</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">service-url</span><span class="token punctuation">:</span>
      <span class="token key atrule">defaultZone</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//eureka7001.com<span class="token punctuation">:</span>7001/eureka/

<span class="token key atrule">feign</span><span class="token punctuation">:</span>
  <span class="token key atrule">hystrix</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
123456789101112
</code></pre>
<h5 id="&#x4FEE;&#x6539;&#x63D0;&#x4F9B;&#x8005;&#x7684;&#x8D85;&#x65F6;&#x8BBE;&#x7F6E;&#x4E3A;-5-s">&#x4FEE;&#x6539;&#x63D0;&#x4F9B;&#x8005;&#x7684;&#x8D85;&#x65F6;&#x8BBE;&#x7F6E;&#x4E3A; 5 s</h5>
<p><img src="https://img-blog.csdnimg.cn/20200328152218632.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h5 id="&#x4FEE;&#x6539;&#x6D88;&#x8D39;&#x7AEF;&#x63A7;&#x5236;&#x5668;&#x4EE3;&#x7801;">&#x4FEE;&#x6539;&#x6D88;&#x8D39;&#x7AEF;&#x63A7;&#x5236;&#x5668;&#x4EE3;&#x7801;</h5>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">PaymentHystrixService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>hystrix<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>javanica<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">HystrixCommand</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>hystrix<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>javanica<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">HystrixProperty</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 14:03
 */</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderHystrixController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">PaymentHystrixService</span> paymentHystrixService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/consumer/payment/hystrix/ok/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> paymentHystrixService<span class="token punctuation">.</span><span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/consumer/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;paymentTimeOutFallbackMethod&quot;</span><span class="token punctuation">,</span>commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token comment">// &#x5982;&#x679C;&#x662F; 1.5 s &#x5185;&#x5C31;&#x8D70;&#x6B63;&#x5E38;&#x903B;&#x8F91;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x670D;&#x52A1;&#x81EA;&#x8EAB;&#x8C03;&#x7528;&#x7684;&#x5CF0;&#x503C;</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;execution.isolation.thread.timeoutInMilliseconds&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;1500&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> paymentHystrixService<span class="token punctuation">.</span><span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentTimeOutFallbackMethod</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&#x6211;&#x662F;&#x6D88;&#x8D39;&#x8005; 80&#xFF0C;&#x5BF9;&#x65B9;&#x652F;&#x4ED8;&#x7CFB;&#x7EDF;&#x7E41;&#x5FD9;&#x8BF7; 10 s &#x540E;&#x518D;&#x8BD5;&#x6216;&#x8005;&#x81EA;&#x5DF1;&#x8FD0;&#x884C;&#x51FA;&#x9519;&#x68C0;&#x67E5;&#x81EA;&#x5DF1;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">12345678910111213141516171819202122232425262728293031323334353637383940414243</span>
</code></pre>
<p><img src="https://img-blog.csdnimg.cn/20200328152347326.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h5 id="&#x4FEE;&#x6539;&#x6D88;&#x8D39;&#x7AEF;&#x542F;&#x52A8;&#x7C7B;">&#x4FEE;&#x6539;&#x6D88;&#x8D39;&#x7AEF;&#x542F;&#x52A8;&#x7C7B;</h5>
<p>&#x52A0;&#x4E0A; @EnableHystrix &#x6CE8;&#x89E3;</p>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>hystrix<span class="token punctuation">.</span></span><span class="token class-name">EnableHystrix</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">EnableFeignClients</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 13:59
 */</span>

<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@EnableFeignClients</span>
<span class="token annotation punctuation">@EnableHystrix</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HystrixOrderMain80</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">HystrixOrderMain80</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">1234567891011121314151617181920</span>
</code></pre>
<h5 id="&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;">&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;</h5>
<p><img src="https://img-blog.csdnimg.cn/20200328152053348.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="defaultpropertiesdefaultfallback--">@DefaultProperties(defaultFallback = &#x201C;&#x201D;)</h3>
<ul>
<li>1:1 &#x6BCF;&#x4E2A;&#x65B9;&#x6CD5;&#x914D;&#x7F6E;&#x4E00;&#x4E2A;&#x670D;&#x52A1;&#x964D;&#x7EA7;&#x65B9;&#x6CD5;&#xFF0C;&#x6280;&#x672F;&#x4E0A;&#x53EF;&#x4EE5;&#xFF0C;&#x5B9E;&#x9645;&#x4E0A;&#x4E0D;&#x592A;&#x53EF;&#x884C;</li>
<li>1&#xFF1A;N &#x9664;&#x4E86;&#x4E2A;&#x522B;&#x91CD;&#x8981;&#x6838;&#x5FC3;&#x4E1A;&#x52A1;&#x6709;&#x4E13;&#x5C5E;&#xFF0C;&#x5176;&#x5B83;&#x666E;&#x901A;&#x7684;&#x53EF;&#x4EE5;&#x901A;&#x8FC7; @DefaultProperties(defaultFallback = &#x201C;&#x201D;) &#x7EDF;&#x4E00;&#x8DF3;&#x8F6C;&#x5230;&#x7EDF;&#x4E00;&#x5904;&#x7406;&#x7ED3;&#x679C;&#x9875;&#x9762;</li>
</ul>
<p>&#x901A;&#x7528;&#x7684;&#x548C;&#x72EC;&#x4EAB;&#x7684;&#x5404;&#x81EA;&#x5206;&#x5F00;&#xFF0C;&#x907F;&#x514D;&#x4E86;&#x4EE3;&#x7801;&#x81A8;&#x80C0;&#xFF0C;&#x5408;&#x7406;&#x51CF;&#x5C11;&#x4E86;&#x4EE3;&#x7801;&#x91CF;</p>
<h5 id="&#x4FEE;&#x6539;&#x6D88;&#x8D39;&#x7AEF;-orderhystrixcontroller">&#x4FEE;&#x6539;&#x6D88;&#x8D39;&#x7AEF; OrderHystrixController</h5>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>controller</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">PaymentHystrixService</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>hystrix<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>javanica<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">DefaultProperties</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>hystrix<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>javanica<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">HystrixCommand</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>hystrix<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>javanica<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">HystrixProperty</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span>extern<span class="token punctuation">.</span>slf4j<span class="token punctuation">.</span></span><span class="token class-name">Slf4j</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 14:03
 */</span>

<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@DefaultProperties</span><span class="token punctuation">(</span>defaultFallback <span class="token operator">=</span> <span class="token string">&quot;paymentGlobalFallbackMethod&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderHystrixController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">PaymentHystrixService</span> paymentHystrixService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/consumer/payment/hystrix/ok/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> paymentHystrixService<span class="token punctuation">.</span><span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/consumer/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token comment">/*@HystrixCommand(fallbackMethod = &quot;paymentTimeOutFallbackMethod&quot;,commandProperties = {
            // &#x5982;&#x679C;&#x662F; 1.5 s &#x5185;&#x5C31;&#x8D70;&#x6B63;&#x5E38;&#x903B;&#x8F91;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x670D;&#x52A1;&#x81EA;&#x8EAB;&#x8C03;&#x7528;&#x7684;&#x5CF0;&#x503C;
            @HystrixProperty(name = &quot;execution.isolation.thread.timeoutInMilliseconds&quot;,value = &quot;1500&quot;)
    })*/</span>
    <span class="token annotation punctuation">@HystrixCommand</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> paymentHystrixService<span class="token punctuation">.</span><span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentTimeOutFallbackMethod</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&#x6211;&#x662F;&#x6D88;&#x8D39;&#x8005; 80&#xFF0C;&#x5BF9;&#x65B9;&#x652F;&#x4ED8;&#x7CFB;&#x7EDF;&#x7E41;&#x5FD9;&#x8BF7; 10 s &#x540E;&#x518D;&#x8BD5;&#x6216;&#x8005;&#x81EA;&#x5DF1;&#x8FD0;&#x884C;&#x51FA;&#x9519;&#x68C0;&#x67E5;&#x81EA;&#x5DF1;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// &#x4E0B;&#x9762;&#x662F;&#x5168;&#x5C40; fallback</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentGlobalFallbackMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Global &#x5F02;&#x5E38;&#x5904;&#x7406;&#x4FE1;&#x606F;&#xFF0C;&#x8BF7;&#x7A0D;&#x540E;&#x518D;&#x8BD5;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152</span>
</code></pre>
<h5 id="&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;">&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;</h5>
<p><img src="https://img-blog.csdnimg.cn/2020032816215093.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="feignfallback">FeignFallback</h3>
<p>&#x7531;&#x4E8E;&#x4E0A;&#x9762;&#x7684;&#x4EE3;&#x7801;&#x8026;&#x5408;&#x5EA6;&#x8F83;&#x9AD8;&#xFF0C;&#x6240;&#x4EE5;&#x5C3D;&#x91CF;&#x4F7F;&#x7528;&#x63A5;&#x53E3;&#x7684;&#x5F62;&#x5F0F;</p>
<h5 id="&#x65B0;&#x5EFA;-paymenthystrixservice-&#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;">&#x65B0;&#x5EFA; PaymentHystrixService &#x63A5;&#x53E3;&#x7684;&#x5B9E;&#x73B0;&#x7C7B;</h5>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 16:32
 */</span>

<span class="token annotation punctuation">@Component</span> <span class="token comment">// &#x8BB0;&#x5F97;&#x52A0;&#x4E0A;&#x6CE8;&#x89E3;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentHystrixServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">PaymentHystrixService</span> <span class="token punctuation">{</span>


    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;------ PaymentHystrixService fallback paymentInfo OK&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;------ PaymentHystrixService fallback paymentInfo timeout&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">1234567891011121314151617181920212223</span>
</code></pre>
<h5 id="&#x4FEE;&#x6539;-paymenthystrixservice-&#x4EE3;&#x7801;">&#x4FEE;&#x6539; PaymentHystrixService &#x4EE3;&#x7801;</h5>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>cloud<span class="token punctuation">.</span>openfeign<span class="token punctuation">.</span></span><span class="token class-name">FeignClient</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">GetMapping</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 14:00
 */</span>

<span class="token annotation punctuation">@Component</span>
<span class="token comment">// &#x4F7F;&#x7528;&#x5B9E;&#x73B0;&#x7C7B;&#x7684;&#x8FD4;&#x56DE;&#x4FE1;&#x606F;&#xFF0C;&#x964D;&#x4F4E;&#x8026;&#x5408;&#x5EA6;</span>
<span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;DEMO-PROVIDER-HYSTRIX-PAYMENT&quot;</span><span class="token punctuation">,</span>fallback <span class="token operator">=</span> <span class="token class-name">PaymentHystrixServiceImpl</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PaymentHystrixService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/hystrix/ok/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/payment/hystrix/timeout/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token number">123456789101112131415161718192021222324</span>
</code></pre>
<h5 id="&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;">&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;</h5>
<p>&#x542F;&#x52A8;&#x670D;&#x52A1;&#x7AEF; 7001&#xFF0C;&#x63D0;&#x4F9B;&#x8005; 8001&#xFF0C;&#x6D88;&#x8D39;&#x8005; 80&#xFF0C;&#x6B63;&#x5E38;&#x8BBF;&#x95EE;
<img src="https://img-blog.csdnimg.cn/20200328163708886.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x6545;&#x610F;&#x5173;&#x6389;&#x63D0;&#x4F9B;&#x8005; 8001&#xFF0C;&#x6A21;&#x4EFF;&#x5B95;&#x673A;&#xFF0C;&#x53EF;&#x4EE5;&#x53D1;&#x73B0;&#xFF0C;&#x9875;&#x9762;&#x8FD4;&#x56DE;&#x4E86; PaymentHystrixService &#x5B9E;&#x73B0;&#x7C7B;&#x5B9A;&#x4E49;&#x7684;&#x4FE1;&#x606F;
<img src="https://img-blog.csdnimg.cn/20200328163649130.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h2 id="&#x670D;&#x52A1;&#x7194;&#x65AD;">&#x670D;&#x52A1;&#x7194;&#x65AD;</h2>
<h3 id="&#x7194;&#x65AD;&#x673A;&#x5236;&#x6982;&#x8FF0;">&#x7194;&#x65AD;&#x673A;&#x5236;&#x6982;&#x8FF0;</h3>
<p>&#x7194;&#x65AD;&#x673A;&#x5236;&#x662F;&#x5E94;&#x5BF9;&#x96EA;&#x5D29;&#x6548;&#x5E94;&#x7684;&#x4E00;&#x79CD;&#x5FAE;&#x670D;&#x52A1;&#x94FE;&#x8DEF;&#x4FDD;&#x62A4;&#x673A;&#x5236;&#xFF0C;&#x5F53;&#x6247;&#x51FA;&#x94FE;&#x8DEF;&#x7684;&#x67D0;&#x4E2A;&#x5FAE;&#x670D;&#x52A1;&#x51FA;&#x9519;&#x4E0D;&#x53EF;&#x7528;&#x6216;&#x8005;&#x54CD;&#x5E94;&#x65F6;&#x95F4;&#x592A;&#x957F;&#x65F6;&#xFF0C;&#x4F1A;&#x8FDB;&#x884C;&#x670D;&#x52A1;&#x7684;&#x964D;&#x7EA7;&#xFF0C;&#x8FDB;&#x800C;&#x7194;&#x65AD;&#x8BE5;&#x8282;&#x70B9;&#x5FAE;&#x670D;&#x52A1;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x5FEB;&#x901F;&#x8FD4;&#x56DE;&#x9519;&#x8BEF;&#x7684;&#x54CD;&#x5E94;&#x4FE1;&#x606F;</p>
<p>&#x5F53;&#x68C0;&#x6D4B;&#x5230;&#x8BE5;&#x8282;&#x70B9;&#x5FAE;&#x670D;&#x52A1;&#x8C03;&#x7528;&#x54CD;&#x5E94;&#x6B63;&#x5E38;&#x540E;&#xFF0C;&#x6062;&#x590D;&#x8C03;&#x7528;&#x94FE;&#x8DEF;</p>
<p>&#x5728; SpringCloud &#x6846;&#x67B6;&#x91CC;&#xFF0C;&#x7194;&#x65AD;&#x673A;&#x5236;&#x901A;&#x8FC7; Hystrix &#x5B9E;&#x73B0;&#xFF0C;Hystrix &#x4F1A;&#x76D1;&#x63A7;&#x5FAE;&#x670D;&#x52A1;&#x95F4;&#x8C03;&#x7528;&#x7684;&#x72B6;&#x51B5;&#xFF0C;&#x5F53;&#x5931;&#x8D25;&#x7684;&#x8C03;&#x7528;&#x5230;&#x4E00;&#x5B9A;&#x7684;&#x9600;&#x503C;&#xFF0C;&#x7F3A;&#x7701;&#x662F; 5 s &#x5185; 10 &#x6B21;&#x8C03;&#x7528;&#x5931;&#x8D25;&#xFF0C;&#x5C31;&#x4F1A;&#x542F;&#x52A8;&#x7194;&#x65AD;&#x673A;&#x5236;&#xFF0C;&#x7194;&#x65AD;&#x673A;&#x5236;&#x7684;&#x6CE8;&#x89E3;&#x662F; @HystrixCommand</p>
<h4 id="&#x4FEE;&#x6539;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;-8001-&#x7684;-paymentservice-&#x4EE3;&#x7801;">&#x4FEE;&#x6539;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005; 8001 &#x7684; PaymentService &#x4EE3;&#x7801;</h4>
<pre class="language-"><code class="lang-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>java<span class="token punctuation">.</span>springcloud<span class="token punctuation">.</span>service</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">IdUtil</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>hystrix<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>javanica<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">HystrixCommand</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>netflix<span class="token punctuation">.</span>hystrix<span class="token punctuation">.</span>contrib<span class="token punctuation">.</span>javanica<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">HystrixProperty</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Service</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PathVariable</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @author Woo_home
 * @create 2020/3/28 12:33
 */</span>

<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PaymentService</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * &#x6B63;&#x5E38;&#x8BBF;&#x95EE;
     * @param id
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_OK</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;paymentInfo_OK,id :&quot;</span> <span class="token operator">+</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ########## &#x65B0;&#x589E;&#x6CE8;&#x89E3; ##########</span>
    <span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;paymentInfo_TimeoutHandler&quot;</span><span class="token punctuation">,</span>commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token comment">// &#x5982;&#x679C;&#x662F; 3 s &#x5185;&#x5C31;&#x8D70;&#x6B63;&#x5E38;&#x903B;&#x8F91;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x670D;&#x52A1;&#x81EA;&#x8EAB;&#x8C03;&#x7528;&#x7684;&#x5CF0;&#x503C;</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;execution.isolation.thread.timeoutInMilliseconds&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;5000&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_Timeout</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// &#x8BBE;&#x7F6E;&#x6BD4;&#x4E0A;&#x9762;&#x5C0F;&#x7684;&#x65F6;&#x95F4;</span>
        <span class="token keyword">int</span> timeNumber <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>SECONDS<span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span>timeNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; paymentInfo_timeout,id :&quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&#x8017;&#x65F6; &quot;</span> <span class="token operator">+</span> timeNumber <span class="token operator">+</span> <span class="token string">&quot; s&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// &#x670D;&#x52A1;&#x964D;&#x7EA7;&#x4F1A;&#x6267;&#x884C;&#x7684;&#x65B9;&#x6CD5;</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentInfo_TimeoutHandler</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;&#x7EBF;&#x7A0B;&#x6C60;&#xFF1A;&quot;</span> <span class="token operator">+</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &#x7CFB;&#x7EDF;&#x7E41;&#x5FD9;&#xFF0C;&#x8BF7;&#x7A0D;&#x540E;&#x518D;&#x8BD5; &quot;</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">&quot;\t&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;&#x8FDB;&#x5165; paymentInfo_TimeoutHandler &#x65B9;&#x6CD5;&quot;</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">// ====== &#x670D;&#x52A1;&#x7194;&#x65AD;</span>
    <span class="token annotation punctuation">@HystrixCommand</span><span class="token punctuation">(</span>fallbackMethod <span class="token operator">=</span> <span class="token string">&quot;paymentCircuitBreaker_fallback&quot;</span><span class="token punctuation">,</span>commandProperties <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.enabled&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">// &#x662F;&#x5426;&#x5F00;&#x542F;&#x65AD;&#x8DEF;&#x5668;</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.requestVolumeThreshold&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">// &#x8BF7;&#x6C42;&#x6B21;&#x6570;</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.sleepWindowInMilliseconds&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;10000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// &#x65F6;&#x95F4;&#x7A97;&#x53E3;&#x671F;</span>
            <span class="token annotation punctuation">@HystrixProperty</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;circuitBreaker.errorThresholdPercentage&quot;</span><span class="token punctuation">,</span>value <span class="token operator">=</span> <span class="token string">&quot;60&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">// &#x5931;&#x8D25;&#x7387;&#x8FBE;&#x5230;&#x591A;&#x5C11;&#x540E;&#x8DF3;&#x95F8;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentCircuitBreaker</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>id <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;****** id &#x4E0D;&#x80FD;&#x8D1F;&#x6570;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">String</span> serialNumber <span class="token operator">=</span> <span class="token class-name">IdUtil</span><span class="token punctuation">.</span><span class="token function">simpleUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;\t&quot;</span><span class="token operator">+</span><span class="token string">&quot;&#x8C03;&#x7528;&#x6210;&#x529F;&#xFF0C;&#x6D41;&#x6C34;&#x53F7;: &quot;</span> <span class="token operator">+</span> serialNumber<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">paymentCircuitBreaker_fallback</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;id &#x4E0D;&#x80FD;&#x8D1F;&#x6570;&#xFF0C;&#x8BF7;&#x7A0D;&#x540E;&#x518D;&#x8BD5; id: &quot;</span> <span class="token operator">+</span>id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869</span>
</code></pre>
<p>&#x5176;&#x4E2D;&#x4E0A;&#x9762;&#x7684;&#x914D;&#x7F6E;&#x662F;&#x4ECE; HystrixCommandProperties &#x4E2D;&#x62FF;&#x7684;&#xFF0C; Hystrix &#x5168;&#x90E8;&#x914D;&#x7F6E;&#x90FD;&#x5728;&#x8FD9;&#x4E2A;&#x7C7B;&#x91CC;&#x9762;
<img src="https://img-blog.csdnimg.cn/20200328201921556.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h4 id="&#x4FEE;&#x6539;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005;-8001-&#x7684;&#x63A7;&#x5236;&#x5668;&#x4EE3;&#x7801;">&#x4FEE;&#x6539;&#x670D;&#x52A1;&#x63D0;&#x4F9B;&#x8005; 8001 &#x7684;&#x63A7;&#x5236;&#x5668;&#x4EE3;&#x7801;</h4>
<p>&#x589E;&#x52A0;&#x4EE5;&#x4E0B;&#x4EE3;&#x7801;
<img src="https://img-blog.csdnimg.cn/20200328201749840.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h4 id="&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;">&#x6D4B;&#x8BD5;&#x8BBF;&#x95EE;</h4>
<p><img src="https://img-blog.csdnimg.cn/2020032820153542.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
<img src="https://img-blog.csdnimg.cn/20200328201553667.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x5F53;&#x591A;&#x6B21;&#x9519;&#x8BEF;&#x8BF7;&#x6C42;&#x540E;&#x4F1A;&#x51FA;&#x73B0;&#x4E0B;&#x9762;&#x7684;&#x60C5;&#x51B5;&#xFF08;&#x8BF4;&#x660E;&#x542F;&#x52A8;&#x4E86;&#x670D;&#x52A1;&#x7194;&#x65AD;&#xFF09;&#xFF0C;&#x5F97;&#x8FC7;&#x6BB5;&#x65F6;&#x95F4;&#x624D;&#x80FD;&#x6B63;&#x786E;&#x8BBF;&#x95EE;
<img src="https://img-blog.csdnimg.cn/2020032820230146.png" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;"></p>
<h3 id="&#x7ED3;&#x8BBA;">&#x7ED3;&#x8BBA;</h3>
<p>&#x7194;&#x65AD;&#x7C7B;&#x578B;&#xFF1A;</p>
<ul>
<li>&#x7194;&#x65AD;&#x6253;&#x5F00;&#xFF1A;&#x8BF7;&#x6C42;&#x4E0D;&#x518D;&#x8FDB;&#x884C;&#x8C03;&#x7528;&#x5F53;&#x524D;&#x670D;&#x52A1;&#xFF0C;&#x5185;&#x90E8;&#x8BBE;&#x7F6E;&#x65F6;&#x949F;&#x4E00;&#x822C;&#x4E3A; MTTR &#xFF08;&#x5E73;&#x5747;&#x6545;&#x969C;&#x5904;&#x7406;&#x65F6;&#x95F4;&#xFF0C;&#x5F53;&#x6253;&#x5F00;&#x65F6;&#x957F;&#x8FBE;&#x5230;&#x6240;&#x8BBE;&#x65F6;&#x949F;&#x5219;&#x8FDB;&#x5165;&#x534A;&#x7194;&#x65AD;&#x72B6;&#x6001;&#xFF09;</li>
<li>&#x7194;&#x65AD;&#x5173;&#x95ED;&#xFF1A;&#x7194;&#x65AD;&#x5173;&#x95ED;&#x4E0D;&#x4F1A;&#x5BF9;&#x670D;&#x52A1;&#x8FDB;&#x884C;&#x7194;&#x65AD;</li>
<li>&#x7194;&#x65AD;&#x534A;&#x5F00;&#xFF1A;&#x90E8;&#x5206;&#x8BF7;&#x6C42;&#x6839;&#x636E;&#x89C4;&#x5219;&#x8C03;&#x7528;&#x5F53;&#x524D;&#x670D;&#x52A1;&#xFF0C;&#x5982;&#x679C;&#x8BF7;&#x6C42;&#x6210;&#x529F;&#x4E14;&#x7B26;&#x5408;&#x89C4;&#x5219;&#x5219;&#x8BA4;&#x4E3A;&#x5F53;&#x524D;&#x670D;&#x52A1;&#x6062;&#x590D;&#x6B63;&#x5E38;&#xFF0C;&#x5173;&#x95ED;&#x7194;&#x65AD;</li>
</ul>
<hr>
<h5 id="&#x65AD;&#x8DEF;&#x5668;&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x5F00;&#x59CB;&#x8D77;&#x4F5C;&#x7528;&#xFF1F;">&#x65AD;&#x8DEF;&#x5668;&#x5728;&#x4EC0;&#x4E48;&#x60C5;&#x51B5;&#x4E0B;&#x5F00;&#x59CB;&#x8D77;&#x4F5C;&#x7528;&#xFF1F;</h5>
<p><img src="https://img-blog.csdnimg.cn/20200328202959573.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dvb19ob21l,size_16,color_FFFFFF,t_70" alt="&#x5728;&#x8FD9;&#x91CC;&#x63D2;&#x5165;&#x56FE;&#x7247;&#x63CF;&#x8FF0;">
&#x6D89;&#x53CA;&#x5230;&#x65AD;&#x8DEF;&#x5668;&#x7684;&#x4E09;&#x4E2A;&#x91CD;&#x8981;&#x53C2;&#x6570;&#xFF1A;&#x5FEB;&#x7167;&#x65F6;&#x95F4;&#x7A97;&#x3001;&#x8BF7;&#x6C42;&#x603B;&#x6570;&#x9600;&#x503C;&#x3001;&#x9519;&#x8BEF;&#x767E;&#x5206;&#x6BD4;&#x9600;&#x503C;</p>
<ul>
<li>&#x5FEB;&#x7167;&#x65F6;&#x95F4;&#x7A97;&#xFF1A;&#x65AD;&#x8DEF;&#x5668;&#x786E;&#x5B9A;&#x662F;&#x5426;&#x6253;&#x5F00;&#x9700;&#x8981;&#x7EDF;&#x8BA1;&#x4E00;&#x4E9B;&#x8BF7;&#x6C42;&#x548C;&#x9519;&#x8BEF;&#x6570;&#x636E;&#xFF0C;&#x800C;&#x7EDF;&#x8BA1;&#x7684;&#x65F6;&#x95F4;&#x8303;&#x56F4;&#x5C31;&#x662F;&#x5FEB;&#x7167;&#x65F6;&#x95F4;&#x7A97;&#xFF0C;&#x9ED8;&#x8BA4;&#x4E3A;&#x6700;&#x8FD1;&#x7684; 10 s</li>
<li>&#x8BF7;&#x6C42;&#x603B;&#x6570;&#x9600;&#x503C;&#xFF1A;&#x5728;&#x5FEB;&#x7167;&#x65F6;&#x95F4;&#x7A97;&#x5185;&#xFF0C;&#x5FC5;&#x987B;&#x6EE1;&#x8DB3;&#x8BF7;&#x6C42;&#x603B;&#x6570;&#x9600;&#x503C;&#x624D;&#x6709;&#x8D44;&#x683C;&#x7194;&#x65AD;&#x3002;&#x9ED8;&#x8BA4;&#x4E3A; 20&#xFF0C;&#x610F;&#x5473;&#x7740;&#x5728; 10s &#x5185;&#xFF0C;&#x5982;&#x679C;&#x8BE5; Hystrix &#x547D;&#x4EE4;&#x7684;&#x8C03;&#x7528;&#x6B21;&#x6570;&#x4E0D;&#x8DB3; 20 &#x6B21;&#xFF0C;&#x5373;&#x4F7F;&#x6240;&#x6709;&#x7684;&#x8BF7;&#x6C42;&#x90FD;&#x8D85;&#x65F6;&#x6216;&#x5176;&#x4ED6;&#x539F;&#x56E0;&#x5931;&#x8D25;&#xFF0C;&#x65AD;&#x8DEF;&#x5668;&#x90FD;&#x4E0D;&#x4F1A;&#x6253;&#x5F00;</li>
<li>&#x9519;&#x8BEF;&#x767E;&#x5206;&#x6BD4;&#x9600;&#x503C;&#xFF1A;&#x5F53;&#x8BF7;&#x6C42;&#x603B;&#x6570;&#x5728;&#x5FEB;&#x7167;&#x65F6;&#x95F4;&#x7A97;&#x5185;&#x8D85;&#x8FC7;&#x4E86;&#x9600;&#x503C;&#xFF0C;&#x6BD4;&#x5982;&#x53D1;&#x751F;&#x4E86; 30 &#x6B21;&#x8C03;&#x7528;&#xFF0C;&#x5982;&#x679C;&#x5728;&#x8FD9; 30 &#x6B21;&#x8C03;&#x7528;&#x4E2D;&#xFF0C;&#x6709; 15 &#x6B21;&#x53D1;&#x751F;&#x4E86;&#x8D85;&#x65F6;&#x5F02;&#x5E38;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8D85;&#x8FC7;&#x4E86; 50% &#x7684;&#x9519;&#x8BEF;&#x767E;&#x5206;&#x6BD4;&#xFF0C;&#x5728;&#x9ED8;&#x8BA4;&#x7684;&#x8BBE;&#x5B9A; 50% &#x9600;&#x503C;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x5C31;&#x4F1A;&#x5C06;&#x65AD;&#x8DEF;&#x5668;&#x6253;&#x5F00;</li>
</ul>
<h5 id="&#x65AD;&#x8DEF;&#x5668;&#x5F00;&#x542F;&#x6216;&#x8005;&#x5173;&#x95ED;&#x7684;&#x6761;&#x4EF6;">&#x65AD;&#x8DEF;&#x5668;&#x5F00;&#x542F;&#x6216;&#x8005;&#x5173;&#x95ED;&#x7684;&#x6761;&#x4EF6;</h5>
<ul>
<li>&#x5F53;&#x6EE1;&#x8DB3;&#x4E00;&#x5B9A;&#x7684;&#x9600;&#x503C;&#x7684;&#x65F6;&#x5019;&#xFF08;&#x9ED8;&#x8BA4; 10 s &#x5185;&#x8D85;&#x8FC7; 20 &#x4E2A;&#x8BF7;&#x6C42;&#x6B21;&#x6570;&#xFF09;</li>
<li>&#x5F53;&#x5931;&#x8D25;&#x7387;&#x8FBE;&#x5230;&#x4E00;&#x5B9A;&#x7684;&#x65F6;&#x5019;&#xFF08;&#x9ED8;&#x8BA4; 10 s &#x5185;&#x8D85;&#x8FC7; 50% &#x7684;&#x8BF7;&#x6C42;&#x5931;&#x8D25;&#xFF09;</li>
<li>&#x5230;&#x8FBE;&#x4EE5;&#x4E0A;&#x9600;&#x503C;&#xFF0C;&#x65AD;&#x8DEF;&#x5668;&#x5C06;&#x4F1A;&#x5F00;&#x542F;</li>
<li>&#x5F53;&#x5F00;&#x542F;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x6240;&#x6709;&#x8BF7;&#x6C42;&#x90FD;&#x4E0D;&#x4F1A;&#x8FDB;&#x884C;&#x8F6C;&#x53D1;</li>
<li>&#x4E00;&#x6BB5;&#x65F6;&#x95F4;&#x540E;&#xFF08;&#x9ED8;&#x8BA4;&#x4E3A; 5 s&#xFF09;&#xFF0C;&#x8FD9;&#x4E2A;&#x65F6;&#x5019;&#x65AD;&#x8DEF;&#x5668;&#x662F;&#x534A;&#x5F00;&#x72B6;&#x6001;&#xFF0C;&#x4F1A;&#x8BA9;&#x5176;&#x4E2D;&#x4E00;&#x4E2A;&#x8BF7;&#x6C42;&#x8FDB;&#x884C;&#x8F6C;&#x53D1;&#x3002;&#x5982;&#x679C;&#x6210;&#x529F;&#xFF0C;&#x65AD;&#x8DEF;&#x5668;&#x4F1A;&#x5173;&#x95ED;&#xFF0C;&#x82E5;&#x5931;&#x8D25;&#xFF0C;&#x5219;&#x7EE7;&#x7EED;&#x5F00;&#x542F;&#xFF0C;&#x91CD;&#x590D; 4 &#x548C; 5 &#x6B65;&#x9AA4;</li>
</ul>
<h5 id="&#x65AD;&#x8DEF;&#x5668;&#x6253;&#x5F00;&#x4E4B;&#x540E;">&#x65AD;&#x8DEF;&#x5668;&#x6253;&#x5F00;&#x4E4B;&#x540E;</h5>
<p>1&#x3001;&#x518D;&#x6709;&#x8BF7;&#x6C42;&#x8C03;&#x7528;&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x5C06;&#x4E0D;&#x4F1A;&#x8C03;&#x7528;&#x4E3B;&#x903B;&#x8F91;&#xFF0C;&#x800C;&#x662F;&#x76F4;&#x63A5;&#x8C03;&#x7528;&#x964D;&#x7EA7; fallback&#x3002;&#x901A;&#x8FC7;&#x65AD;&#x8DEF;&#x5668;&#xFF0C;&#x5B9E;&#x73B0;&#x4E86;&#x81EA;&#x52A8;&#x5730;&#x53D1;&#x73B0;&#x9519;&#x8BEF;&#x5E76;&#x5C06;&#x964D;&#x7EA7;&#x903B;&#x8F91;&#x5207;&#x6362;&#x4E3A;&#x4E3B;&#x903B;&#x8F91;&#xFF0C;&#x51CF;&#x5C11;&#x54CD;&#x5E94;&#x5EF6;&#x8FDF;&#x7684;&#x6548;&#x679C;</p>
<p>2&#x3001;&#x539F;&#x6765;&#x7684;&#x4E3B;&#x903B;&#x8F91;&#x8981;&#x5982;&#x4F55;&#x6062;&#x590D;&#xFF1F;</p>
<p>&#x5BF9;&#x4E8E;&#x8FD9;&#x4E00;&#x95EE;&#x9898;&#xFF0C;Hystrix &#x4E5F;&#x4E3A;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x4E86;&#x81EA;&#x52A8;&#x6062;&#x590D;&#x529F;&#x80FD;&#xFF0C;&#x5F53;&#x65AD;&#x8DEF;&#x5668;&#x6253;&#x5F00;&#xFF0C;&#x5BF9;&#x4E3B;&#x903B;&#x8F91;&#x8FDB;&#x884C;&#x7194;&#x65AD;&#x4E4B;&#x540E;&#xFF0C;Hystrix &#x4F1A;&#x542F;&#x52A8;&#x4E00;&#x4E2A;&#x4F11;&#x7720;&#x65F6;&#x95F4;&#x7A97;&#xFF0C;&#x5728;&#x8FD9;&#x4E2A;&#x65F6;&#x95F4;&#x7A97;&#x5185;&#xFF0C;&#x964D;&#x7EA7;&#x903B;&#x8F91;&#x662F;&#x4E34;&#x65F6;&#x7684;&#x6210;&#x4E3A;&#x4E3B;&#x903B;&#x8F91;&#xFF0C;&#x5F53;&#x4F11;&#x7720;&#x65F6;&#x95F4;&#x7A97;&#x5230;&#x671F;&#xFF0C;&#x65AD;&#x8DEF;&#x5668;&#x5C06;&#x8FDB;&#x5165;&#x534A;&#x5F00;&#x72B6;&#x6001;&#xFF0C;&#x91CA;&#x653E;&#x4E00;&#x6B21;&#x8BF7;&#x6C42;&#x5230;&#x539F;&#x6765;&#x7684;&#x4E3B;&#x903B;&#x8F91;&#x4E0A;&#xFF0C;&#x5982;&#x679C;&#x6B64;&#x6B21;&#x8BF7;&#x6C42;&#x6B63;&#x5E38;&#x8FD4;&#x56DE;&#xFF0C;&#x90A3;&#x4E48;&#x65AD;&#x8DEF;&#x5668;&#x5C06;&#x7EE7;&#x7EED;&#x95ED;&#x5408;&#x4E3B;&#x903B;&#x8F91;&#x6062;&#x590D;&#xFF0C;&#x5982;&#x679C;&#x8FD9;&#x6B21;&#x8BF7;&#x6C42;&#x4F9D;&#x7136;&#x6709;&#x95EE;&#x9898;&#xFF0C;&#x65AD;&#x8DEF;&#x5668;&#x7EE7;&#x7EED;&#x8FDB;&#x5165;&#x6253;&#x5F00;&#x72B6;&#x6001;&#xFF0C;&#x4F11;&#x7720;&#x65F6;&#x95F4;&#x7A97;&#x91CD;&#x65B0;&#x8BA1;&#x65F6;</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="SpringBoot.html" class="navigation navigation-prev " aria-label="Previous page: SpringBoot">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="blog.html" class="navigation navigation-next " aria-label="Next page: Blog">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"SpringCloud","level":"5.5.5","depth":2,"next":{"title":"Blog","level":"5.5.6","depth":2,"path":"Java/Spring/blog.md","ref":"Java/Spring/blog.md","articles":[]},"previous":{"title":"SpringBoot","level":"5.5.4","depth":2,"path":"Java/Spring/SpringBoot.md","ref":"Java/Spring/SpringBoot.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["toc","summary","accordion","prism","-highlight","expandable-chapters","theme-comscore"],"pluginsConfig":{"prism":{"css":["prism-themes/themes/prism-base16-ateliersulphurpool.light.css"]},"summary":{},"toc":{},"accordion":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-comscore":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"Java/Spring/SpringCloud.md","mtime":"2020-09-13T02:30:17.911Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-02-01T02:18:32.396Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-accordion/accordionSelector.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-theme-comscore/test.js"></script>
        
    

    </body>
</html>

